/*!
 * Copyright (c) 2020 Thomas Otterson
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy of
 * this software and associated documentation files (the "Software"), to deal in
 * the Software without restriction, including without limitation the rights to
 * use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of
 * the Software, and to permit persons to whom the Software is furnished to do so,
 * subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS
 * FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR
 * COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER
 * IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN
 * CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * 
 */
!function(t,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define([],n):"object"==typeof exports?exports.kessel=n():t.kessel=n()}(this,(function(){return function(t){var n={};function r(e){if(n[e])return n[e].exports;var u=n[e]={i:e,l:!1,exports:{}};return t[e].call(u.exports,u,u.exports,r),u.l=!0,u.exports}return r.m=t,r.c=n,r.d=function(t,n,e){r.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:e})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,n){if(1&n&&(t=r(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var e=Object.create(null);if(r.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var u in t)r.d(e,u,function(n){return t[n]}.bind(null,u));return e},r.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(n,"a",n),n},r.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},r.p="",r(r.s=0)}([function(t,n,r){"use strict";r.r(n),r.d(n,"alpha",(function(){return Pt})),r.d(n,"any",(function(){return jt})),r.d(n,"anyOf",(function(){return Tt})),r.d(n,"char",(function(){return Lt})),r.d(n,"charI",(function(){return Bt})),r.d(n,"digit",(function(){return It})),r.d(n,"eof",(function(){return St})),r.d(n,"hex",(function(){return Ct})),r.d(n,"letter",(function(){return _t})),r.d(n,"lower",(function(){return Dt})),r.d(n,"noneOf",(function(){return Mt})),r.d(n,"octal",(function(){return Nt})),r.d(n,"range",(function(){return At})),r.d(n,"satisfy",(function(){return Et})),r.d(n,"satisfyM",(function(){return Ft})),r.d(n,"upper",(function(){return zt})),r.d(n,"failNormally",(function(){return Rt})),r.d(n,"failFatally",(function(){return Vt})),r.d(n,"alphaU",(function(){return on})),r.d(n,"letterU",(function(){return sn})),r.d(n,"lowerU",(function(){return cn})),r.d(n,"newline",(function(){return yn})),r.d(n,"newlineU",(function(){return vn})),r.d(n,"regex",(function(){return un})),r.d(n,"space",(function(){return fn})),r.d(n,"spaceU",(function(){return ln})),r.d(n,"spaces",(function(){return dn})),r.d(n,"spaces1",(function(){return xn})),r.d(n,"spaces1U",(function(){return hn})),r.d(n,"spacesU",(function(){return pn})),r.d(n,"upperU",(function(){return an})),r.d(n,"all",(function(){return mn})),r.d(n,"anyString",(function(){return $n})),r.d(n,"string",(function(){return wn})),r.d(n,"stringI",(function(){return kn})),r.d(n,"alt",(function(){return Bn})),r.d(n,"def",(function(){return Fn})),r.d(n,"empty",(function(){return jn})),r.d(n,"not",(function(){return Sn})),r.d(n,"opt",(function(){return En})),r.d(n,"peek",(function(){return An})),r.d(n,"andThenB",(function(){return Gn})),r.d(n,"applyB",(function(){return Rn})),r.d(n,"attempt",(function(){return _n})),r.d(n,"attemptM",(function(){return Pn})),r.d(n,"betweenB",(function(){return Kn})),r.d(n,"blockB",(function(){return Jn})),r.d(n,"chainB",(function(){return Dn})),r.d(n,"label",(function(){return Nn})),r.d(n,"leftB",(function(){return Vn})),r.d(n,"manyTillB",(function(){return qn})),r.d(n,"pipeB",(function(){return Hn})),r.d(n,"repeatB",(function(){return Zn})),r.d(n,"rightB",(function(){return Wn})),r.d(n,"sequenceB",(function(){return zn})),r.d(n,"compact",(function(){return Yn})),r.d(n,"fifth",(function(){return or})),r.d(n,"first",(function(){return rr})),r.d(n,"fourth",(function(){return sr})),r.d(n,"join",(function(){return Xn})),r.d(n,"nth",(function(){return nr})),r.d(n,"second",(function(){return er})),r.d(n,"third",(function(){return ur})),r.d(n,"value",(function(){return tr})),r.d(n,"always",(function(){return fr})),r.d(n,"andThen",(function(){return hr})),r.d(n,"apply",(function(){return dr})),r.d(n,"chain",(function(){return pr})),r.d(n,"map",(function(){return lr})),r.d(n,"orElse",(function(){return xr})),r.d(n,"assoc1L",(function(){return _r})),r.d(n,"assoc1R",(function(){return zr})),r.d(n,"assocL",(function(){return Nr})),r.d(n,"assocR",(function(){return Pr})),r.d(n,"between",(function(){return Mr})),r.d(n,"block",(function(){return $r})),r.d(n,"left",(function(){return kr})),r.d(n,"many",(function(){return Ur})),r.d(n,"many1",(function(){return Or})),r.d(n,"manyTill",(function(){return Ir})),r.d(n,"pipe",(function(){return Cr})),r.d(n,"repeat",(function(){return Tr})),r.d(n,"right",(function(){return mr})),r.d(n,"sepBy",(function(){return Fr})),r.d(n,"sepBy1",(function(){return Ar})),r.d(n,"sepEndBy",(function(){return jr})),r.d(n,"sepEndBy1",(function(){return Sr})),r.d(n,"seq",(function(){return wr})),r.d(n,"skip",(function(){return Lr})),r.d(n,"skipMany",(function(){return Br})),r.d(n,"skipMany1",(function(){return Er})),r.d(n,"Status",(function(){return M})),r.d(n,"fail",(function(){return _})),r.d(n,"failure",(function(){return G})),r.d(n,"fatal",(function(){return P})),r.d(n,"maybeFatal",(function(){return z})),r.d(n,"ok",(function(){return N})),r.d(n,"parse",(function(){return D})),r.d(n,"parser",(function(){return C})),r.d(n,"run",(function(){return Z})),r.d(n,"status",(function(){return R})),r.d(n,"succeeded",(function(){return V})),r.d(n,"success",(function(){return W})),r.d(n,"ErrorType",(function(){return v})),r.d(n,"compound",(function(){return $})),r.d(n,"expected",(function(){return g})),r.d(n,"formatErrors",(function(){return S})),r.d(n,"generic",(function(){return w})),r.d(n,"getPosition",(function(){return T})),r.d(n,"merge",(function(){return U})),r.d(n,"nested",(function(){return m})),r.d(n,"other",(function(){return k})),r.d(n,"unexpected",(function(){return b}));const e=new TextEncoder,u=new TextDecoder;function*s(t,n,r,e){const u="number"==typeof n?t:0,s="number"==typeof n?n:t,o="number"==typeof r?0===r?1:Math.abs(r):1,i="number"==typeof r?!!e:"number"==typeof n?!!r:!!n,a=u<s;let c=u;for(;!(a?i?c>s:c>=s:i?c<s:c<=s);)yield c,c=a?c+o:c-o}function o(t,n,r){const e=Uint8Array.from({length:n},(n,e)=>r.getUint8(t+e));return u.decode(e)}function i(t){return new DataView(e.encode(t).buffer)}function a(t){return[...t].length}function c(t,n){const r=n.getUint8(t);return(128&r)>>7==0?1:(224&r)>>5==6?2:(240&r)>>4==14?3:(240&r)>>4==15?4:1}function f(t,n){const r=c(t,n);return{width:r,next:o(t,r,n)}}function l(t){return`'${t}'`}function d(t){return[t,t]}function p(t){switch(t.length){case 0:return"";case 1:return t[0];case 2:return t.join(" or ");default:{const n=t.slice(),r=n.pop();return`${n.join(", ")}, or ${r}`}}}function x(t){return void 0===t?"undefined":"function"==typeof t?C.created(t)?"parser":"function":"symbol"==typeof t?`Symbol(${t.description})`:JSON.stringify(t)}const h=/\t/gu,y=/(?:\p{Mn}|\p{Cf})/gu,v={Expected:"expected",Unexpected:"unexpected",Generic:"generic",Nested:"nested",Compound:"compound",Other:"other"};function g(t){return[{type:v.Expected,label:t}]}function b(t){return[{type:v.Unexpected,label:t}]}function w(t){return[{type:v.Generic,label:t}]}function k(t){return[{type:v.Other,label:t}]}function m(t,n){return 1===n.length&&n[0].type===v.Nested?n:[{type:v.Nested,ctx:t,errors:n}]}function $(t,n,r){return 1===r.length&&r[0].type===v.Nested?[{type:v.Compound,ctx:r.ctx,errors:r.errors,label:t}]:[{type:v.Compound,ctx:n,errors:r,label:t}]}function U(t=[],n=[]){return[...t,...n]}function O(t,n){const r=n.getUint8(t);if(10===r||11===r||12===r)return{newline:!0,skip:1};if(13===r){if(t<n.byteLength-1){const e=n.getUint8(t+1);if(13===r&&10===e)return{newline:!0,skip:2}}return{newline:!0,skip:1}}if(t<n.byteLength-1){const e=n.getUint8(t+1);if(194===r&&133===e)return{newline:!0,skip:2};if(t<n.byteLength-2){const u=n.getUint8(t+2);if(226===r&&128===e&&(168===u||169===u))return{newline:!0,skip:3}}}return{newline:!1,skip:c(t,n)}}function L(t,n){let r=0,e=1,u=0;for(;u<n.byteLength;){const{newline:s,skip:o}=O(u,n);if(s){if(u+o>t)return{start:r,end:u-1,lineno:e};e++,r=u+o}u+=o}return{start:r,end:n.byteLength-1,lineno:e}}function B(t,n,r){let e=0,u=r;for(;u<t&&u<n.byteLength;)u+=c(u,n),e++;return e}function E(t,n,r){const e=[];let u=h.exec(n);for(;null!==u;)e.push(u.index),u=h.exec(n);let s=0,o=0,i=n;for(const n of e){const e=n+s,u=r-e%r;e<t+o&&(o+=u-1),s+=u-1,i=i.substring(0,e)+" ".repeat(u)+i.substring(e+1)}return{line:i,colIndex:o+t}}function F(t,n){let r=t;const e=[];let u=y.exec(n);for(;null!==u;)e.push(u.index),u.index<r&&r--,u=y.exec(n);return{colno:r+1,length:a(n)-e.length}}function A(t,n,r,e){const u=" ".repeat(e);return t.map(t=>{const{index:s,view:o}=t.ctx;return(t.label?`\n${u}${t.label} could not be parsed because:\n\n`:`\n${u}The parser backtracked after:\n\n`)+j(t.errors,s,o,n,r,e+2)}).join("")}function j(t,n,r,e=8,u=72,s=0){const{start:i,end:a,lineno:c}=L(n,r),f=B(n,r,i),l=" ".repeat(s),d=o(i,a-i+1,r),{colIndex:x,line:h}=E(f,d,e),{colno:y,length:g}=F(x,h),b=`${l}Parse error at (line ${c}, column ${y}):`,w=function(t,n,r,e,u=0){const s=" ".repeat(u);if(r<=e&&n<=e)return`${s}${t}\n${s}${" ".repeat(r-1)}^`;if(r<=e-3)return`${s}${t.substring(0,e-3)}...\n${s}${" ".repeat(r-1)}^`;if(r>=n-e+3){const u=n-e+3,o=r-(n-e);return`${s}...${t.substring(u)}\n${s}${" ".repeat(o-1)}^`}const o=r-1-Math.ceil(e/2)+3,i=r-1+Math.floor(e/2)-3;return`${s}...${t.substring(o,i)}...\n${s}${" ".repeat(Math.ceil(e/2))}^`}(h,g,y,u,s),k=t.find(t=>t.type===v.Generic),m=t.find(t=>t.type===v.Unexpected),$=p(t.filter(t=>t.type===v.Expected).map(t=>t.label)),U=t.filter(t=>t.type===v.Nested),O=t.filter(t=>t.type===v.Compound),j=m?`${l}Unexpected ${m.label}\n`:"",S=$.length?`${l}Expected ${$}\n`:"",T=k?`${l}${k.label}\n`:"",M=A(U,e,u,s),I=A(O,e,u,s);return function(t,n){let r=t;for(;"\n"===r[r.length-1];)r=r.substring(0,r.length-1);return r+"\n".repeat(n)}(`${b}\n\n${w}\n${j}${S}${T}${0===t.length?l+"Unknown error(s)\n":""}${n>=r.byteLength?l+"Note: failure occurred at the end of input\n":""}${I}${M}`,2)}function S(t,n,r,e=j){const[u,s]=t,{index:o,view:i}=u;return e(s.errors,o,i,n,r)}function T(t,n=8){const{index:r,view:e}=t,{start:u,end:s,lineno:i}=L(r,e),a=B(r,e,u),c=o(u,s-u+1,e),{colIndex:f,line:l}=E(a,c,n),{colno:d,_:p}=F(f,l);return{line:i,column:d}}const M={Ok:"ok",Fail:"fail",Fatal:"fatal"};function I(t){const n="Parser input must be a string, a typed array, an array buffer, or a data view; parser input was "+typeof t;return{view:(t=>{if("string"==typeof t)return i(t);if((r=t)instanceof Uint8Array||r instanceof Uint8ClampedArray||r instanceof Uint16Array||r instanceof Uint32Array||r instanceof Int8Array||r instanceof Int16Array||r instanceof Int32Array||r instanceof Float32Array||r instanceof Float64Array)return new DataView(t.buffer);var r;if(t instanceof ArrayBuffer)return new DataView(t);if(t instanceof DataView)return t;throw new Error(n)})(t),index:0}}const C=function(t,n="created"){const r=new WeakSet;return Object.defineProperty((...n)=>{const e=t(...n);return r.add(e),e},n,{value:r.has.bind(r)})}(t=>t);function N(t,n=null,r=t.index){return[{...t,index:r},{status:M.Ok,value:n}]}function _(t,n=[],r=t.index){return[{...t,index:r},{status:M.Fail,errors:n}]}function P(t,n=[],r=t.index){return[{...t,index:r},{status:M.Fatal,errors:n}]}function z(t,n,r=[],e=n.index){return[{...n,index:e},{status:t?M.Fatal:M.Fail,errors:r}]}function D(t,n){return t(I(n))}function R(t){return t[1].status}function V(t){return t[1].status===M.Ok}function W(t){return V(t)?t[1].value:null}function G(t){return V(t)?null:S(t)}function Z(t,n){const[r,[e,u]]=d(t(I(n)));if(u.status===M.Ok)return u.value;throw new Error(S(r))}const q=t=>n=>`expected ${t}; found ${x(n)}`;q("a one-character string"),q("a function"),q("a generator function"),q("a string"),q("an array"),q("a string or an array of characters"),q("a string or a regular expression"),q("a number"),q("a parser");const J="a Unicode alphanumeric character",H="any character",K=t=>"any of "+p(t.map(t=>`'${t}'`)),Q=t=>`a string of ${t} characters`,X=t=>l(t),Y=t=>l(t),tt="a digit",nt="end of input",rt="a hexadecimal digit",et="a letter",ut="a Unicode letter",st="a lowercase letter",ot="a Unicode lowercase letter",it="a newline",at="a Unicode newline",ct=t=>"none of "+p(t.map(t=>`'${t}'`)),ft="an octal digit",lt=(t,n)=>`a character between '${t}' and '${n}'`,dt=t=>"a string matching "+t,pt="a whitespace character",xt="zero or more whitespace characters",ht="one or more whitespace characters",yt="zero or more Unicode whitespace characters",vt="one or more Unicode whitespace characters",gt="a Unicode whitespace character",bt=t=>l(t),wt=t=>l(t),kt="an uppercase letter",mt="a Unicode uppercase letter",$t={alpha:g("an alphanumeric character"),alphaU:g(J),any:g(H),anyOf:t=>g(K(t)),anyString:t=>g(Q(t)),char:t=>g(X(t)),charI:t=>g(Y(t)),digit:g(tt),eof:g(nt),hex:g(rt),letter:g(et),letterU:g(ut),lower:g(st),lowerU:g(ot),newline:g(it),newlineU:g(at),noneOf:t=>g(ct(t)),octal:g(ft),range:(t,n)=>g(lt(t,n)),regex:t=>g(dt(t)),space:g(pt),spaces:g(xt),spaces1:g(ht),spacesU:g(yt),spaces1U:g(vt),spaceU:g(gt),string:t=>g(bt(t)),stringI:t=>g(wt(t)),upper:g(kt),upperU:g(mt)},{Ok:Ut}=M,Ot=t=>C(n=>{const{index:r,view:e}=n;if(r>=e.byteLength)return _(n);const{width:u,next:s}=f(r,e);return t(s)?N(n,s,r+u):_(n)}),Lt=t=>C(n=>{const[r,[e,u]]=d(Ot(n=>t===n)(n));return u.status===Ut?r:_(e,$t.char(t))}),Bt=t=>C(n=>{const[r,[e,u]]=d(Ot(n=>t.toLowerCase()===n.toLowerCase())(n));return u.status===Ut?r:_(e,$t.charI(t))}),Et=t=>C(n=>Ot(t)(n)),Ft=(t,n)=>C(r=>{const[e,[u,s]]=d(Ot(t)(r));return s.status===Ut?e:_(u,g(n))}),At=(t,n)=>C(r=>{const[e,[u,s]]=d(Ot(r=>r>=t&&r<=n)(r));return s.status===Ut?e:_(u,$t.range(t,n))}),jt=C(t=>{const{index:n,view:r}=t;if(n>=r.byteLength)return _(t,$t.any);const{width:e,next:u}=f(n,r);return N(t,u,n+e)}),St=C(t=>{const{index:n,view:r}=t;return n>=r.byteLength?N(t,null):_(t,$t.eof)}),Tt=t=>C(n=>{const{index:r,view:e}=n,{width:u,next:s}=f(r,e),o=[...t];return o.includes(s)?N(n,s,r+u):_(n,$t.anyOf(o))}),Mt=t=>C(n=>{const{index:r,view:e}=n,{width:u,next:s}=f(r,e),o=[...t];return o.includes(s)?_(n,$t.noneOf(o)):N(n,s,r+u)}),It=C(t=>{const[n,[r,e]]=d(Ot(t=>t>="0"&&t<="9")(t));return e.status===Ut?n:_(r,$t.digit)}),Ct=C(t=>{const[n,[r,e]]=d(Ot(t=>t>="0"&&t<="9"||t>="a"&&t<="f"||t>="A"&&t<="F")(t));return e.status===Ut?n:_(r,$t.hex)}),Nt=C(t=>{const[n,[r,e]]=d(Ot(t=>t>="0"&&t<="7")(t));return e.status===Ut?n:_(r,$t.octal)}),_t=C(t=>{const[n,[r,e]]=d(Ot(t=>t>="a"&&t<="z"||t>="A"&&t<="Z")(t));return e.status===Ut?n:_(r,$t.letter)}),Pt=C(t=>{const[n,[r,e]]=d(Ot(t=>t>="a"&&t<="z"||t>="A"&&t<="Z"||t>="0"&&t<="9")(t));return e.status===Ut?n:_(r,$t.alpha)}),zt=C(t=>{const[n,[r,e]]=d(Ot(t=>t>="A"&&t<="Z")(t));return e.status===Ut?n:_(r,$t.upper)}),Dt=C(t=>{const[n,[r,e]]=d(Ot(t=>t>="a"&&t<="z")(t));return e.status===Ut?n:_(r,$t.lower)}),Rt=t=>C(n=>_(n,w(t))),Vt=t=>C(n=>P(n,w(t))),{Ok:Wt}=M,Gt=/^\p{Alphabetic}/u,Zt=/^(?:\p{Alphabetic}|\p{N})/u,qt=/^(?:\p{Uppercase}|\p{Lt})/u,Jt=/^\p{Lowercase}/u,Ht=/^(?:\r\n|[\r\n\t ])/,Kt=/^(?:\r\n|\p{White_Space})/u,Qt=/^[\r\n\t ]*/,Xt=/^\p{White_Space}*/u,Yt=/^[\r\n\t ]+/,tn=/^\p{White_Space}+/u,nn=/^(?:\r\n|\r|\n)/,rn=/^(?:\r\n|[\r\n\u0085\u2028\u2029])/u,en=t=>C(n=>{const{index:r,view:e}=n,u=o(r,e.byteLength-r,e).match(t);return u?N(n,u[0],r+i(u[0]).byteLength):_(n)}),un=t=>C(n=>{let r="string"==typeof t?new RegExp(t):t;const{source:e,flags:u}=r;if("^"!==e[0]){r=new RegExp("^"+e,u)}const[s,[o,i]]=d(en(r)(n));return i.status===Wt?s:_(o,$t.regex(r))}),sn=C(t=>{const[n,[r,e]]=d(en(Gt)(t));return e.status===Wt?n:_(r,$t.letterU)}),on=C(t=>{const[n,[r,e]]=d(en(Zt)(t));return e.status===Wt?n:_(r,$t.alphaU)}),an=C(t=>{const[n,[r,e]]=d(en(qt)(t));return e.status===Wt?n:_(r,$t.upperU)}),cn=C(t=>{const[n,[r,e]]=d(en(Jt)(t));return e.status===Wt?n:_(r,$t.lowerU)}),fn=C(t=>{const[n,[r,e]]=d(en(Ht)(t));return e.status===Wt?n:_(r,$t.space)}),ln=C(t=>{const[n,[r,e]]=d(en(Kt)(t));return e.status===Wt?n:_(r,$t.spaceU)}),dn=C(t=>{const[n,r]=en(Qt)(t);return N(n,null)}),pn=C(t=>{const[n,r]=en(Xt)(t);return N(n,null)}),xn=C(t=>{const[n,r]=en(Yt)(t);return r.status===Wt?N(n,null):_(n,$t.spaces1)}),hn=C(t=>{const[n,r]=en(tn)(t);return r.status===Wt?N(n,null):_(n,$t.spaces1U)}),yn=C(t=>{const[n,[r,e]]=d(en(nn)(t));return e.status===Wt?n:_(r,$t.newline)}),vn=C(t=>{const[n,[r,e]]=d(en(rn)(t));return e.status===Wt?n:_(r,$t.newlineU)}),{Ok:gn}=M,bn=(t,n)=>C(r=>{if(t<1)return N(r,"");const{index:e,view:u}=r;if(e>=u.byteLength)return _(r);const{width:i,next:f}=function(t,n,r){const e=n.byteLength;let u=0;for(const o of s(r)){const r=t+u;if(r>=e)break;u+=c(r,n)}return t+u>=e&&(u=e-t),{width:u,next:o(t,u,n)}}(e,u,t);return a(f)===t&&n(f)?N(r,f,e+i):_(r)}),wn=t=>C(n=>{const[r,[e,u]]=d(bn(a(t),n=>t===n)(n));return u.status===gn?r:_(e,$t.string(t))}),kn=t=>C(n=>{const[r,[e,u]]=d(bn(a(t),n=>t.toLowerCase()===n.toLowerCase())(n));return u.status===gn?r:_(e,$t.stringI(t))}),mn=C(t=>{const{index:n,view:r}=t,e=r.byteLength-n;return N(t,o(n,e,r),n+e)}),$n=t=>C(n=>{const[r,[e,u]]=d(bn(t,()=>!0)(n));return u.status===gn?r:_(e,$t.anyString(t))}),{Ok:Un,Fail:On,Fatal:Ln}=M,Bn=(...t)=>{const n=t,r="string"==typeof t[t.length-1]?n.pop():null;return C(t=>{const e=null!=r;let u=e?g(r):[];for(const r of n){const[n,[s,o]]=d(r(t));if(o.status===Un)return n;if(e||(u=U(u,o.errors)),o.status===Ln)return P(s,u)}return _(t,u)})},En=(t,n)=>C(r=>{const e=null!=n,[u,[s,o]]=d(t(r));if(o.status===Un)return u;const i=e?g(n):o.errors;if(o.status===Ln)return P(s,i);const a=N(s,null);return a[1].errors=i,a}),Fn=(t,n,r)=>C(e=>{const u=null!=r,[s,[o,i]]=d(t(e));return i.status===Un?s:i.status===On?N(o,n):P(o,u?g(r):i.errors)}),An=(t,n)=>C(r=>{const e=null!=n,u=r.index,[s,o]=t(r);return o.status===Un?N(s,o.value,u):o.status===On?_(s,e?g(n):o.errors,u):_(s,e?$(n,s,o.errors):m(s,o.errors),u)}),jn=(t,n)=>C(r=>{const e=null!=n,u=r.index,[s,o]=t(r);if(o.status===Un&&s.index===u)return N(s,null);const i=e?g(n):o.errors;return o.status===Ln?P(s,i):_(s,i)}),Sn=(t,n)=>C(r=>{const e=null!=n,u=r.index,s=e?g(n):void 0,[o,i]=t(r);return i.status===Un?_(o,s,u):N(o,null,u)}),{Ok:Tn,Fail:Mn,Fatal:In}=M;function Cn(t,n,r){return[{...t},{...n,errors:r}]}const Nn=(t,n)=>C(r=>{const[e,[u,s]]=d(t(r));return s.status===Mn?Cn(u,s,g(n)):e}),_n=t=>C(n=>{const r=n.index,[e,[u,s]]=d(t(n));if(s.status===Tn)return e;return _(u,r===u.index?s.errors:m(u,s.errors),r)}),Pn=(t,n)=>C(r=>{const[e,[u,s]]=d(t(r));if(s.status===Tn)return e;if(s.status===Mn){if(1===s.errors.length&&s.errors[0].type===v.Nested){const{ctx:t,errors:r}=s.errors[0];return Cn(u,s,$(n,t,r))}return Cn(u,s,g(n))}return _(r,$(n,u,s.errors))}),zn=(...t)=>C(n=>{const r=[],e=n.index;let u=n,s=[];for(const n of t){var o;const[t,[i,a]]=d(n(u));if(u=i,s=(null===(o=a.errors)||void 0===o?void 0:o.length)?U(s,a.errors):[],a.status===In)return t;if(a.status===Mn){return _(u,e===u.index?s:m(u,s),e)}r.push(a.value)}return N(u,r)}),Dn=(t,n)=>C(r=>{const e=r.index,[u,[s,o]]=d(t(r));if(o.status!==Tn)return u;const i=n(o.value),[a,[c,f]]=d(i(s));if(f.status===Tn)return a;const l=U(o.errors,f.errors);if(f.status===In)return P(c,l);return _(c,e===c.index?l:m(c,l),e)}),Rn=(t,n)=>C(r=>{const e=r.index,[u,[s,o]]=d(t(r));if(o.status!==Tn)return u;const[i,a]=n(s),c=U(o.errors,a.errors);if(a.status===In)return P(i,c);if(a.status===Mn){return _(i,e===i.index?c:m(i,c),e)}return N(i,(0,a.value)(o.value))}),Vn=(t,n)=>C(r=>{const e=r.index,[u,[s,o]]=d(t(r));if(o.status!==Tn)return u;const[i,a]=n(s);if(a.status===Tn)return N(i,o.value);const c=U(o.errors,a.errors);if(a.status===In)return P(i,c);return _(i,e===i.index?c:m(i,c),e)}),Wn=(t,n)=>C(r=>{const e=r.index,[u,[s,o]]=d(t(r));if(o.status!==Tn)return u;const[i,[a,c]]=d(n(s));if(c.status===Tn)return i;const f=U(o.errors,c.errors);if(c.status===In)return P(a,f);return _(a,e===a.index?f:m(a,f),e)}),Gn=(t,n)=>C(r=>{const e=r.index,[u,[s,o]]=d(t(r));if(o.status!==Tn)return u;const[i,a]=n(s);if(a.status===Tn)return N(i,[o.value,a.value]);const c=U(o.errors,a.errors);if(a.status===In)return P(i,c);return _(i,e===i.index?c:m(i,c),e)}),Zn=(t,n)=>C(r=>{const e=r.index,u=[];let o=r;for(const r of s(n)){const[n,[r,s]]=d(t(o));if(o=r,s.status===In)return n;if(s.status===Mn){return _(o,e===o.index?s.errors:m(o,s.errors),e)}u.push(s.value)}return N(o,u)}),qn=(t,n)=>C(r=>{const e=r.index,u=[];let s=r;for(;;){const[r,[o,i]]=d(n(s));if(s=o,i.status===In)return r;if(i.status===Tn)break;const[a,[c,f]]=d(t(s));if(s=c,f.status===In)return a;if(f.status===Mn){return _(c,e===c.index?U(f.errors,i.errors):m(c,U(f.errors,i.errors)),e)}u.push(f.value)}return N(s,u)}),Jn=t=>C(n=>{const r=t(),e=n.index;let u,s=[],o=n;for(;;){var i;const{value:t,done:n}=r.next(u);if(n)return N(o,t);const[a,c]=t(o);if(o=a,s=(null===(i=c.errors)||void 0===i?void 0:i.length)?U(s,c.errors):[],c.status===In)return P(o,s);if(c.status===Mn){return _(o,e===o.index?s:m(o,s),e)}u=c.value}}),Hn=(...t)=>{const n=t.slice(),r=n.pop();return C(t=>{const e=t.index,u=[];let s=t,o=[];for(const t of n){var i;const[n,r]=t(s);if(s=n,o=(null===(i=r.errors)||void 0===i?void 0:i.length)?U(o,r.errors):[],r.status===In)return P(s,o);if(r.status===Mn){return _(s,e===s.index?o:m(s,o),e)}u.push(r.value)}return N(s,r(...u))})},Kn=(t,n,r)=>C(e=>{var u;const s=e.index,[o,[i,a]]=d(t(e));if(a.status!==Tn)return o;const[c,f]=r(i);let l=(null===(u=f.errors)||void 0===u?void 0:u.length)?U(a.errors,f.errors):[];if(f.status===In)return P(c,l);if(f.status===Mn){return _(c,s===c.index?l:m(c,l),s)}const[p,x]=n(c);if(x.status===In)return P(p,U(l,x.errors));if(x.status===Mn){l=U(l,x.errors);return _(p,s===p.index?l:m(p,l),s)}return N(p,f.value)}),{Ok:Qn}=M,Xn=t=>C(n=>{const[r,[e,u]]=d(t(n));if(u.status!==Qn)return r;return N(e,u.value.join(""))}),Yn=t=>C(n=>{const[r,[e,u]]=d(t(n));if(u.status!==Qn)return r;return N(e,u.value.filter(t=>null!=t))}),tr=(t,n)=>C(r=>{const[e,[u,s]]=d(t(r));return s.status===Qn?N(u,n):e}),nr=(t,n)=>C(r=>{const[e,[u,s]]=d(t(r));if(s.status!==Qn)return e;return N(u,s.value[n])}),rr=t=>C(n=>{const[r,[e,u]]=d(t(n));if(u.status!==Qn)return r;return N(e,u.value[0])}),er=t=>C(n=>{const[r,[e,u]]=d(t(n));if(u.status!==Qn)return r;return N(e,u.value[1])}),ur=t=>C(n=>{const[r,[e,u]]=d(t(n));if(u.status!==Qn)return r;return N(e,u.value[2])}),sr=t=>C(n=>{const[r,[e,u]]=d(t(n));if(u.status!==Qn)return r;return N(e,u.value[3])}),or=t=>C(n=>{const[r,[e,u]]=d(t(n));if(u.status!==Qn)return r;return N(e,u.value[4])}),{Ok:ir,Fail:ar,Fatal:cr}=M,fr=t=>C(n=>N(n,t)),lr=(t,n)=>C(r=>{const[e,[u,s]]=d(t(r));return s.status===ir?N(u,n(s.value)):e}),dr=(t,n)=>C(r=>{const e=r.index,[u,[s,o]]=d(t(r));if(o.status!==ir)return u;const[i,a]=n(s);if(a.status!==ir)return z(i.index!==e,i,U(o.errors,a.errors));return N(i,(0,a.value)(o.value))}),pr=(t,n)=>C(r=>{const e=r.index,[u,[s,o]]=d(t(r));if(o.status!==ir)return u;const i=n(o.value),[a,[c,f]]=d(i(s));return f.status===ir?a:z(c.index!==e,c,U(o.errors,f.errors))}),xr=(t,n)=>C(r=>{const[e,[u,s]]=d(t(r));if(s.status!==ar)return e;const[o,[i,a]]=d(n(u));return a.status===ir?o:z(a.status===cr,i,U(s.errors,a.errors))}),hr=(t,n)=>C(r=>{const e=r.index,[u,[s,o]]=d(t(r));if(o.status!==ir)return u;const[i,a]=n(s);return a.status===ir?N(i,[o.value,a.value]):z(i.index!==e,i,U(o.errors,a.errors))}),{Ok:yr,Fail:vr,Fatal:gr}=M;function br(t){return`[${t}]: infinite loop detected; neither content nor separator parser consumed input`}const wr=(...t)=>{const n=t,r="string"==typeof t[t.length-1]?n.pop():null;return C(t=>{const e=null!=r,u=[],s=t.index;let o=e?g(r):[],i=t;for(const t of n){var a;const[n,r]=t(i);if(i=n,e||(o=(null===(a=r.errors)||void 0===a?void 0:a.length)?U(o,r.errors):[]),r.status!==yr)return z(i.index!==s,i,o);u.push(r.value)}return N(i,u)})},kr=(t,n,r)=>C(e=>{const u=null!=r,s=e.index,[o,i]=t(e);if(i.status!==M.Ok){const t=u?g(r):i.errors;return z(i.status===gr,o,t)}const[a,c]=n(o),f=u?g(r):U(i.errors,c.errors);return c.status===yr?N(a,i.value):z(a.index!==s,a,f)}),mr=(t,n,r)=>C(e=>{const u=null!=r,s=e.index,[o,i]=t(e);if(i.status!==M.Ok){const t=u?g(r):i.errors;return z(i.status===gr,o,t)}const[a,[c,f]]=d(n(o)),l=u?g(r):U(i.errors,f.errors);return f.status===yr?a:z(c.index!==s,c,l)}),$r=(t,n)=>C(r=>{const e=null!=n,u=t(),s=r.index;let o,i=e?g(n):[],a=r;for(;;){var c;const{value:t,done:n}=u.next(o);if(n)return N(a,t);const[r,f]=t(a);if(a=r,e||(i=(null===(c=f.errors)||void 0===c?void 0:c.length)?U(i,f.errors):[]),f.status!==yr)return z(a.index!==s,a,i);o=f.value}}),Ur=(t,n)=>C(r=>{const e=null!=n,u=[];let s=r;for(;;){const[r,o]=t(s);if(s=r,o.status===gr)return P(r,e?g(n):o.errors);if(o.status===vr)break;if(u.push(o.value),s.index>=s.view.byteLength)break}return N(s,u)}),Or=(t,n)=>C(r=>{const e=null!=n,[u,s]=t(r);if(s.status!==yr)return z(s.status===gr,u,e?g(n):s.errors);let o=u;const i=[s.value];for(;;){const[r,u]=t(o);if(o=r,u.status===gr)return P(r,e?g(n):u.errors);if(u.status===vr)break;if(i.push(u.value),o.index>=o.view.byteLength)break}return N(o,i)}),Lr=(t,n)=>C(r=>{const e=null!=n,[u,s]=t(r);return s.status===yr?N(u,null):z(s.status===gr,u,e?g(n):s.errors)}),Br=(t,n)=>C(r=>{const e=null!=n;let u=r;for(;;){const[r,s]=t(u);if(u=r,s.status===gr)return P(r,e?g(n):s.errors);if(s.status===vr)break;if(u.index>=u.view.byteLength)break}return N(u,null)}),Er=(t,n)=>C(r=>{const e=null!=n,[u,s]=t(r);if(s.status!==yr)return z(s.status===gr,u,e?g(n):s.errors);let o=u;for(;;){const[r,u]=t(o);if(o=r,u.status===gr)return P(r,e?g(n):u.errors);if(u.status===vr)break;if(o.index>=o.view.byteLength)break}return N(o,null)}),Fr=(t,n)=>C(r=>{let e=r.index;const[u,[s,o]]=d(t(r));if(o.status===gr)return u;if(o.status===vr)return N(s,[]);const i=[o.value];let a=s;for(;;){e=a.index;const[r,[u,s]]=d(n(a));if(a=u,s.status===gr)return r;if(s.status===vr)break;const[o,[c,f]]=d(t(a));if(a=c,f.status===gr)return o;if(f.status===vr)break;if(a.index===e)throw new TypeError(br("sepBy"));i.push(f.value)}return N(a,i,e)}),Ar=(t,n)=>C(r=>{let e=r.index;const[u,[s,o]]=d(t(r));if(o.status!==yr)return u;const i=[o.value];let a=s;for(;;){e=a.index;const[r,[u,s]]=d(n(a));if(a=u,s.status===gr)return r;if(s.status===vr)break;const[o,[c,f]]=d(t(a));if(a=c,f.status===gr)return o;if(f.status===vr)break;if(a.index===e)throw new TypeError(br("sepBy1"));i.push(f.value)}return N(a,i,e)}),jr=(t,n)=>C(r=>{let e=r.index;const[u,[s,o]]=d(t(r));if(o.status===gr)return u;if(o.status===vr)return N(s,[]);const i=[o.value];let a=s;for(;;){e=a.index;const[r,[u,s]]=d(n(a));if(a=u,s.status===gr)return r;if(s.status===vr)break;const[o,[c,f]]=d(t(a));if(a=c,f.status===gr)return o;if(f.status===vr)break;if(a.index===e)throw new TypeError(br("sepEndBy"));i.push(f.value)}const[c,[f,l]]=d(n({...a,index:e}));return l.status===gr?c:N(f,i)}),Sr=(t,n)=>C(r=>{let e=r.index;const[u,[s,o]]=d(t(r));if(o.status!==yr)return u;const i=[o.value];let a=s;for(;;){e=a.index;const[r,[u,s]]=d(n(a));if(a=u,s.status===gr)return r;if(s.status===vr)break;const[o,[c,f]]=d(t(a));if(a=c,f.status===gr)return o;if(f.status===vr)break;if(a.index===e)throw new TypeError(br("sepEndBy1"));i.push(f.value)}const[c,[f,l]]=d(n({...a,index:e}));return l.status===gr?c:N(f,i)}),Tr=(t,n)=>C(r=>{const e=r.index,u=[];let o=r;for(const r of s(n)){const[n,r]=t(o);if(o=n,r.status!==yr)return z(o.index!==e,o,r.errors);u.push(r.value)}return N(o,u)}),Mr=(t,n,r)=>C(e=>{var u;const s=e.index,[o,[i,a]]=d(t(e));if(a.status!==yr)return o;const[c,f]=r(i),l=(null===(u=f.errors)||void 0===u?void 0:u.length)?U(a.errors,f.errors):[];if(f.status!==yr)return z(c.index!==s,c,l);const[p,x]=n(c);return x.status===yr?N(p,f.value):z(p.index!==s,p,U(l,x.errors))}),Ir=(t,n)=>C(r=>{const e=r.index,u=[];let s=r;for(;;){const[r,[o,i]]=d(n(s));if(s=o,i.status===gr)return r;if(i.status===yr)break;const[a,[c,f]]=d(t(s));if(s=c,f.status===gr)return a;if(f.status===vr)return z(s.index!==e,s,U(f.errors,i.errors));u.push(f.value)}return N(s,u)}),Cr=(...t)=>{const n=t.slice(),r=n.pop();return C(t=>{const e=t.index,u=[];let s=t,o=[];for(const t of n){var i;const[n,r]=t(s);if(s=n,o=(null===(i=r.errors)||void 0===i?void 0:i.length)?U(o,r.errors):[],r.status!==yr)return z(s.index!==e,s,o);u.push(r.value)}return N(s,r(...u))})};const Nr=(t,n,r)=>C(e=>{const[u,[o,i]]=d(t(e));if(i.status===gr)return u;if(i.status===vr)return N(o,r);const a=[i.value],c=[];let f=o,l=f.index;for(;;){const[r,[e,u]]=d(n(f));if(f=e,u.status===gr)return r;if(u.status===vr)break;const[s,[o,i]]=d(t(f));if(f=o,i.status===gr)return s;if(i.status===vr)break;c.push(u.value),a.push(i.value),l=f.index}let p=a[0];for(const t of s(c.length))p=c[t](p,a[t+1]);return N(f,p,l)}),_r=(t,n)=>C(r=>{const[e,[u,o]]=d(t(r));if(o.status!==yr)return e;const i=[o.value],a=[];let c=u,f=c.index;for(;;){const[r,[e,u]]=d(n(c));if(c=e,u.status===gr)return r;if(u.status===vr)break;const[s,[o,l]]=d(t(c));if(c=o,l.status===gr)return s;if(l.status===vr)break;a.push(u.value),i.push(l.value),f=c.index}let l=i[0];for(const t of s(a.length))l=a[t](l,i[t+1]);return N(c,l,f)}),Pr=(t,n,r)=>C(e=>{const[u,[o,i]]=d(t(e));if(i.status===gr)return u;if(i.status===vr)return N(o,r);const a=[i.value],c=[];let f=o,l=f.index;for(;;){const[r,[e,u]]=d(n(f));if(f=e,u.status===gr)return r;if(u.status===vr)break;const[s,[o,i]]=d(t(f));if(f=o,i.status===gr)return s;if(i.status===vr)break;c.push(u.value),a.push(i.value),l=f.index}let p=a[a.length-1];for(const t of s(c.length-1,-1))p=c[t](a[t],p);return N(f,p,l)}),zr=(t,n)=>C(r=>{const[e,[u,o]]=d(t(r));if(o.status!==yr)return e;const i=[o.value],a=[];let c=u,f=c.index;for(;;){const[r,[e,u]]=d(n(c));if(c=e,u.status===gr)return r;if(u.status===vr)break;const[s,[o,l]]=d(t(c));if(c=o,l.status===gr)return s;if(l.status===vr)break;a.push(u.value),i.push(l.value),f=c.index}let l=i[i.length-1];for(const t of s(a.length-1,-1))l=a[t](i[t],l);return N(c,l,f)})}])}));