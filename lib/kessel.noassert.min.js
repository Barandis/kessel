/*!
 * Copyright (c) 2020 Thomas Otterson
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy of
 * this software and associated documentation files (the "Software"), to deal in
 * the Software without restriction, including without limitation the rights to
 * use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of
 * the Software, and to permit persons to whom the Software is furnished to do so,
 * subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS
 * FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR
 * COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER
 * IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN
 * CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * 
 */
!function(t,r){"object"==typeof exports&&"object"==typeof module?module.exports=r():"function"==typeof define&&define.amd?define([],r):"object"==typeof exports?exports.kessel=r():t.kessel=r()}(this,(function(){return function(t){var r={};function n(e){if(r[e])return r[e].exports;var u=r[e]={i:e,l:!1,exports:{}};return t[e].call(u.exports,u,u.exports,n),u.l=!0,u.exports}return n.m=t,n.c=r,n.d=function(t,r,e){n.o(t,r)||Object.defineProperty(t,r,{enumerable:!0,get:e})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,r){if(1&r&&(t=n(t)),8&r)return t;if(4&r&&"object"==typeof t&&t&&t.__esModule)return t;var e=Object.create(null);if(n.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:t}),2&r&&"string"!=typeof t)for(var u in t)n.d(e,u,function(r){return t[r]}.bind(null,u));return e},n.n=function(t){var r=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(r,"a",r),r},n.o=function(t,r){return Object.prototype.hasOwnProperty.call(t,r)},n.p="",n(n.s=0)}([function(t,r,n){"use strict";n.r(r),n.d(r,"alpha",(function(){return Pt})),n.d(r,"any",(function(){return St})),n.d(r,"anyOf",(function(){return Mt})),n.d(r,"char",(function(){return Lt})),n.d(r,"charI",(function(){return Ft})),n.d(r,"digit",(function(){return It})),n.d(r,"eof",(function(){return Bt})),n.d(r,"hex",(function(){return Ct})),n.d(r,"letter",(function(){return _t})),n.d(r,"lower",(function(){return Dt})),n.d(r,"noneOf",(function(){return Tt})),n.d(r,"octal",(function(){return Nt})),n.d(r,"range",(function(){return jt})),n.d(r,"satisfy",(function(){return Et})),n.d(r,"satisfyM",(function(){return At})),n.d(r,"upper",(function(){return zt})),n.d(r,"failNormally",(function(){return Rt})),n.d(r,"failFatally",(function(){return Vt})),n.d(r,"alphaU",(function(){return or})),n.d(r,"letterU",(function(){return sr})),n.d(r,"lowerU",(function(){return ar})),n.d(r,"newline",(function(){return hr})),n.d(r,"newlineU",(function(){return vr})),n.d(r,"regex",(function(){return ur})),n.d(r,"space",(function(){return cr})),n.d(r,"spaceU",(function(){return fr})),n.d(r,"spaces",(function(){return lr})),n.d(r,"spaces1",(function(){return pr})),n.d(r,"spaces1U",(function(){return xr})),n.d(r,"spacesU",(function(){return dr})),n.d(r,"upperU",(function(){return ir})),n.d(r,"all",(function(){return kr})),n.d(r,"anyString",(function(){return mr})),n.d(r,"string",(function(){return br})),n.d(r,"stringI",(function(){return wr})),n.d(r,"alt",(function(){return Lr})),n.d(r,"def",(function(){return Er})),n.d(r,"empty",(function(){return jr})),n.d(r,"not",(function(){return Sr})),n.d(r,"opt",(function(){return Fr})),n.d(r,"peek",(function(){return Ar})),n.d(r,"andThenB",(function(){return Wr})),n.d(r,"applyB",(function(){return Dr})),n.d(r,"attempt",(function(){return Nr})),n.d(r,"attemptM",(function(){return _r})),n.d(r,"betweenB",(function(){return Hr})),n.d(r,"blockB",(function(){return qr})),n.d(r,"chainB",(function(){return zr})),n.d(r,"label",(function(){return Cr})),n.d(r,"leftB",(function(){return Rr})),n.d(r,"manyTillB",(function(){return Zr})),n.d(r,"pipeB",(function(){return Jr})),n.d(r,"repeatB",(function(){return Gr})),n.d(r,"rightB",(function(){return Vr})),n.d(r,"sequenceB",(function(){return Pr})),n.d(r,"compact",(function(){return Xr})),n.d(r,"fifth",(function(){return sn})),n.d(r,"first",(function(){return rn})),n.d(r,"fourth",(function(){return un})),n.d(r,"join",(function(){return Qr})),n.d(r,"nth",(function(){return tn})),n.d(r,"second",(function(){return nn})),n.d(r,"third",(function(){return en})),n.d(r,"value",(function(){return Yr})),n.d(r,"always",(function(){return fn})),n.d(r,"andThen",(function(){return hn})),n.d(r,"apply",(function(){return dn})),n.d(r,"chain",(function(){return pn})),n.d(r,"map",(function(){return ln})),n.d(r,"orElse",(function(){return xn})),n.d(r,"assoc1L",(function(){return _n})),n.d(r,"assoc1R",(function(){return zn})),n.d(r,"assocL",(function(){return Nn})),n.d(r,"assocR",(function(){return Pn})),n.d(r,"between",(function(){return Tn})),n.d(r,"block",(function(){return $n})),n.d(r,"end",(function(){return Sn})),n.d(r,"left",(function(){return kn})),n.d(r,"many",(function(){return Un})),n.d(r,"many1",(function(){return On})),n.d(r,"pipe",(function(){return Cn})),n.d(r,"repeat",(function(){return Mn})),n.d(r,"right",(function(){return mn})),n.d(r,"sep",(function(){return An})),n.d(r,"sep1",(function(){return jn})),n.d(r,"sepEndBy1",(function(){return Bn})),n.d(r,"seq",(function(){return wn})),n.d(r,"skip",(function(){return Ln})),n.d(r,"skipMany",(function(){return Fn})),n.d(r,"skipMany1",(function(){return En})),n.d(r,"until",(function(){return In})),n.d(r,"Status",(function(){return T})),n.d(r,"fail",(function(){return _})),n.d(r,"failure",(function(){return G})),n.d(r,"fatal",(function(){return P})),n.d(r,"maybeFatal",(function(){return z})),n.d(r,"ok",(function(){return N})),n.d(r,"parse",(function(){return D})),n.d(r,"parser",(function(){return C})),n.d(r,"run",(function(){return Z})),n.d(r,"status",(function(){return R})),n.d(r,"succeeded",(function(){return V})),n.d(r,"success",(function(){return W})),n.d(r,"ErrorType",(function(){return y})),n.d(r,"compound",(function(){return $})),n.d(r,"expected",(function(){return g})),n.d(r,"formatErrors",(function(){return B})),n.d(r,"generic",(function(){return w})),n.d(r,"getPosition",(function(){return M})),n.d(r,"merge",(function(){return U})),n.d(r,"nested",(function(){return m})),n.d(r,"other",(function(){return k})),n.d(r,"unexpected",(function(){return b}));const e=new TextEncoder,u=new TextDecoder;function*s(t,r,n,e){const u="number"==typeof r?t:0,s="number"==typeof r?r:t,o="number"==typeof n?0===n?1:Math.abs(n):1,i="number"==typeof n?!!e:"number"==typeof r?!!n:!!r,a=u<s;let c=u;for(;!(a?i?c>s:c>=s:i?c<s:c<=s);)yield c,c=a?c+o:c-o}function o(t,r,n){const e=Uint8Array.from({length:r},(r,e)=>n.getUint8(t+e));return u.decode(e)}function i(t){return new DataView(e.encode(t).buffer)}function a(t){return[...t].length}function c(t,r){const n=r.getUint8(t);return(128&n)>>7==0?1:(224&n)>>5==6?2:(240&n)>>4==14?3:(240&n)>>4==15?4:1}function f(t,r){const n=c(t,r);return{width:n,next:o(t,n,r)}}function l(t){return`'${t}'`}function d(t){return[t,t]}function p(t){switch(t.length){case 0:return"";case 1:return t[0];case 2:return t.join(" or ");default:{const r=t.slice(),n=r.pop();return`${r.join(", ")}, or ${n}`}}}function x(t){return void 0===t?"undefined":"function"==typeof t?C.created(t)?"parser":"function":"symbol"==typeof t?`Symbol(${t.description})`:JSON.stringify(t)}const h=/\t/gu,v=/(?:\p{Mn}|\p{Cf})/gu,y={Expected:"expected",Unexpected:"unexpected",Generic:"generic",Nested:"nested",Compound:"compound",Other:"other"};function g(t){return[{type:y.Expected,label:t}]}function b(t){return[{type:y.Unexpected,label:t}]}function w(t){return[{type:y.Generic,label:t}]}function k(t){return[{type:y.Other,label:t}]}function m(t,r){return 1===r.length&&r[0].type===y.Nested?r:[{type:y.Nested,ctx:t,errors:r}]}function $(t,r,n){return 1===n.length&&n[0].type===y.Nested?[{type:y.Compound,ctx:n.ctx,errors:n.errors,label:t}]:[{type:y.Compound,ctx:r,errors:n,label:t}]}function U(t=[],r=[]){return[...t,...r]}function O(t,r){const n=r.getUint8(t);if(10===n||11===n||12===n)return{newline:!0,skip:1};if(13===n){if(t<r.byteLength-1){const e=r.getUint8(t+1);if(13===n&&10===e)return{newline:!0,skip:2}}return{newline:!0,skip:1}}if(t<r.byteLength-1){const e=r.getUint8(t+1);if(194===n&&133===e)return{newline:!0,skip:2};if(t<r.byteLength-2){const u=r.getUint8(t+2);if(226===n&&128===e&&(168===u||169===u))return{newline:!0,skip:3}}}return{newline:!1,skip:c(t,r)}}function L(t,r){let n=0,e=1,u=0;for(;u<r.byteLength;){const{newline:s,skip:o}=O(u,r);if(s){if(u+o>t)return{start:n,end:u-1,lineno:e};e++,n=u+o}u+=o}return{start:n,end:r.byteLength-1,lineno:e}}function F(t,r,n){let e=0,u=n;for(;u<t&&u<r.byteLength;)u+=c(u,r),e++;return e}function E(t,r,n){const e=[];let u=h.exec(r);for(;null!==u;)e.push(u.index),u=h.exec(r);let s=0,o=0,i=r;for(const r of e){const e=r+s,u=n-e%n;e<t+o&&(o+=u-1),s+=u-1,i=i.substring(0,e)+" ".repeat(u)+i.substring(e+1)}return{line:i,colIndex:o+t}}function A(t,r){let n=t;const e=[];let u=v.exec(r);for(;null!==u;)e.push(u.index),u.index<n&&n--,u=v.exec(r);return{colno:n+1,length:a(r)-e.length}}function j(t,r,n,e){const u=" ".repeat(e);return t.map(t=>{const{index:s,view:o}=t.ctx;return(t.label?`\n${u}${t.label} could not be parsed because:\n\n`:`\n${u}The parser backtracked after:\n\n`)+S(t.errors,s,o,r,n,e+2)}).join("")}function S(t,r,n,e=8,u=72,s=0){const{start:i,end:a,lineno:c}=L(r,n),f=F(r,n,i),l=" ".repeat(s),d=o(i,a-i+1,n),{colIndex:x,line:h}=E(f,d,e),{colno:v,length:g}=A(x,h),b=`${l}Parse error at (line ${c}, column ${v}):`,w=function(t,r,n,e,u=0){const s=" ".repeat(u);if(n<=e&&r<=e)return`${s}${t}\n${s}${" ".repeat(n-1)}^`;if(n<=e-3)return`${s}${t.substring(0,e-3)}...\n${s}${" ".repeat(n-1)}^`;if(n>=r-e+3){const u=r-e+3,o=n-(r-e);return`${s}...${t.substring(u)}\n${s}${" ".repeat(o-1)}^`}const o=n-1-Math.ceil(e/2)+3,i=n-1+Math.floor(e/2)-3;return`${s}...${t.substring(o,i)}...\n${s}${" ".repeat(Math.ceil(e/2))}^`}(h,g,v,u,s),k=t.find(t=>t.type===y.Generic),m=t.find(t=>t.type===y.Unexpected),$=p(t.filter(t=>t.type===y.Expected).map(t=>t.label)),U=t.filter(t=>t.type===y.Nested),O=t.filter(t=>t.type===y.Compound),S=m?`${l}Unexpected ${m.label}\n`:"",B=$.length?`${l}Expected ${$}\n`:"",M=k?`${l}${k.label}\n`:"",T=j(U,e,u,s),I=j(O,e,u,s);return function(t,r){let n=t;for(;"\n"===n[n.length-1];)n=n.substring(0,n.length-1);return n+"\n".repeat(r)}(`${b}\n\n${w}\n${S}${B}${M}${0===t.length?l+"Unknown error(s)\n":""}${r>=n.byteLength?l+"Note: failure occurred at the end of input\n":""}${I}${T}`,2)}function B(t,r,n,e=S){const[u,s]=t,{index:o,view:i}=u;return e(s.errors,o,i,r,n)}function M(t,r=8){const{index:n,view:e}=t,{start:u,end:s,lineno:i}=L(n,e),a=F(n,e,u),c=o(u,s-u+1,e),{colIndex:f,line:l}=E(a,c,r),{colno:d,_:p}=A(f,l);return{line:i,column:d}}const T={Ok:"ok",Fail:"fail",Fatal:"fatal"};function I(t){const r="Parser input must be a string, a typed array, an array buffer, or a data view; parser input was "+typeof t;return{view:(t=>{if("string"==typeof t)return i(t);if((n=t)instanceof Uint8Array||n instanceof Uint8ClampedArray||n instanceof Uint16Array||n instanceof Uint32Array||n instanceof Int8Array||n instanceof Int16Array||n instanceof Int32Array||n instanceof Float32Array||n instanceof Float64Array)return new DataView(t.buffer);var n;if(t instanceof ArrayBuffer)return new DataView(t);if(t instanceof DataView)return t;throw new Error(r)})(t),index:0}}const C=function(t,r="created"){const n=new WeakSet;return Object.defineProperty((...r)=>{const e=t(...r);return n.add(e),e},r,{value:n.has.bind(n)})}(t=>t);function N(t,r=null,n=t.index){return[{...t,index:n},{status:T.Ok,value:r}]}function _(t,r=[],n=t.index){return[{...t,index:n},{status:T.Fail,errors:r}]}function P(t,r=[],n=t.index){return[{...t,index:n},{status:T.Fatal,errors:r}]}function z(t,r,n=[],e=r.index){return[{...r,index:e},{status:t?T.Fatal:T.Fail,errors:n}]}function D(t,r){return t(I(r))}function R(t){return t[1].status}function V(t){return t[1].status===T.Ok}function W(t){return V(t)?t[1].value:null}function G(t){return V(t)?null:B(t)}function Z(t,r){const[n,[e,u]]=d(t(I(r)));if(u.status===T.Ok)return u.value;throw new Error(B(n))}const q=t=>r=>`expected ${t}; found ${x(r)}`;q("a one-character string"),q("a function"),q("a generator function"),q("a string"),q("an array"),q("a string or an array of characters"),q("a string or a regular expression"),q("a number"),q("a parser");const J="a Unicode alphanumeric character",H="any character",K=t=>"any of "+p(t.map(t=>`'${t}'`)),Q=t=>`a string of ${t} characters`,X=t=>l(t),Y=t=>l(t),tt="a digit",rt="end of input",nt="a hexadecimal digit",et="a letter",ut="a Unicode letter",st="a lowercase letter",ot="a Unicode lowercase letter",it="a newline",at="a Unicode newline",ct=t=>"none of "+p(t.map(t=>`'${t}'`)),ft="an octal digit",lt=(t,r)=>`a character between '${t}' and '${r}'`,dt=t=>"a string matching "+t,pt="a whitespace character",xt="zero or more whitespace characters",ht="one or more whitespace characters",vt="zero or more Unicode whitespace characters",yt="one or more Unicode whitespace characters",gt="a Unicode whitespace character",bt=t=>l(t),wt=t=>l(t),kt="an uppercase letter",mt="a Unicode uppercase letter",$t={alpha:g("an alphanumeric character"),alphaU:g(J),any:g(H),anyOf:t=>g(K(t)),anyString:t=>g(Q(t)),char:t=>g(X(t)),charI:t=>g(Y(t)),digit:g(tt),eof:g(rt),hex:g(nt),letter:g(et),letterU:g(ut),lower:g(st),lowerU:g(ot),newline:g(it),newlineU:g(at),noneOf:t=>g(ct(t)),octal:g(ft),range:(t,r)=>g(lt(t,r)),regex:t=>g(dt(t)),space:g(pt),spaces:g(xt),spaces1:g(ht),spacesU:g(vt),spaces1U:g(yt),spaceU:g(gt),string:t=>g(bt(t)),stringI:t=>g(wt(t)),upper:g(kt),upperU:g(mt)},{Ok:Ut}=T,Ot=t=>C(r=>{const{index:n,view:e}=r;if(n>=e.byteLength)return _(r);const{width:u,next:s}=f(n,e);return t(s)?N(r,s,n+u):_(r)}),Lt=t=>C(r=>{const[n,[e,u]]=d(Ot(r=>t===r)(r));return u.status===Ut?n:_(e,$t.char(t))}),Ft=t=>C(r=>{const[n,[e,u]]=d(Ot(r=>t.toLowerCase()===r.toLowerCase())(r));return u.status===Ut?n:_(e,$t.charI(t))}),Et=t=>C(r=>Ot(t)(r)),At=(t,r)=>C(n=>{const[e,[u,s]]=d(Ot(t)(n));return s.status===Ut?e:_(u,g(r))}),jt=(t,r)=>C(n=>{const[e,[u,s]]=d(Ot(n=>n>=t&&n<=r)(n));return s.status===Ut?e:_(u,$t.range(t,r))}),St=C(t=>{const{index:r,view:n}=t;if(r>=n.byteLength)return _(t,$t.any);const{width:e,next:u}=f(r,n);return N(t,u,r+e)}),Bt=C(t=>{const{index:r,view:n}=t;return r>=n.byteLength?N(t,null):_(t,$t.eof)}),Mt=t=>C(r=>{const{index:n,view:e}=r,{width:u,next:s}=f(n,e),o=[...t];return o.includes(s)?N(r,s,n+u):_(r,$t.anyOf(o))}),Tt=t=>C(r=>{const{index:n,view:e}=r,{width:u,next:s}=f(n,e),o=[...t];return o.includes(s)?_(r,$t.noneOf(o)):N(r,s,n+u)}),It=C(t=>{const[r,[n,e]]=d(Ot(t=>t>="0"&&t<="9")(t));return e.status===Ut?r:_(n,$t.digit)}),Ct=C(t=>{const[r,[n,e]]=d(Ot(t=>t>="0"&&t<="9"||t>="a"&&t<="f"||t>="A"&&t<="F")(t));return e.status===Ut?r:_(n,$t.hex)}),Nt=C(t=>{const[r,[n,e]]=d(Ot(t=>t>="0"&&t<="7")(t));return e.status===Ut?r:_(n,$t.octal)}),_t=C(t=>{const[r,[n,e]]=d(Ot(t=>t>="a"&&t<="z"||t>="A"&&t<="Z")(t));return e.status===Ut?r:_(n,$t.letter)}),Pt=C(t=>{const[r,[n,e]]=d(Ot(t=>t>="a"&&t<="z"||t>="A"&&t<="Z"||t>="0"&&t<="9")(t));return e.status===Ut?r:_(n,$t.alpha)}),zt=C(t=>{const[r,[n,e]]=d(Ot(t=>t>="A"&&t<="Z")(t));return e.status===Ut?r:_(n,$t.upper)}),Dt=C(t=>{const[r,[n,e]]=d(Ot(t=>t>="a"&&t<="z")(t));return e.status===Ut?r:_(n,$t.lower)}),Rt=t=>C(r=>_(r,w(t))),Vt=t=>C(r=>P(r,w(t))),{Ok:Wt}=T,Gt=/^\p{Alphabetic}/u,Zt=/^(?:\p{Alphabetic}|\p{N})/u,qt=/^(?:\p{Uppercase}|\p{Lt})/u,Jt=/^\p{Lowercase}/u,Ht=/^(?:\r\n|[\r\n\t ])/,Kt=/^(?:\r\n|\p{White_Space})/u,Qt=/^[\r\n\t ]*/,Xt=/^\p{White_Space}*/u,Yt=/^[\r\n\t ]+/,tr=/^\p{White_Space}+/u,rr=/^(?:\r\n|\r|\n)/,nr=/^(?:\r\n|[\r\n\u0085\u2028\u2029])/u,er=t=>C(r=>{const{index:n,view:e}=r,u=o(n,e.byteLength-n,e).match(t);return u?N(r,u[0],n+i(u[0]).byteLength):_(r)}),ur=t=>C(r=>{let n="string"==typeof t?new RegExp(t):t;const{source:e,flags:u}=n;if("^"!==e[0]){n=new RegExp("^"+e,u)}const[s,[o,i]]=d(er(n)(r));return i.status===Wt?s:_(o,$t.regex(n))}),sr=C(t=>{const[r,[n,e]]=d(er(Gt)(t));return e.status===Wt?r:_(n,$t.letterU)}),or=C(t=>{const[r,[n,e]]=d(er(Zt)(t));return e.status===Wt?r:_(n,$t.alphaU)}),ir=C(t=>{const[r,[n,e]]=d(er(qt)(t));return e.status===Wt?r:_(n,$t.upperU)}),ar=C(t=>{const[r,[n,e]]=d(er(Jt)(t));return e.status===Wt?r:_(n,$t.lowerU)}),cr=C(t=>{const[r,[n,e]]=d(er(Ht)(t));return e.status===Wt?r:_(n,$t.space)}),fr=C(t=>{const[r,[n,e]]=d(er(Kt)(t));return e.status===Wt?r:_(n,$t.spaceU)}),lr=C(t=>{const[r,n]=er(Qt)(t);return N(r,null)}),dr=C(t=>{const[r,n]=er(Xt)(t);return N(r,null)}),pr=C(t=>{const[r,n]=er(Yt)(t);return n.status===Wt?N(r,null):_(r,$t.spaces1)}),xr=C(t=>{const[r,n]=er(tr)(t);return n.status===Wt?N(r,null):_(r,$t.spaces1U)}),hr=C(t=>{const[r,[n,e]]=d(er(rr)(t));return e.status===Wt?r:_(n,$t.newline)}),vr=C(t=>{const[r,[n,e]]=d(er(nr)(t));return e.status===Wt?r:_(n,$t.newlineU)}),{Ok:yr}=T,gr=(t,r)=>C(n=>{if(t<1)return N(n,"");const{index:e,view:u}=n;if(e>=u.byteLength)return _(n);const{width:i,next:f}=function(t,r,n){const e=r.byteLength;let u=0;for(const o of s(n)){const n=t+u;if(n>=e)break;u+=c(n,r)}return t+u>=e&&(u=e-t),{width:u,next:o(t,u,r)}}(e,u,t);return a(f)===t&&r(f)?N(n,f,e+i):_(n)}),br=t=>C(r=>{const[n,[e,u]]=d(gr(a(t),r=>t===r)(r));return u.status===yr?n:_(e,$t.string(t))}),wr=t=>C(r=>{const[n,[e,u]]=d(gr(a(t),r=>t.toLowerCase()===r.toLowerCase())(r));return u.status===yr?n:_(e,$t.stringI(t))}),kr=C(t=>{const{index:r,view:n}=t,e=n.byteLength-r;return N(t,o(r,e,n),r+e)}),mr=t=>C(r=>{const[n,[e,u]]=d(gr(t,()=>!0)(r));return u.status===yr?n:_(e,$t.anyString(t))}),{Ok:$r,Fail:Ur,Fatal:Or}=T,Lr=(...t)=>{const r=t.slice(),n="string"==typeof t[t.length-1]?r.pop():null;return C(t=>{const e=null!=n;let u=e?g(n):[];for(const n of r){const[r,[s,o]]=d(n(t));if(o.status===$r)return r;if(e||(u=U(u,o.errors)),o.status===Or)return P(s,u)}return _(t,u)})},Fr=(t,r)=>C(n=>{const e=null!=r,[u,[s,o]]=d(t(n));if(o.status===$r)return u;const i=e?g(r):o.errors;if(o.status===Or)return P(s,i);const a=N(s,null);return a[1].errors=i,a}),Er=(t,r,n)=>C(e=>{const u=null!=n,[s,[o,i]]=d(t(e));return i.status===$r?s:i.status===Ur?N(o,r):P(o,u?g(n):i.errors)}),Ar=(t,r)=>C(n=>{const e=null!=r,u=n.index,[s,o]=t(n);return o.status===$r?N(s,o.value,u):o.status===Ur?_(s,e?g(r):o.errors,u):_(s,e?$(r,s,o.errors):m(s,o.errors),u)}),jr=(t,r)=>C(n=>{const e=null!=r,u=n.index,[s,o]=t(n);if(o.status===$r&&s.index===u)return N(s,null);const i=e?g(r):o.errors;return o.status===Or?P(s,i):_(s,i)}),Sr=(t,r)=>C(n=>{const e=null!=r,u=n.index,s=e?g(r):void 0,[o,i]=t(n);return i.status===$r?_(o,s,u):N(o,null,u)}),{Ok:Br,Fail:Mr,Fatal:Tr}=T;function Ir(t,r,n){return[{...t},{...r,errors:n}]}const Cr=(t,r)=>C(n=>{const[e,[u,s]]=d(t(n));return s.status===Mr?Ir(u,s,g(r)):e}),Nr=t=>C(r=>{const n=r.index,[e,[u,s]]=d(t(r));if(s.status===Br)return e;return _(u,n===u.index?s.errors:m(u,s.errors),n)}),_r=(t,r)=>C(n=>{const[e,[u,s]]=d(t(n));if(s.status===Br)return e;if(s.status===Mr){if(1===s.errors.length&&s.errors[0].type===y.Nested){const{ctx:t,errors:n}=s.errors[0];return Ir(u,s,$(r,t,n))}return Ir(u,s,g(r))}return _(n,$(r,u,s.errors))}),Pr=(...t)=>C(r=>{const n=[],e=r.index;let u=r,s=[];for(const r of t){var o;const[t,[i,a]]=d(r(u));if(u=i,s=(null===(o=a.errors)||void 0===o?void 0:o.length)?U(s,a.errors):[],a.status===Tr)return t;if(a.status===Mr){return _(u,e===u.index?s:m(u,s),e)}n.push(a.value)}return N(u,n)}),zr=(t,r)=>C(n=>{const e=n.index,[u,[s,o]]=d(t(n));if(o.status!==Br)return u;const i=r(o.value),[a,[c,f]]=d(i(s));if(f.status===Br)return a;const l=U(o.errors,f.errors);if(f.status===Tr)return P(c,l);return _(c,e===c.index?l:m(c,l),e)}),Dr=(t,r)=>C(n=>{const e=n.index,[u,[s,o]]=d(t(n));if(o.status!==Br)return u;const[i,a]=r(s),c=U(o.errors,a.errors);if(a.status===Tr)return P(i,c);if(a.status===Mr){return _(i,e===i.index?c:m(i,c),e)}return N(i,(0,a.value)(o.value))}),Rr=(t,r)=>C(n=>{const e=n.index,[u,[s,o]]=d(t(n));if(o.status!==Br)return u;const[i,a]=r(s);if(a.status===Br)return N(i,o.value);const c=U(o.errors,a.errors);if(a.status===Tr)return P(i,c);return _(i,e===i.index?c:m(i,c),e)}),Vr=(t,r)=>C(n=>{const e=n.index,[u,[s,o]]=d(t(n));if(o.status!==Br)return u;const[i,[a,c]]=d(r(s));if(c.status===Br)return i;const f=U(o.errors,c.errors);if(c.status===Tr)return P(a,f);return _(a,e===a.index?f:m(a,f),e)}),Wr=(t,r)=>C(n=>{const e=n.index,[u,[s,o]]=d(t(n));if(o.status!==Br)return u;const[i,a]=r(s);if(a.status===Br)return N(i,[o.value,a.value]);const c=U(o.errors,a.errors);if(a.status===Tr)return P(i,c);return _(i,e===i.index?c:m(i,c),e)}),Gr=(t,r)=>C(n=>{const e=n.index,u=[];let o=n;for(const n of s(r)){const[r,[n,s]]=d(t(o));if(o=n,s.status===Tr)return r;if(s.status===Mr){return _(o,e===o.index?s.errors:m(o,s.errors),e)}u.push(s.value)}return N(o,u)}),Zr=(t,r)=>C(n=>{const e=n.index,u=[];let s=n;for(;;){const[n,[o,i]]=d(r(s));if(s=o,i.status===Tr)return n;if(i.status===Br)break;const[a,[c,f]]=d(t(s));if(s=c,f.status===Tr)return a;if(f.status===Mr){return _(c,e===c.index?U(f.errors,i.errors):m(c,U(f.errors,i.errors)),e)}u.push(f.value)}return N(s,u)}),qr=t=>C(r=>{const n=t(),e=r.index;let u,s=[],o=r;for(;;){var i;const{value:t,done:r}=n.next(u);if(r)return N(o,t);const[a,c]=t(o);if(o=a,s=(null===(i=c.errors)||void 0===i?void 0:i.length)?U(s,c.errors):[],c.status===Tr)return P(o,s);if(c.status===Mr){return _(o,e===o.index?s:m(o,s),e)}u=c.value}}),Jr=(...t)=>{const r=t.slice(),n=r.pop();return C(t=>{const e=t.index,u=[];let s=t,o=[];for(const t of r){var i;const[r,n]=t(s);if(s=r,o=(null===(i=n.errors)||void 0===i?void 0:i.length)?U(o,n.errors):[],n.status===Tr)return P(s,o);if(n.status===Mr){return _(s,e===s.index?o:m(s,o),e)}u.push(n.value)}return N(s,n(...u))})},Hr=(t,r,n)=>C(e=>{var u;const s=e.index,[o,[i,a]]=d(t(e));if(a.status!==Br)return o;const[c,f]=n(i);let l=(null===(u=f.errors)||void 0===u?void 0:u.length)?U(a.errors,f.errors):[];if(f.status===Tr)return P(c,l);if(f.status===Mr){return _(c,s===c.index?l:m(c,l),s)}const[p,x]=r(c);if(x.status===Tr)return P(p,U(l,x.errors));if(x.status===Mr){l=U(l,x.errors);return _(p,s===p.index?l:m(p,l),s)}return N(p,f.value)}),{Ok:Kr}=T,Qr=t=>C(r=>{const[n,[e,u]]=d(t(r));if(u.status!==Kr)return n;return N(e,u.value.join(""))}),Xr=t=>C(r=>{const[n,[e,u]]=d(t(r));if(u.status!==Kr)return n;return N(e,u.value.filter(t=>null!=t))}),Yr=(t,r)=>C(n=>{const[e,[u,s]]=d(t(n));return s.status===Kr?N(u,r):e}),tn=(t,r)=>C(n=>{const[e,[u,s]]=d(t(n));if(s.status!==Kr)return e;return N(u,s.value[r])}),rn=t=>C(r=>{const[n,[e,u]]=d(t(r));if(u.status!==Kr)return n;return N(e,u.value[0])}),nn=t=>C(r=>{const[n,[e,u]]=d(t(r));if(u.status!==Kr)return n;return N(e,u.value[1])}),en=t=>C(r=>{const[n,[e,u]]=d(t(r));if(u.status!==Kr)return n;return N(e,u.value[2])}),un=t=>C(r=>{const[n,[e,u]]=d(t(r));if(u.status!==Kr)return n;return N(e,u.value[3])}),sn=t=>C(r=>{const[n,[e,u]]=d(t(r));if(u.status!==Kr)return n;return N(e,u.value[4])}),{Ok:on,Fail:an,Fatal:cn}=T,fn=t=>C(r=>N(r,t)),ln=(t,r)=>C(n=>{const[e,[u,s]]=d(t(n));return s.status===on?N(u,r(s.value)):e}),dn=(t,r)=>C(n=>{const e=n.index,[u,[s,o]]=d(t(n));if(o.status!==on)return u;const[i,a]=r(s);if(a.status!==on)return z(i.index!==e,i,U(o.errors,a.errors));return N(i,(0,a.value)(o.value))}),pn=(t,r)=>C(n=>{const e=n.index,[u,[s,o]]=d(t(n));if(o.status!==on)return u;const i=r(o.value),[a,[c,f]]=d(i(s));return f.status===on?a:z(c.index!==e,c,U(o.errors,f.errors))}),xn=(t,r)=>C(n=>{const[e,[u,s]]=d(t(n));if(s.status!==an)return e;const[o,[i,a]]=d(r(u));return a.status===on?o:z(a.status===cn,i,U(s.errors,a.errors))}),hn=(t,r)=>C(n=>{const e=n.index,[u,[s,o]]=d(t(n));if(o.status!==on)return u;const[i,a]=r(s);return a.status===on?N(i,[o.value,a.value]):z(i.index!==e,i,U(o.errors,a.errors))}),{Ok:vn,Fail:yn,Fatal:gn}=T;function bn(t){return`[${t}]: infinite loop detected; neither content nor separator parser consumed input`}const wn=(...t)=>{const r=t.slice(),n="string"==typeof t[t.length-1]?r.pop():null;return C(t=>{const e=null!=n,u=[],s=t.index;let o=e?g(n):[],i=t;for(const t of r){var a;const[r,n]=t(i);if(i=r,e||(o=(null===(a=n.errors)||void 0===a?void 0:a.length)?U(o,n.errors):[]),n.status!==vn)return z(i.index!==s,i,o);u.push(n.value)}return N(i,u)})},kn=(t,r,n)=>C(e=>{const u=null!=n,s=e.index,[o,i]=t(e);if(i.status!==T.Ok){const t=u?g(n):i.errors;return z(i.status===gn,o,t)}const[a,c]=r(o),f=u?g(n):U(i.errors,c.errors);return c.status===vn?N(a,i.value):z(a.index!==s,a,f)}),mn=(t,r,n)=>C(e=>{const u=null!=n,s=e.index,[o,i]=t(e);if(i.status!==T.Ok){const t=u?g(n):i.errors;return z(i.status===gn,o,t)}const[a,[c,f]]=d(r(o)),l=u?g(n):U(i.errors,f.errors);return f.status===vn?a:z(c.index!==s,c,l)}),$n=(t,r)=>C(n=>{const e=null!=r,u=t(),s=n.index;let o,i=e?g(r):[],a=n;for(;;){var c;const{value:t,done:r}=u.next(o);if(r)return N(a,t);const[n,f]=t(a);if(a=n,e||(i=(null===(c=f.errors)||void 0===c?void 0:c.length)?U(i,f.errors):[]),f.status!==vn)return z(a.index!==s,a,i);o=f.value}}),Un=(t,r)=>C(n=>{const e=null!=r,u=[];let s=n;for(;;){const[n,o]=t(s);if(s=n,o.status===gn)return P(n,e?g(r):o.errors);if(o.status===yn)break;if(u.push(o.value),s.index>=s.view.byteLength)break}return N(s,u)}),On=(t,r)=>C(n=>{const e=null!=r,[u,s]=t(n);if(s.status!==vn)return z(s.status===gn,u,e?g(r):s.errors);let o=u;const i=[s.value];for(;;){const[n,u]=t(o);if(o=n,u.status===gn)return P(n,e?g(r):u.errors);if(u.status===yn)break;if(i.push(u.value),o.index>=o.view.byteLength)break}return N(o,i)}),Ln=(t,r)=>C(n=>{const e=null!=r,[u,s]=t(n);return s.status===vn?N(u,null):z(s.status===gn,u,e?g(r):s.errors)}),Fn=(t,r)=>C(n=>{const e=null!=r;let u=n;for(;;){const[n,s]=t(u);if(u=n,s.status===gn)return P(n,e?g(r):s.errors);if(s.status===yn)break;if(u.index>=u.view.byteLength)break}return N(u,null)}),En=(t,r)=>C(n=>{const e=null!=r,[u,s]=t(n);if(s.status!==vn)return z(s.status===gn,u,e?g(r):s.errors);let o=u;for(;;){const[n,u]=t(o);if(o=n,u.status===gn)return P(n,e?g(r):u.errors);if(u.status===yn)break;if(o.index>=o.view.byteLength)break}return N(o,null)}),An=(t,r,n)=>C(e=>{const u=null!=n;let s=e.index;const[o,i]=t(e);if(i.status===gn)return P(o,u?g(n):i.errors);if(i.status===yn)return N(o,[]);const a=[i.value];let c=o;for(;;){s=c.index;const[e,o]=r(c);if(c=e,o.status===gn)return P(e,u?g(n):o.errors);if(o.status===yn)break;const[i,f]=t(c);if(c=i,f.status===gn)return P(i,u?g(n):f.errors);if(f.status===yn)break;if(c.index===s)throw new TypeError(bn("sep"));a.push(f.value)}return N(c,a,s)}),jn=(t,r,n)=>C(e=>{const u=null!=n;let s=e.index;const[o,i]=t(e);if(i.status!==vn)return z(i.status===gn,o,u?g(n):i.errors);const a=[i.value];let c=o;for(;;){s=c.index;const[e,o]=r(c);if(c=e,o.status===gn)return P(e,u?g(n):o.errors);if(o.status===yn)break;const[i,f]=t(c);if(c=i,f.status===gn)return P(i,u?g(n):f.errors);if(f.status===yn)break;if(c.index===s)throw new TypeError(bn("sep1"));a.push(f.value)}return N(c,a,s)}),Sn=(t,r,n)=>C(e=>{const u=null!=n;let s=e.index;const[o,i]=t(e);if(i.status===gn)return P(o,u?g(n):i.errors);if(i.status===yn)return N(o,[]);const a=[i.value];let c=o;for(;;){s=c.index;const[e,o]=r(c);if(c=e,o.status===gn)return P(e,u?g(n):o.errors);if(o.status===yn)break;const[i,f]=t(c);if(c=i,f.status===gn)return P(i,u?g(n):f.errors);if(f.status===yn)break;if(c.index===s)throw new TypeError(bn("end"));a.push(f.value)}const[f,l]=r({...c,index:s});return l.status===gn?P(f,u?g(n):l.errors):N(f,a)}),Bn=(t,r,n)=>C(e=>{const u=null!=n;let s=e.index;const[o,i]=t(e);if(i.status!==vn)return z(i.status===gn,o,u?g(n):i.errors);const a=[i.value];let c=o;for(;;){s=c.index;const[e,o]=r(c);if(c=e,o.status===gn)return P(e,u?g(n):o.errors);if(o.status===yn)break;const[i,f]=t(c);if(c=i,f.status===gn)return P(i,u?g(n):f.errors);if(f.status===yn)break;if(c.index===s)throw new TypeError(bn("sepEndBy1"));a.push(f.value)}const[f,l]=r({...c,index:s});return l.status===gn?P(f,u?g(n):l.errors):N(f,a)}),Mn=(t,r,n)=>C(e=>{const u=null!=n,o=e.index,i=[];let a=e;for(const e of s(r)){const[r,e]=t(a);if(a=r,e.status!==vn)return z(a.index!==o,a,u?g(n):e.errors);i.push(e.value)}return N(a,i)}),Tn=(t,r,n,e)=>C(u=>{var s;const o=null!=e,i=u.index,[a,c]=t(u);if(c.status!==vn)return z(c.status===gn,a,o?g(e):c.errors);const[f,l]=n(a),d=o?g(e):(null===(s=l.errors)||void 0===s?void 0:s.length)?U(c.errors,l.errors):[];if(l.status!==vn)return z(f.index!==i,f,d);const[p,x]=r(f);return x.status===vn?N(p,l.value):z(p.index!==i,p,o?d:U(d,x.errors))}),In=(t,r,n)=>C(e=>{const u=null!=n,s=e.index,o=[];let i=e;for(;;){const[e,a]=r(i);if(i=e,a.status===gn)return P(e,u?g(n):a.errors);if(a.status===vn)break;const[c,f]=t(i);if(i=c,f.status===gn)return P(c,u?g(n):f.errors);if(f.status===yn)return z(i.index!==s,i,u?g(n):U(f.errors,a.errors));o.push(f.value)}return N(i,o)}),Cn=(...t)=>{const r=t.slice(),n="string"==typeof t[t.length-1]?r.pop():null,e=r.pop();return C(t=>{const u=null!=n,s=t.index,o=[];let i=t,a=u?g(n):[];for(const t of r){var c;const[r,n]=t(i);if(i=r,u||(a=(null===(c=n.errors)||void 0===c?void 0:c.length)?U(a,n.errors):[]),n.status!==vn)return z(i.index!==s,i,a);o.push(n.value)}return N(i,e(...o))})};const Nn=(t,r,n,e)=>C(u=>{const o=null!=e,[i,a]=t(u);if(a.status===gn)return P(i,o?g(e):a.errors);if(a.status===yn)return N(i,n);const c=[a.value],f=[];let l=i,d=l.index;for(;;){const[n,u]=r(l);if(l=n,u.status===gn)return P(n,o?g(e):u.errors);if(u.status===yn)break;const[s,i]=t(l);if(l=s,i.status===gn)return P(s,o?g(e):i.errors);if(i.status===yn)break;f.push(u.value),c.push(i.value),d=l.index}let p=c[0];for(const t of s(f.length))p=f[t](p,c[t+1]);return N(l,p,d)}),_n=(t,r,n)=>C(e=>{const u=null!=n,[o,i]=t(e);if(i.status!==vn)return z(i.status===gn,o,u?g(n):i.errors);const a=[i.value],c=[];let f=o,l=f.index;for(;;){const[e,s]=r(f);if(f=e,s.status===gn)return P(e,u?g(n):s.errors);if(s.status===yn)break;const[o,i]=t(f);if(f=o,i.status===gn)return P(o,u?g(n):i.errors);if(i.status===yn)break;c.push(s.value),a.push(i.value),l=f.index}let d=a[0];for(const t of s(c.length))d=c[t](d,a[t+1]);return N(f,d,l)}),Pn=(t,r,n,e)=>C(u=>{const o=null!=e,[i,a]=t(u);if(a.status===gn)return P(i,o?g(e):a.errors);if(a.status===yn)return N(i,n);const c=[a.value],f=[];let l=i,d=l.index;for(;;){const[n,u]=r(l);if(l=n,u.status===gn)return P(n,o?g(e):u.errors);if(u.status===yn)break;const[s,i]=t(l);if(l=s,i.status===gn)return P(s,o?g(e):i.errors);if(i.status===yn)break;f.push(u.value),c.push(i.value),d=l.index}let p=c[c.length-1];for(const t of s(f.length-1,-1))p=f[t](c[t],p);return N(l,p,d)}),zn=(t,r,n)=>C(e=>{const u=null!=n,[o,i]=t(e);if(i.status!==vn)return z(i.status===gn,o,u?g(n):i.errors);const a=[i.value],c=[];let f=o,l=f.index;for(;;){const[e,s]=r(f);if(f=e,s.status===gn)return P(e,u?g(n):s.errors);if(s.status===yn)break;const[o,i]=t(f);if(f=o,i.status===gn)return P(o,u?g(n):i.errors);if(i.status===yn)break;c.push(s.value),a.push(i.value),l=f.index}let d=a[a.length-1];for(const t of s(c.length-1,-1))d=c[t](a[t],d);return N(f,d,l)})}])}));