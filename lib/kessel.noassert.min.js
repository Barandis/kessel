/*!
 * Copyright (c) 2020 Thomas Otterson
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy of
 * this software and associated documentation files (the "Software"), to deal in
 * the Software without restriction, including without limitation the rights to
 * use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of
 * the Software, and to permit persons to whom the Software is furnished to do so,
 * subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS
 * FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR
 * COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER
 * IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN
 * CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * 
 */
!function(t,r){"object"==typeof exports&&"object"==typeof module?module.exports=r():"function"==typeof define&&define.amd?define([],r):"object"==typeof exports?exports.kessel=r():t.kessel=r()}(this,(function(){return function(t){var r={};function n(e){if(r[e])return r[e].exports;var u=r[e]={i:e,l:!1,exports:{}};return t[e].call(u.exports,u,u.exports,n),u.l=!0,u.exports}return n.m=t,n.c=r,n.d=function(t,r,e){n.o(t,r)||Object.defineProperty(t,r,{enumerable:!0,get:e})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,r){if(1&r&&(t=n(t)),8&r)return t;if(4&r&&"object"==typeof t&&t&&t.__esModule)return t;var e=Object.create(null);if(n.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:t}),2&r&&"string"!=typeof t)for(var u in t)n.d(e,u,function(r){return t[r]}.bind(null,u));return e},n.n=function(t){var r=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(r,"a",r),r},n.o=function(t,r){return Object.prototype.hasOwnProperty.call(t,r)},n.p="",n(n.s=0)}([function(t,r,n){"use strict";n.r(r),n.d(r,"alpha",(function(){return Vt})),n.d(r,"any",(function(){return _t})),n.d(r,"char",(function(){return Ft})),n.d(r,"digit",(function(){return It})),n.d(r,"eof",(function(){return Mt})),n.d(r,"hex",(function(){return zt})),n.d(r,"ichar",(function(){return St})),n.d(r,"letter",(function(){return Rt})),n.d(r,"lower",(function(){return Gt})),n.d(r,"noneof",(function(){return Pt})),n.d(r,"octal",(function(){return Dt})),n.d(r,"oneof",(function(){return Nt})),n.d(r,"range",(function(){return Tt})),n.d(r,"satisfy",(function(){return Ct})),n.d(r,"upper",(function(){return Wt})),n.d(r,"always",(function(){return Bt})),n.d(r,"fail",(function(){return Zt})),n.d(r,"fatal",(function(){return qt})),n.d(r,"newline",(function(){return vr})),n.d(r,"regex",(function(){return ar})),n.d(r,"space",(function(){return pr})),n.d(r,"spaces",(function(){return xr})),n.d(r,"spaces1",(function(){return yr})),n.d(r,"ualpha",(function(){return fr})),n.d(r,"uletter",(function(){return cr})),n.d(r,"ulower",(function(){return dr})),n.d(r,"unewline",(function(){return wr})),n.d(r,"uspace",(function(){return hr})),n.d(r,"uspaces",(function(){return br})),n.d(r,"uspaces1",(function(){return gr})),n.d(r,"uupper",(function(){return lr})),n.d(r,"all",(function(){return Ur})),n.d(r,"anystr",(function(){return Or})),n.d(r,"istr",(function(){return Lr})),n.d(r,"str",(function(){return $r})),n.d(r,"alt",(function(){return Fr})),n.d(r,"def",(function(){return Cr})),n.d(r,"empty",(function(){return _r})),n.d(r,"not",(function(){return Mr})),n.d(r,"opt",(function(){return Sr})),n.d(r,"peek",(function(){return Tr})),n.d(r,"attempt",(function(){return zr})),n.d(r,"bapply",(function(){return Vr})),n.d(r,"bbetween",(function(){return Hr})),n.d(r,"bblock",(function(){return Br})),n.d(r,"bchain",(function(){return Rr})),n.d(r,"bcount",(function(){return Zr})),n.d(r,"bleft",(function(){return Wr})),n.d(r,"bpipe",(function(){return Jr})),n.d(r,"bright",(function(){return Gr})),n.d(r,"bseq",(function(){return Dr})),n.d(r,"buntil",(function(){return qr})),n.d(r,"apply",(function(){return cn})),n.d(r,"chain",(function(){return fn})),n.d(r,"fifth",(function(){return on})),n.d(r,"first",(function(){return nn})),n.d(r,"flat",(function(){return Yr})),n.d(r,"fourth",(function(){return sn})),n.d(r,"join",(function(){return Xr})),n.d(r,"map",(function(){return an})),n.d(r,"nth",(function(){return rn})),n.d(r,"second",(function(){return en})),n.d(r,"third",(function(){return un})),n.d(r,"value",(function(){return tn})),n.d(r,"label",(function(){return dn})),n.d(r,"between",(function(){return En})),n.d(r,"block",(function(){return wn})),n.d(r,"count",(function(){return jn})),n.d(r,"endby",(function(){return On})),n.d(r,"endby1",(function(){return An})),n.d(r,"lassoc",(function(){return Cn})),n.d(r,"lassoc1",(function(){return Tn})),n.d(r,"left",(function(){return gn})),n.d(r,"many",(function(){return kn})),n.d(r,"many1",(function(){return mn})),n.d(r,"pipe",(function(){return Sn})),n.d(r,"rassoc",(function(){return _n})),n.d(r,"rassoc1",(function(){return Mn})),n.d(r,"right",(function(){return vn})),n.d(r,"sepby",(function(){return Ln})),n.d(r,"sepby1",(function(){return Un})),n.d(r,"seq",(function(){return yn})),n.d(r,"skip",(function(){return $n})),n.d(r,"until",(function(){return Fn})),n.d(r,"Status",(function(){return z})),n.d(r,"failReply",(function(){return W})),n.d(r,"failure",(function(){return H})),n.d(r,"fatalReply",(function(){return G})),n.d(r,"okReply",(function(){return V})),n.d(r,"parse",(function(){return Z})),n.d(r,"parser",(function(){return R})),n.d(r,"run",(function(){return K})),n.d(r,"status",(function(){return q})),n.d(r,"succeeded",(function(){return B})),n.d(r,"success",(function(){return J})),n.d(r,"ErrorType",(function(){return k})),n.d(r,"compound",(function(){return A})),n.d(r,"expected",(function(){return m})),n.d(r,"formatErrors",(function(){return P})),n.d(r,"generic",(function(){return L})),n.d(r,"getPosition",(function(){return I})),n.d(r,"merge",(function(){return j})),n.d(r,"nested",(function(){return O})),n.d(r,"other",(function(){return U})),n.d(r,"unexpected",(function(){return $}));const e=new TextEncoder,u=new TextDecoder;function*s(t,r,n,e){const u="number"==typeof r?t:0,s="number"==typeof r?r:t,o="number"==typeof n?0===n?1:Math.abs(n):1,i="number"==typeof n?!!e:"number"==typeof r?!!n:!!r,a=u<s;let c=u;for(;!(a?i?c>s:c>=s:i?c<s:c<=s);)yield c,c=a?c+o:c-o}function o(t,r,n){const e=Uint8Array.from({length:r},(r,e)=>n.getUint8(t+e));return u.decode(e)}function i(t){return new DataView(e.encode(t).buffer)}function a(t){return[...t].length}function c(t,r){const n=r.getUint8(t);return(128&n)>>7==0?1:(224&n)>>5==6?2:(240&n)>>4==14?3:(240&n)>>4==15?4:1}function f(t,r){const n=c(t,r);return{width:n,next:o(t,n,r)}}function l(t){return`'${t}'`}function d(t){return[t,t]}function p(t){switch(t.length){case 0:return"";case 1:return t[0];case 2:return t.join(" or ");default:{const r=t.slice(),n=r.pop();return`${r.join(", ")}, or ${n}`}}}function h(t){return void 0===t?"undefined":"function"==typeof t?R.created(t)?"parser":"function":"symbol"==typeof t?`Symbol(${t.description})`:JSON.stringify(t)}function x(t){return t?G:W}function b(t,r){return null==t?r:m(t)}function y(t,r,n){return null==t?O(r,n):A(t,r,n)}function g(t,r,n,e){return t?y(r,n,e):b(r,e)}const v=/\t/gu,w=/(?:\p{Mn}|\p{Cf})/gu,k={Expected:"expected",Unexpected:"unexpected",Generic:"generic",Nested:"nested",Compound:"compound",Other:"other"};function m(t){return[{type:k.Expected,label:t}]}function $(t){return[{type:k.Unexpected,label:t}]}function L(t){return[{type:k.Generic,label:t}]}function U(t){return[{type:k.Other,label:t}]}function O(t,r){return 1===r.length&&r[0].type===k.Nested?r:[{type:k.Nested,ctx:t,errors:r}]}function A(t,r,n){return 1===n.length&&n[0].type===k.Nested?[{type:k.Compound,ctx:n.ctx,errors:n.errors,label:t}]:[{type:k.Compound,ctx:r,errors:n,label:t}]}function j(t=[],r=[]){return[...t,...r]}function E(t,r){const n=r.getUint8(t);if(10===n||11===n||12===n)return{newline:!0,skip:1};if(13===n){if(t<r.byteLength-1){const e=r.getUint8(t+1);if(13===n&&10===e)return{newline:!0,skip:2}}return{newline:!0,skip:1}}if(t<r.byteLength-1){const e=r.getUint8(t+1);if(194===n&&133===e)return{newline:!0,skip:2};if(t<r.byteLength-2){const u=r.getUint8(t+2);if(226===n&&128===e&&(168===u||169===u))return{newline:!0,skip:3}}}return{newline:!1,skip:c(t,r)}}function F(t,r){let n=0,e=1,u=0;for(;u<r.byteLength;){const{newline:s,skip:o}=E(u,r);if(s){if(u+o>t)return{start:n,end:u-1,lineno:e};e++,n=u+o}u+=o}return{start:n,end:r.byteLength-1,lineno:e}}function S(t,r,n){let e=0,u=n;for(;u<t&&u<r.byteLength;)u+=c(u,r),e++;return e}function C(t,r,n){const e=[];let u=v.exec(r);for(;null!==u;)e.push(u.index),u=v.exec(r);let s=0,o=0,i=r;for(const r of e){const e=r+s,u=n-e%n;e<t+o&&(o+=u-1),s+=u-1,i=i.substring(0,e)+" ".repeat(u)+i.substring(e+1)}return{line:i,colIndex:o+t}}function T(t,r){let n=t;const e=[];let u=w.exec(r);for(;null!==u;)e.push(u.index),u.index<n&&n--,u=w.exec(r);return{colno:n+1,length:a(r)-e.length}}function _(t){return[...new Set(t)]}function M(t,r,n,e){const u=" ".repeat(e);return _(t.map(t=>{const{index:s,view:o}=t.ctx;return(t.label?`\n${u}Could not parse ${t.label} because:\n\n`:`\n${u}The parser backtracked after:\n\n`)+N(t.errors,s,o,r,n,e+2)})).join("")}function N(t,r,n,e=8,u=72,s=0){const{start:i,end:a,lineno:c}=F(r,n),f=S(r,n,i),l=" ".repeat(s),d=o(i,a-i+1,n),{colIndex:h,line:x}=C(f,d,e),{colno:b,length:y}=T(h,x),g=`${l}Parse error at (line ${c}, column ${b}):`,v=function(t,r,n,e,u=0){const s=" ".repeat(u);if(n<=e&&r<=e)return`${s}${t}\n${s}${" ".repeat(n-1)}^`;if(n<=e-3)return`${s}${t.substring(0,e-3)}...\n${s}${" ".repeat(n-1)}^`;if(n>=r-e+3){const u=r-e+3,o=n-(r-e);return`${s}...${t.substring(u)}\n${s}${" ".repeat(o-1)}^`}const o=n-1-Math.ceil(e/2)+3,i=n-1+Math.floor(e/2)-3;return`${s}...${t.substring(o,i)}...\n${s}${" ".repeat(Math.ceil(e/2))}^`}(x,y,b,u,s),w=t.find(t=>t.type===k.Generic),m=t.find(t=>t.type===k.Unexpected),$=p(_(t.filter(t=>t.type===k.Expected).map(t=>t.label))),L=t.filter(t=>t.type===k.Nested),U=t.filter(t=>t.type===k.Compound),O=m?`${l}Unexpected ${m.label}\n`:"",A=$.length?`${l}Expected ${$}\n`:"",j=w?`${l}${w.label}\n`:"",E=M(L,e,u,s),N=M(U,e,u,s);return function(t,r){let n=t;for(;"\n"===n[n.length-1];)n=n.substring(0,n.length-1);return n+"\n".repeat(r)}(`${g}\n\n${v}\n${O}${A}${j}${0===t.length?l+"Unknown error(s)\n":""}${r>=n.byteLength?l+"Note: failure occurred at the end of input\n":""}${N}${E}`,2)}function P(t,r,n,e=N){const[u,s]=t,{index:o,view:i}=u;return e(s.errors,o,i,r,n)}function I(t,r=8){const{index:n,view:e}=t,{start:u,end:s,lineno:i}=F(n,e),a=S(n,e,u),c=o(u,s-u+1,e),{colIndex:f,line:l}=C(a,c,r),{colno:d,_:p}=T(f,l);return{line:i,column:d}}const z={Ok:"ok",Fail:"fail",Fatal:"fatal"};function D(t){const r="Parser input must be a string, a typed array, an array buffer, or a data view; parser input was "+typeof t;return{view:(t=>{if("string"==typeof t)return i(t);if((n=t)instanceof Uint8Array||n instanceof Uint8ClampedArray||n instanceof Uint16Array||n instanceof Uint32Array||n instanceof Int8Array||n instanceof Int16Array||n instanceof Int32Array||n instanceof Float32Array||n instanceof Float64Array)return new DataView(t.buffer);var n;if(t instanceof ArrayBuffer)return new DataView(t);if(t instanceof DataView)return t;throw new Error(r)})(t),index:0}}const R=function(t,r="created"){const n=new WeakSet;return Object.defineProperty((...r)=>{const e=t(...r);return n.add(e),e},r,{value:n.has.bind(n)})}(t=>t);function V(t,r=null,n=t.index){return[{...t,index:n},{status:z.Ok,value:r}]}function W(t,r=[],n=t.index){return[{...t,index:n},{status:z.Fail,errors:r}]}function G(t,r=[],n=t.index){return[{...t,index:n},{status:z.Fatal,errors:r}]}function Z(t,r){return t(D(r))}function q(t){return t[1].status}function B(t){return t[1].status===z.Ok}function J(t){return B(t)?t[1].value:null}function H(t){return B(t)?null:P(t)}function K(t,r){const[n,[e,u]]=d(t(D(r)));if(u.status===z.Ok)return u.value;throw new Error(P(n))}const Q=t=>r=>`expected ${t}; found ${h(r)}`;Q("a one-character string"),Q("a function"),Q("a generator function"),Q("a string"),Q("an array"),Q("a string or an array of characters"),Q("a string or a regular expression"),Q("a number"),Q("a parser");const X="any character",Y=t=>`a string of ${t} characters`,tt=t=>l(t),rt="a digit",nt="end of input",et="a hexadecimal digit",ut=t=>l(t),st=t=>l(t),ot="a letter",it="a lowercase letter",at="a newline",ct=t=>"none of "+p(t.map(t=>`'${t}'`)),ft="an octal digit",lt=t=>"one of "+p(t.map(t=>`'${t}'`)),dt=(t,r)=>`a character between '${t}' and '${r}'`,pt=t=>"a string matching "+t,ht="a whitespace character",xt="zero or more whitespace characters",bt="one or more whitespace characters",yt=t=>l(t),gt="a Unicode alphanumeric character",vt="a Unicode letter",wt="a Unicode lowercase letter",kt="a Unicode newline",mt="an uppercase letter",$t="a Unicode whitespace character",Lt="zero or more Unicode whitespace characters",Ut="one or more Unicode whitespace characters",Ot="a Unicode uppercase letter",At={alpha:m("an alphanumeric character"),any:m(X),anystr:t=>m(Y(t)),char:t=>m(tt(t)),digit:m(rt),eof:m(nt),hex:m(et),ichar:t=>m(ut(t)),istr:t=>m(st(t)),letter:m(ot),lower:m(it),newline:m(at),noneof:t=>m(ct(t)),octal:m(ft),oneof:t=>m(lt(t)),range:(t,r)=>m(dt(t,r)),regex:t=>m(pt(t)),space:m(ht),spaces:m(xt),spaces1:m(bt),str:t=>m(yt(t)),ualpha:m(gt),uletter:m(vt),ulower:m(wt),unewline:m(kt),upper:m(mt),uspace:m($t),uspaces:m(Lt),uspaces1:m(Ut),uupper:m(Ot)},{Ok:jt}=z,Et=t=>R(r=>{const{index:n,view:e}=r;if(n>=e.byteLength)return W(r);const{width:u,next:s}=f(n,e);return t(s)?V(r,s,n+u):W(r)}),Ft=(t,r)=>R(n=>{const[e,[u,s]]=d(Et(r=>t===r)(n));return s.status===jt?e:W(u,b(r,At.char(t)))}),St=(t,r)=>R(n=>{const[e,[u,s]]=d(Et(r=>t.toLowerCase()===r.toLowerCase())(n));return s.status===jt?e:W(u,b(r,At.ichar(t)))}),Ct=(t,r)=>R(n=>{const[e,[u,s]]=d(Et(t)(n));return s.status===jt?e:W(u,b(r,s.errors))}),Tt=(t,r,n)=>R(e=>{const[u,[s,o]]=d(Et(n=>n>=t&&n<=r)(e));return o.status===jt?u:W(s,b(n,At.range(t,r)))}),_t=t=>R(r=>{const{index:n,view:e}=r;if(n>=e.byteLength)return W(r,b(t,At.any));const{width:u,next:s}=f(n,e);return V(r,s,n+u)}),Mt=t=>R(r=>{const{index:n,view:e}=r;return n>=e.byteLength?V(r,null):W(r,b(t,At.eof))}),Nt=(t,r)=>R(n=>{const e=[...t],{index:u,view:s}=n;if(u>=s.byteLength)return W(n,b(r,At.oneof(e)));const{width:o,next:i}=f(u,s);return e.includes(i)?V(n,i,u+o):W(n,b(r,At.oneof(e)))}),Pt=(t,r)=>R(n=>{const e=[...t],{index:u,view:s}=n;if(u>=s.byteLength)return W(n,b(r,At.noneof(e)));const{width:o,next:i}=f(u,s);return e.includes(i)?W(n,b(r,At.noneof(e))):V(n,i,u+o)}),It=t=>R(r=>{const[n,[e,u]]=d(Et(t=>t>="0"&&t<="9")(r));return u.status===jt?n:W(e,b(t,At.digit))}),zt=t=>R(r=>{const[n,[e,u]]=d(Et(t=>t>="0"&&t<="9"||t>="a"&&t<="f"||t>="A"&&t<="F")(r));return u.status===jt?n:W(e,b(t,At.hex))}),Dt=t=>R(r=>{const[n,[e,u]]=d(Et(t=>t>="0"&&t<="7")(r));return u.status===jt?n:W(e,b(t,At.octal))}),Rt=t=>R(r=>{const[n,[e,u]]=d(Et(t=>t>="a"&&t<="z"||t>="A"&&t<="Z")(r));return u.status===jt?n:W(e,b(t,At.letter))}),Vt=t=>R(r=>{const[n,[e,u]]=d(Et(t=>t>="a"&&t<="z"||t>="A"&&t<="Z"||t>="0"&&t<="9")(r));return u.status===jt?n:W(e,b(t,At.alpha))}),Wt=t=>R(r=>{const[n,[e,u]]=d(Et(t=>t>="A"&&t<="Z")(r));return u.status===jt?n:W(e,b(t,At.upper))}),Gt=t=>R(r=>{const[n,[e,u]]=d(Et(t=>t>="a"&&t<="z")(r));return u.status===jt?n:W(e,b(t,At.lower))}),Zt=t=>R(r=>W(r,L(t))),qt=t=>R(r=>G(r,L(t))),Bt=t=>R(r=>V(r,t)),{Ok:Jt}=z,Ht=/^\p{Alphabetic}/u,Kt=/^(?:\p{Alphabetic}|\p{N})/u,Qt=/^(?:\p{Uppercase}|\p{Lt})/u,Xt=/^\p{Lowercase}/u,Yt=/^(?:\r\n|[\r\n\t ])/,tr=/^(?:\r\n|\p{White_Space})/u,rr=/^[\r\n\t ]*/,nr=/^\p{White_Space}*/u,er=/^[\r\n\t ]+/,ur=/^\p{White_Space}+/u,sr=/^(?:\r\n|\r|\n)/,or=/^(?:\r\n|[\r\n\u0085\u2028\u2029])/u,ir=t=>R(r=>{const{index:n,view:e}=r,u=o(n,e.byteLength-n,e).match(t);return u?V(r,u[0],n+i(u[0]).byteLength):W(r)}),ar=(t,r)=>R(n=>{let e="string"==typeof t?new RegExp(t):t;const{source:u,flags:s}=e;if("^"!==u[0]){e=new RegExp("^"+u,s)}const[o,[i,a]]=d(ir(e)(n));return a.status===Jt?o:W(i,b(r,At.regex(e)))}),cr=t=>R(r=>{const[n,[e,u]]=d(ir(Ht)(r));return u.status===Jt?n:W(e,b(t,At.uletter))}),fr=t=>R(r=>{const[n,[e,u]]=d(ir(Kt)(r));return u.status===Jt?n:W(e,b(t,At.ualpha))}),lr=t=>R(r=>{const[n,[e,u]]=d(ir(Qt)(r));return u.status===Jt?n:W(e,b(t,At.uupper))}),dr=t=>R(r=>{const[n,[e,u]]=d(ir(Xt)(r));return u.status===Jt?n:W(e,b(t,At.ulower))}),pr=t=>R(r=>{const[n,[e,u]]=d(ir(Yt)(r));return u.status===Jt?n:W(e,b(t,At.space))}),hr=t=>R(r=>{const[n,[e,u]]=d(ir(tr)(r));return u.status===Jt?n:W(e,b(t,At.uspace))}),xr=()=>R(t=>{const[r,n]=ir(rr)(t);return V(r,null)}),br=()=>R(t=>{const[r,n]=ir(nr)(t);return V(r,null)}),yr=t=>R(r=>{const[n,e]=ir(er)(r);return e.status===Jt?V(n,null):W(n,b(t,At.spaces1))}),gr=t=>R(r=>{const[n,e]=ir(ur)(r);return e.status===Jt?V(n,null):W(n,b(t,At.uspaces1))}),vr=t=>R(r=>{const[n,[e,u]]=d(ir(sr)(r));return u.status===Jt?n:W(e,b(t,At.newline))}),wr=t=>R(r=>{const[n,[e,u]]=d(ir(or)(r));return u.status===Jt?n:W(e,b(t,At.unewline))}),{Ok:kr}=z,mr=(t,r)=>R(n=>{if(t<1)return V(n,"");const{index:e,view:u}=n;if(e>=u.byteLength)return W(n);const{width:i,next:f}=function(t,r,n){const e=r.byteLength;let u=0;for(const o of s(n)){const n=t+u;if(n>=e)break;u+=c(n,r)}return t+u>=e&&(u=e-t),{width:u,next:o(t,u,r)}}(e,u,t);return a(f)===t&&r(f)?V(n,f,e+i):W(n)}),$r=(t,r)=>R(n=>{const[e,[u,s]]=d(mr(a(t),r=>t===r)(n));return s.status===kr?e:W(u,b(r,At.str(t)))}),Lr=(t,r)=>R(n=>{const[e,[u,s]]=d(mr(a(t),r=>t.toLowerCase()===r.toLowerCase())(n));return s.status===kr?e:W(u,b(r,At.istr(t)))}),Ur=()=>R(t=>{const{index:r,view:n}=t,e=n.byteLength-r;return V(t,o(r,e,n),r+e)}),Or=(t,r)=>R(n=>{const[e,[u,s]]=d(mr(t,()=>!0)(n));return s.status===kr?e:W(u,b(r,At.anystr(t)))}),{Ok:Ar,Fail:jr,Fatal:Er}=z,Fr=(...t)=>{const r=t.slice(),n="string"==typeof t[t.length-1]?r.pop():null;return R(t=>{const e=null!=n;let u=e?m(n):[];for(const n of r){const[r,[s,o]]=d(n(t));if(o.status===Ar)return r;if(e||(u=j(u,o.errors)),o.status===Er)return G(s,u)}return W(t,u)})},Sr=(t,r)=>R(n=>{const[e,[u,s]]=d(t(n));if(s.status===Ar)return e;const o=b(r,s.errors);if(s.status===Er)return G(u,o);const i=V(u,null);return i[1].errors=o,i}),Cr=(t,r,n)=>R(e=>{const[u,[s,o]]=d(t(e));return o.status===Ar?u:o.status===jr?V(s,r):G(s,b(n,o.errors))}),Tr=(t,r)=>R(n=>{const e=n.index,[u,s]=t(n);return s.status===Ar?V(u,s.value,e):s.status===jr?W(u,b(r,s.errors),e):W(u,y(r,u,s.errors),e)}),_r=(t,r)=>R(n=>{const e=n.index,[u,s]=t(n);if(s.status===Ar&&u.index===e)return V(u,null);return x(s.status===Er)(u,b(r,s.errors))}),Mr=(t,r)=>R(n=>{const e=n.index,[u,s]=t(n);return s.status===Ar?W(u,b(r,void 0),e):V(u,null,e)}),{Ok:Nr,Fail:Pr,Fatal:Ir}=z,zr=(t,r)=>R(n=>{const e=null!=r,u=n.index,[s,[o,i]]=d(t(n));if(i.status===Nr)return s;if(i.status===Ir||o.index!==u)return W(o,y(r,o,i.errors),u);if(e){if(1===i.errors.length&&i.errors[0].type===k.Nested){const{ctx:t,errors:n}=i.errors[0];return W(o,A(r,t,n),u)}return W(o,m(r),u)}return W(o,i.errors,u)}),Dr=(...t)=>{const r=t.slice(),n="string"==typeof r[r.length-1]?r.pop():null;return R(t=>{const e=[],u=t.index;let s=t,o=[];for(const t of r){var i;const[r,a]=t(s);if(s=r,o=(null===(i=a.errors)||void 0===i?void 0:i.length)?j(o,a.errors):[],a.status===Ir)return G(r,b(n,a.errors));if(a.status===Pr){return W(r,g(r.index!==u,n,r,o),u)}e.push(a.value)}return V(s,e)})},Rr=(t,r,n)=>R(e=>{const u=e.index,[s,o]=t(e);if(o.status!==Nr){return x(o.status===Ir)(s,b(n,o.errors))}const i=r(o.value),[a,[c,f]]=d(i(s));if(f.status===Nr)return a;const l=j(o.errors,f.errors);if(f.status===Ir)return G(c,b(n,l));return W(c,g(c.index!==u,n,c,l),u)}),Vr=(t,r,n)=>R(e=>{const u=e.index,[s,o]=t(e);if(o.status!==Nr){return x(o.status===Ir)(s,b(n,o.errors))}const[i,a]=r(s),c=j(o.errors,a.errors);if(a.status===Ir)return G(i,b(n,c));if(a.status===Pr){return W(i,g(i.index!==u,n,i,c),u)}return V(i,(0,a.value)(o.value))}),Wr=(t,r,n)=>R(e=>{const u=e.index,[s,o]=t(e);if(o.status!==Nr){return x(o.status===Ir)(s,b(n,o.errors))}const[i,a]=r(s);if(a.status===Nr)return V(i,o.value);const c=j(o.errors,a.errors);if(a.status===Ir)return G(i,b(n,c));return W(i,g(i.index!==u,n,i,c),u)}),Gr=(t,r,n)=>R(e=>{const u=e.index,[s,o]=t(e);if(o.status!==Nr){return x(o.status===Ir)(s,b(n,o.errors))}const[i,[a,c]]=d(r(s));if(c.status===Nr)return i;const f=j(o.errors,c.errors);if(c.status===Ir)return G(a,b(n,f));return W(a,g(a.index!==u,n,a,f),u)}),Zr=(t,r,n)=>R(e=>{const u=e.index,o=[];let i=e;for(const e of s(r)){const[r,e]=t(i);if(i=r,e.status===Ir)return G(r,b(n,e.errors));if(e.status===Pr){return W(r,g(r.index!==u,n,r,e.errors),u)}o.push(e.value)}return V(i,o)}),qr=(t,r,n)=>R(e=>{const u=e.index,s=[];let o=e;for(;;){const[e,i]=r(o);if(o=e,i.status===Ir)return G(e,b(n,i.errors));if(i.status===Nr)break;const[a,c]=t(o);if(o=a,c.status===Ir)return G(a,b(n,c.errors));if(c.status===Pr){return W(a,g(a.index!==u,n,a,j(c.errors,i.errors)),u)}s.push(c.value)}return V(o,s)}),Br=(t,r)=>R(n=>{const e=t(),u=n.index;let s,o=[],i=n;for(;;){var a;const{value:t,done:n}=e.next(s);if(n)return V(i,t);const[c,f]=t(i);if(i=c,o=(null===(a=f.errors)||void 0===a?void 0:a.length)?j(o,f.errors):[],f.status===Ir)return G(c,b(r,o));if(f.status===Pr){return W(c,g(c.index!==u,r,c,o),u)}s=f.value}}),Jr=(...t)=>{const r=t.slice(),n="string"==typeof r[r.length-1]?r.pop():null,e=r.pop();return R(t=>{const u=t.index,s=[];let o=t,i=[];for(const t of r){var a;const[r,e]=t(o);if(o=r,i=(null===(a=e.errors)||void 0===a?void 0:a.length)?j(i,e.errors):[],e.status===Ir)return G(r,b(n,i));if(e.status===Pr){return W(r,g(r.index!==u,n,r,i),u)}s.push(e.value)}return V(o,e(...s))})},Hr=(t,r,n,e)=>R(u=>{var s;const o=u.index,[i,a]=t(u);if(a.status!==Nr){return x(a.status===Ir)(i,b(e,a.errors))}const[c,f]=n(i),l=(null===(s=f.errors)||void 0===s?void 0:s.length)?j(a.errors,f.errors):[];if(f.status===Ir)return G(c,b(e,l));if(f.status===Pr){return W(c,g(c.index!==o,e,c,l),o)}const[d,p]=r(c);if(p.status===Ir)return G(d,b(e,j(l,p.errors)));if(p.status===Pr){return W(d,g(d.index!==o,e,d,j(l,p.errors)),o)}return V(d,f.value)}),{Ok:Kr,Fatal:Qr}=z,Xr=(t,r)=>R(n=>{const[e,u]=t(n);if(u.status!==Kr){return x(u.status===Qr)(e,b(r,u.errors))}return V(e,u.value.join(""))}),Yr=(t,r)=>R(n=>{const[e,u]=t(n);if(u.status!==Kr){return x(u.status===Qr)(e,b(r,u.errors))}return V(e,u.value.flat(1/0))}),tn=(t,r,n)=>R(e=>{const[u,s]=t(e);if(s.status!==Kr){return x(s.status===Qr)(u,b(n,s.errors))}return V(u,r)}),rn=(t,r,n)=>R(e=>{const[u,s]=t(e);if(s.status!==Kr){return x(s.status===Qr)(u,b(n,s.errors))}return V(u,s.value[r])}),nn=(t,r)=>R(n=>{const[e,u]=t(n);if(u.status!==Kr){return x(u.status===Qr)(e,b(r,u.errors))}return V(e,u.value[0])}),en=(t,r)=>R(n=>{const[e,u]=t(n);if(u.status!==Kr){return x(u.status===Qr)(e,b(r,u.errors))}return V(e,u.value[1])}),un=(t,r)=>R(n=>{const[e,u]=t(n);if(u.status!==Kr){return x(u.status===Qr)(e,b(r,u.errors))}return V(e,u.value[2])}),sn=(t,r)=>R(n=>{const[e,u]=t(n);if(u.status!==Kr){return x(u.status===Qr)(e,b(r,u.errors))}return V(e,u.value[3])}),on=(t,r)=>R(n=>{const[e,u]=t(n);if(u.status!==Kr){return x(u.status===Qr)(e,b(r,u.errors))}return V(e,u.value[4])}),an=(t,r,n)=>R(e=>{const[u,s]=t(e);if(s.status!==Kr){return x(s.status===Qr)(u,b(n,s.errors))}return V(u,r(s.value))}),cn=(t,r,n)=>R(e=>{const u=e.index,[s,o]=t(e);if(o.status!==Kr){return x(o.status===Qr)(s,b(n,o.errors))}const[i,a]=r(s);if(a.status!==Kr){return x(a.status===Qr||i.index!==u)(i,b(n,j(o.errors,a.errors)))}return V(i,(0,a.value)(o.value))}),fn=(t,r,n)=>R(e=>{const u=e.index,[s,o]=t(e);if(o.status!==Kr){return x(o.status===Qr)(s,b(n,o.errors))}const i=r(o.value),[a,[c,f]]=d(i(s));if(f.status!==Kr){return x(f.status===Qr||c.index!==u)(c,b(n,j(o.errors,f.errors)))}return a}),{Fail:ln}=z,dn=(t,r)=>R(n=>{const[e,[u,s]]=d(t(n));return s.status!==ln?e:W(u,m(r))}),{Ok:pn,Fail:hn,Fatal:xn}=z;function bn(t){return`[${t}]: infinite loop detected; neither content nor separator parser consumed input`}const yn=(...t)=>{const r=t.slice(),n="string"==typeof t[t.length-1]?r.pop():null;return R(t=>{const e=null!=n,u=[],s=t.index;let o=b(n,[]),i=t;for(const t of r){var a;const[r,n]=t(i);if(i=r,e||(o=(null===(a=n.errors)||void 0===a?void 0:a.length)?j(o,n.errors):[]),n.status!==pn){return x(n.status===xn||i.index!==s)(i,o)}u.push(n.value)}return V(i,u)})},gn=(t,r,n)=>R(e=>{const u=e.index,[s,o]=t(e);if(o.status!==z.Ok){return(o.status===xn?G:W)(s,b(n,o.errors))}const[i,a]=r(s);if(a.status!==pn){return x(a.status===xn||i.index!==u)(i,b(n,j(o.errors,a.errors)))}return V(i,o.value)}),vn=(t,r,n)=>R(e=>{const u=e.index,[s,o]=t(e);if(o.status!==z.Ok){return x(o.status===xn)(s,b(n,o.errors))}const[i,[a,c]]=d(r(s));if(c.status!==pn){return x(a.status===xn||a.index!==u)(a,b(n,j(o.errors,c.errors)))}return i}),wn=(t,r)=>R(n=>{const e=null!=r,u=t(),s=n.index;let o,i=b(r,[]),a=n;for(;;){var c;const{value:t,done:r}=u.next(o);if(r)return V(a,t);const[n,f]=t(a);if(a=n,e||(i=(null===(c=f.errors)||void 0===c?void 0:c.length)?j(i,f.errors):[]),f.status!==pn){return x(f.status===xn||n.index!==s)(n,i)}o=f.value}}),kn=(t,r)=>R(n=>{const e=[];let u=n;for(;;){const[n,s]=t(u);if(u=n,s.status===xn)return G(n,b(r,s.errors));if(s.status===hn)break;if(e.push(s.value),u.index>=u.view.byteLength)break}return V(u,e)}),mn=(t,r)=>R(n=>{const[e,u]=t(n);if(u.status!==pn){return x(u.status===xn)(e,b(r,u.errors))}let s=e;const o=[u.value];for(;;){const[n,e]=t(s);if(s=n,e.status===xn)return G(n,b(r,e.errors));if(e.status===hn)break;if(o.push(e.value),s.index>=s.view.byteLength)break}return V(s,o)}),$n=(t,r)=>R(n=>{const[e,u]=t(n);if(u.status!==pn){return x(u.status===xn)(e,b(r,u.errors))}return V(e,null)}),Ln=(t,r,n)=>R(e=>{let u=e.index;const[s,o]=t(e);if(o.status===xn)return G(s,b(n,o.errors));if(o.status===hn)return V(s,[]);const i=[o.value];let a=s;for(;;){u=a.index;const[e,s]=r(a);if(a=e,s.status===xn)return G(e,b(n,s.errors));if(s.status===hn)break;const[o,c]=t(a);if(a=o,c.status===xn)return G(o,b(n,c.errors));if(c.status===hn)break;if(a.index===u)throw new TypeError(bn("sepby"));i.push(c.value)}return V(a,i,u)}),Un=(t,r,n)=>R(e=>{let u=e.index;const[s,o]=t(e);if(o.status!==pn){return x(o.status===xn)(s,b(n,o.errors))}const i=[o.value];let a=s;for(;;){u=a.index;const[e,s]=r(a);if(a=e,s.status===xn)return G(e,b(n,s.errors));if(s.status===hn)break;const[o,c]=t(a);if(a=o,c.status===xn)return G(o,b(n,c.errors));if(c.status===hn)break;if(a.index===u)throw new TypeError(bn("sepby1"));i.push(c.value)}return V(a,i,u)}),On=(t,r,n)=>R(e=>{let u=e.index;const[s,o]=t(e);if(o.status===xn)return G(s,b(n,o.errors));if(o.status===hn)return V(s,[]);const i=[o.value];let a=s;for(;;){u=a.index;const[e,s]=r(a);if(a=e,s.status===xn)return G(e,b(n,s.errors));if(s.status===hn)break;const[o,c]=t(a);if(a=o,c.status===xn)return G(o,b(n,c.errors));if(c.status===hn)break;if(a.index===u)throw new TypeError(bn("endby"));i.push(c.value)}return V(a,i)}),An=(t,r,n)=>R(e=>{let u=e.index;const[s,o]=t(e);if(o.status!==pn){return x(o.status===xn)(s,b(n,o.errors))}const i=[o.value];let a=s;for(;;){u=a.index;const[e,s]=r(a);if(a=e,s.status===xn)return G(e,b(n,s.errors));if(s.status===hn)break;const[o,c]=t(a);if(a=o,c.status===xn)return G(o,b(n,c.errors));if(c.status===hn)break;if(a.index===u)throw new TypeError(bn("endby1"));i.push(c.value)}return V(a,i)}),jn=(t,r,n)=>R(e=>{const u=e.index,o=[];let i=e;for(const e of s(r)){const[r,e]=t(i);if(i=r,e.status!==pn){return x(e.status===xn||r.index!==u)(r,b(n,e.errors))}o.push(e.value)}return V(i,o)}),En=(t,r,n,e)=>R(u=>{var s;const o=u.index,[i,a]=t(u);if(a.status!==pn){return x(a.status===xn)(i,b(e,a.errors))}const[c,f]=n(i),l=b(e,(null===(s=f.errors)||void 0===s?void 0:s.length)?j(a.errors,f.errors):[]);if(f.status!==pn){return x(f.status===xn||c.index!==o)(c,l)}const[d,p]=r(c);if(p.status!==pn){return x(p.status===xn||d.index!==o)(d,b(e,j(l,p.errors)))}return V(d,f.value)}),Fn=(t,r,n)=>R(e=>{const u=e.index,s=[];let o=e;for(;;){const[e,i]=r(o);if(o=e,i.status===xn)return G(e,b(n,i.errors));if(i.status===pn)break;const[a,c]=t(o);if(o=a,c.status===xn)return G(a,b(n,c.errors));if(c.status===hn){return x(a.index!==u)(a,b(n,j(c.errors,i.errors)))}s.push(c.value)}return V(o,s)}),Sn=(...t)=>{const r=t.slice(),n="string"==typeof t[t.length-1]?r.pop():null,e=r.pop();return R(t=>{const u=null!=n,s=t.index,o=[];let i=t,a=b(n,[]);for(const t of r){var c;const[r,n]=t(i);if(i=r,u||(a=(null===(c=n.errors)||void 0===c?void 0:c.length)?j(a,n.errors):[]),n.status!==pn){return x(n.status===xn||r.index!==s)(r,a)}o.push(n.value)}return V(i,e(...o))})};const Cn=(t,r,n,e)=>R(u=>{const[o,i]=t(u);if(i.status===xn)return G(o,b(e,i.errors));if(i.status===hn)return V(o,n);const a=[i.value],c=[];let f=o,l=f.index;for(;;){const[n,u]=r(f);if(f=n,u.status===xn)return G(n,b(e,u.errors));if(u.status===hn)break;const[s,o]=t(f);if(f=s,o.status===xn)return G(s,b(e,o.errors));if(o.status===hn)break;c.push(u.value),a.push(o.value),l=f.index}let d=a[0];for(const t of s(c.length))d=c[t](d,a[t+1]);return V(f,d,l)}),Tn=(t,r,n)=>R(e=>{const[u,o]=t(e);if(o.status!==pn){return x(o.status===xn)(u,b(n,o.errors))}const i=[o.value],a=[];let c=u,f=c.index;for(;;){const[e,u]=r(c);if(c=e,u.status===xn)return G(e,b(n,u.errors));if(u.status===hn)break;const[s,o]=t(c);if(c=s,o.status===xn)return G(s,b(n,o.errors));if(o.status===hn)break;a.push(u.value),i.push(o.value),f=c.index}let l=i[0];for(const t of s(a.length))l=a[t](l,i[t+1]);return V(c,l,f)}),_n=(t,r,n,e)=>R(u=>{const[o,i]=t(u);if(i.status===xn)return G(o,b(e,i.errors));if(i.status===hn)return V(o,n);const a=[i.value],c=[];let f=o,l=f.index;for(;;){const[n,u]=r(f);if(f=n,u.status===xn)return G(n,b(e,u.errors));if(u.status===hn)break;const[s,o]=t(f);if(f=s,o.status===xn)return G(s,b(e,o.errors));if(o.status===hn)break;c.push(u.value),a.push(o.value),l=f.index}let d=a[a.length-1];for(const t of s(c.length-1,-1))d=c[t](a[t],d);return V(f,d,l)}),Mn=(t,r,n)=>R(e=>{const[u,o]=t(e);if(o.status!==pn){return x(o.status===xn)(u,b(n,o.errors))}const i=[o.value],a=[];let c=u,f=c.index;for(;;){const[e,u]=r(c);if(c=e,u.status===xn)return G(e,b(n,u.errors));if(u.status===hn)break;const[s,o]=t(c);if(c=s,o.status===xn)return G(s,b(n,o.errors));if(o.status===hn)break;a.push(u.value),i.push(o.value),f=c.index}let l=i[i.length-1];for(const t of s(a.length-1,-1))l=a[t](i[t],l);return V(c,l,f)})}])}));