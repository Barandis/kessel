/*!
 * Copyright (c) 2020 Thomas Otterson
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy of
 * this software and associated documentation files (the "Software"), to deal in
 * the Software without restriction, including without limitation the rights to
 * use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of
 * the Software, and to permit persons to whom the Software is furnished to do so,
 * subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS
 * FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR
 * COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER
 * IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN
 * CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * 
 */
!function(t,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define([],n):"object"==typeof exports?exports.kessel=n():t.kessel=n()}(this,(function(){return function(t){var n={};function e(r){if(n[r])return n[r].exports;var s=n[r]={i:r,l:!1,exports:{}};return t[r].call(s.exports,s,s.exports,e),s.l=!0,s.exports}return e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:r})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,n){if(1&n&&(t=e(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(e.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var s in t)e.d(r,s,function(n){return t[n]}.bind(null,s));return r},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},e.p="",e(e.s=0)}([function(t,n,e){"use strict";e.r(n),e.d(n,"alpha",(function(){return wn})),e.d(n,"any",(function(){return dn})),e.d(n,"anyOf",(function(){return hn})),e.d(n,"char",(function(){return on})),e.d(n,"charI",(function(){return an})),e.d(n,"digit",(function(){return xn})),e.d(n,"eof",(function(){return pn})),e.d(n,"hex",(function(){return gn})),e.d(n,"letter",(function(){return vn})),e.d(n,"lower",(function(){return $n})),e.d(n,"noneOf",(function(){return yn})),e.d(n,"octal",(function(){return bn})),e.d(n,"range",(function(){return ln})),e.d(n,"satisfy",(function(){return cn})),e.d(n,"satisfyM",(function(){return fn})),e.d(n,"upper",(function(){return mn})),e.d(n,"failNormally",(function(){return kn})),e.d(n,"failFatally",(function(){return Bn})),e.d(n,"alphaU",(function(){return zn})),e.d(n,"letterU",(function(){return Pn})),e.d(n,"lowerU",(function(){return qn})),e.d(n,"newline",(function(){return Hn})),e.d(n,"newlineU",(function(){return Kn})),e.d(n,"regex",(function(){return Cn})),e.d(n,"space",(function(){return Dn})),e.d(n,"spaceU",(function(){return Vn})),e.d(n,"spaces",(function(){return Wn})),e.d(n,"spaces1",(function(){return Xn})),e.d(n,"spaces1U",(function(){return Jn})),e.d(n,"spacesU",(function(){return Zn})),e.d(n,"upperU",(function(){return Gn})),e.d(n,"all",(function(){return ee})),e.d(n,"anyString",(function(){return re})),e.d(n,"string",(function(){return te})),e.d(n,"stringI",(function(){return ne})),e.d(n,"alt",(function(){return ie})),e.d(n,"def",(function(){return ce})),e.d(n,"empty",(function(){return le})),e.d(n,"not",(function(){return de})),e.d(n,"opt",(function(){return ae})),e.d(n,"peek",(function(){return fe})),e.d(n,"andThenB",(function(){return Ue})),e.d(n,"applyB",(function(){return $e})),e.d(n,"attempt",(function(){return be})),e.d(n,"attemptM",(function(){return ve})),e.d(n,"betweenB",(function(){return Ae})),e.d(n,"blockB",(function(){return Le})),e.d(n,"chainB",(function(){return me})),e.d(n,"label",(function(){return ge})),e.d(n,"leftB",(function(){return ke})),e.d(n,"manyTillB",(function(){return Oe})),e.d(n,"pipeB",(function(){return Me})),e.d(n,"repeatB",(function(){return Ee})),e.d(n,"rightB",(function(){return Be})),e.d(n,"sequenceB",(function(){return we})),e.d(n,"compact",(function(){return je})),e.d(n,"fifth",(function(){return Pe})),e.d(n,"first",(function(){return Ne})),e.d(n,"fourth",(function(){return Ce})),e.d(n,"join",(function(){return Fe})),e.d(n,"nth",(function(){return Ie})),e.d(n,"second",(function(){return _e})),e.d(n,"third",(function(){return Re})),e.d(n,"value",(function(){return Se})),e.d(n,"always",(function(){return De})),e.d(n,"andThen",(function(){return Je})),e.d(n,"apply",(function(){return We})),e.d(n,"chain",(function(){return Ze})),e.d(n,"map",(function(){return Ve})),e.d(n,"orElse",(function(){return Xe})),e.d(n,"assoc1L",(function(){return vr})),e.d(n,"assoc1R",(function(){return mr})),e.d(n,"assocL",(function(){return br})),e.d(n,"assocR",(function(){return wr})),e.d(n,"between",(function(){return hr})),e.d(n,"block",(function(){return rr})),e.d(n,"left",(function(){return nr})),e.d(n,"many",(function(){return sr})),e.d(n,"many1",(function(){return ur})),e.d(n,"manyTill",(function(){return yr})),e.d(n,"pipe",(function(){return xr})),e.d(n,"repeat",(function(){return pr})),e.d(n,"right",(function(){return er})),e.d(n,"sepBy",(function(){return cr})),e.d(n,"sepBy1",(function(){return fr})),e.d(n,"sepEndBy",(function(){return lr})),e.d(n,"sepEndBy1",(function(){return dr})),e.d(n,"seq",(function(){return tr})),e.d(n,"skip",(function(){return or})),e.d(n,"skipMany",(function(){return ir})),e.d(n,"skipMany1",(function(){return ar})),e.d(n,"Status",(function(){return P})),e.d(n,"fail",(function(){return D})),e.d(n,"failure",(function(){return K})),e.d(n,"fatal",(function(){return V})),e.d(n,"maybeFatal",(function(){return W})),e.d(n,"ok",(function(){return q})),e.d(n,"parse",(function(){return Z})),e.d(n,"parser",(function(){return G})),e.d(n,"run",(function(){return Q})),e.d(n,"status",(function(){return X})),e.d(n,"succeeded",(function(){return J})),e.d(n,"success",(function(){return H})),e.d(n,"ErrorType",(function(){return k})),e.d(n,"compound",(function(){return M})),e.d(n,"expected",(function(){return B})),e.d(n,"formatErrors",(function(){return R})),e.d(n,"generic",(function(){return E})),e.d(n,"getPosition",(function(){return C})),e.d(n,"merge",(function(){return A})),e.d(n,"nested",(function(){return L})),e.d(n,"other",(function(){return O})),e.d(n,"unexpected",(function(){return U}));const r=new TextEncoder,s=new TextDecoder;function*u(t,n,e,r){const s="number"==typeof n?t:0,u="number"==typeof n?n:t,o="number"==typeof e?0===e?1:Math.abs(e):1,i="number"==typeof e?!!r:"number"==typeof n?!!e:!!n,a=s<u;let c=s;for(;!(a?i?c>u:c>=u:i?c<u:c<=u);)yield c,c=a?c+o:c-o}function o(t,n,e){const r=Uint8Array.from({length:n},(n,r)=>e.getUint8(t+r));return s.decode(r)}function i(t){return new DataView(r.encode(t).buffer)}function a(t){return[...t].length}function c(t,n){const e=n.getUint8(t);return(128&e)>>7==0?1:(224&e)>>5==6?2:(240&e)>>4==14?3:(240&e)>>4==15?4:1}function f(t,n){const e=c(t,n);return{width:e,next:o(t,e,n)}}function l(t){return`'${t}'`}function d(t){return[t,t]}function p(t){switch(t.length){case 0:return"";case 1:return t[0];case 2:return t.join(" or ");default:{const n=t.slice(),e=n.pop();return`${n.join(", ")}, or ${e}`}}}function h(t){var n,e;const r=["th","st","nd","rd"],s=t%100;return t+(null!==(n=null!==(e=r[(s-20)%10])&&void 0!==e?e:r[s])&&void 0!==n?n:r[0])}const y=["zero","one","two","three","four","five","six","seven","eight","nine","ten","eleven","twelve","thirteen","fourteen","fifteen","sixteen","seventeen","eighteen","nineteen"],x=["zeroth","first","second","third","fourth","fifth","sixth","seventh","eighth","ninth","tenth","eleventh","twelfth","thirteenth","fourteenth","fifteenth","sixteenth","seventeenth","eighteenth","nineteenth"],g=["twent","thirt","fort","fift","sixt","sevent","eight","ninet"],b=["hundred","thousand","million","billion","trillion","quadrillion"];function v(t){if(t<0||t>Number.MAX_SAFE_INTEGER)throw new Error("Argument must be between 0 and "+Number.MAX_SAFE_INTEGER);const n=Math.floor(Math.log10(t));if(t<20)return x[t];if(1===n){const n=Math.floor(t/10)-2;return t%10==0?g[n]+"ieth":`${g[n]}y-${x[t%10]}`}if(2===n){const e=Math.floor(t/10**n),r=t-e*10**n;return`${y[e]} ${b[0]}${0===r?"th":" "+v(r)}`}const e=n%3+1,r=Math.floor(n/3),s=Math.floor(t/10**(n-e+1)),u=function t(n){if(n<20)return y[n];const e=n%10;if(n<100)return`${g[Math.floor(n/10)-2]}y${0===e?"":"-"+y[e]}`;const r=n-100*Math.floor(n/100);return`${y[Math.floor(n/100)]} ${b[0]}${0===r?"th":" "+t(r)}`}(s),o=t-s*10**(n-e+1);return`${u} ${b[r]}${0===o?"th":" "+v(o)}`}function w(t){return void 0===t?"undefined":"function"==typeof t?G.created(t)?"parser":"function":"symbol"==typeof t?`Symbol(${t.description})`:JSON.stringify(t)}const m=/\t/gu,$=/(?:\p{Mn}|\p{Cf})/gu,k={Expected:"expected",Unexpected:"unexpected",Generic:"generic",Nested:"nested",Compound:"compound",Other:"other"};function B(t){return[{type:k.Expected,label:t}]}function U(t){return[{type:k.Unexpected,label:t}]}function E(t){return[{type:k.Generic,label:t}]}function O(t){return[{type:k.Other,label:t}]}function L(t,n){return 1===n.length&&n[0].type===k.Nested?n:[{type:k.Nested,ctx:t,errors:n}]}function M(t,n,e){return 1===e.length&&e[0].type===k.Nested?[{type:k.Compound,ctx:e.ctx,errors:e.errors,label:t}]:[{type:k.Compound,ctx:n,errors:e,label:t}]}function A(t=[],n=[]){return[...t,...n]}function T(t,n){const e=n.getUint8(t);if(10===e||11===e||12===e)return{newline:!0,skip:1};if(13===e){if(t<n.byteLength-1){const r=n.getUint8(t+1);if(13===e&&10===r)return{newline:!0,skip:2}}return{newline:!0,skip:1}}if(t<n.byteLength-1){const r=n.getUint8(t+1);if(194===e&&133===r)return{newline:!0,skip:2};if(t<n.byteLength-2){const s=n.getUint8(t+2);if(226===e&&128===r&&(168===s||169===s))return{newline:!0,skip:3}}}return{newline:!1,skip:c(t,n)}}function F(t,n){let e=0,r=1,s=0;for(;s<n.byteLength;){const{newline:u,skip:o}=T(s,n);if(u){if(s+o>t)return{start:e,end:s-1,lineno:r};r++,e=s+o}s+=o}return{start:e,end:n.byteLength-1,lineno:r}}function j(t,n,e){let r=0,s=e;for(;s<t&&s<n.byteLength;)s+=c(s,n),r++;return r}function S(t,n,e){const r=[];let s=m.exec(n);for(;null!==s;)r.push(s.index),s=m.exec(n);let u=0,o=0,i=n;for(const n of r){const r=n+u,s=e-r%e;r<t+o&&(o+=s-1),u+=s-1,i=i.substring(0,r)+" ".repeat(s)+i.substring(r+1)}return{line:i,colIndex:o+t}}function I(t,n){let e=t;const r=[];let s=$.exec(n);for(;null!==s;)r.push(s.index),s.index<e&&e--,s=$.exec(n);return{colno:e+1,length:a(n)-r.length}}function N(t,n,e,r){const s=" ".repeat(r);return t.map(t=>{const{index:u,view:o}=t.ctx;return(t.label?`\n${s}${t.label} could not be parsed because:\n\n`:`\n${s}The parser backtracked after:\n\n`)+_(t.errors,u,o,n,e,r+2)}).join("")}function _(t,n,e,r=8,s=72,u=0){const{start:i,end:a,lineno:c}=F(n,e),f=j(n,e,i),l=" ".repeat(u),d=o(i,a-i+1,e),{colIndex:h,line:y}=S(f,d,r),{colno:x,length:g}=I(h,y),b=`${l}Parse error at (line ${c}, column ${x}):`,v=function(t,n,e,r,s=0){const u=" ".repeat(s);if(e<=r&&n<=r)return`${u}${t}\n${u}${" ".repeat(e-1)}^`;if(e<=r-3)return`${u}${t.substring(0,r-3)}...\n${u}${" ".repeat(e-1)}^`;if(e>=n-r+3){const s=n-r+3,o=e-(n-r);return`${u}...${t.substring(s)}\n${u}${" ".repeat(o-1)}^`}const o=e-1-Math.ceil(r/2)+3,i=e-1+Math.floor(r/2)-3;return`${u}...${t.substring(o,i)}...\n${u}${" ".repeat(Math.ceil(r/2))}^`}(y,g,x,s,u),w=t.find(t=>t.type===k.Generic),m=t.find(t=>t.type===k.Unexpected),$=p(t.filter(t=>t.type===k.Expected).map(t=>t.label)),B=t.filter(t=>t.type===k.Nested),U=t.filter(t=>t.type===k.Compound),E=m?`${l}Unexpected ${m.label}\n`:"",O=$.length?`${l}Expected ${$}\n`:"",L=w?`${l}${w.label}\n`:"",M=N(B,r,s,u),A=N(U,r,s,u);return function(t,n){let e=t;for(;"\n"===e[e.length-1];)e=e.substring(0,e.length-1);return e+"\n".repeat(n)}(`${b}\n\n${v}\n${E}${O}${L}${0===t.length?l+"Unknown error(s)\n":""}${n>=e.byteLength?l+"Note: failure occurred at the end of input\n":""}${A}${M}`,2)}function R(t,n,e,r=_){const[s,u]=t,{index:o,view:i}=s;return r(u.errors,o,i,n,e)}function C(t,n=8){const{index:e,view:r}=t,{start:s,end:u,lineno:i}=F(e,r),a=j(e,r,s),c=o(s,u-s+1,r),{colIndex:f,line:l}=S(a,c,n),{colno:d,_:p}=I(f,l);return{line:i,column:d}}const P={Ok:"ok",Fail:"fail",Fatal:"fatal"};function z(t){const n="Parser input must be a string, a typed array, an array buffer, or a data view; parser input was "+typeof t;return{view:(t=>{if("string"==typeof t)return i(t);if((e=t)instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Uint16Array||e instanceof Uint32Array||e instanceof Int8Array||e instanceof Int16Array||e instanceof Int32Array||e instanceof Float32Array||e instanceof Float64Array)return new DataView(t.buffer);var e;if(t instanceof ArrayBuffer)return new DataView(t);if(t instanceof DataView)return t;throw new Error(n)})(t),index:0}}const G=function(t,n="created"){const e=new WeakSet;return Object.defineProperty((...n)=>{const r=t(...n);return e.add(r),r},n,{value:e.has.bind(e)})}(t=>t);function q(t,n=null,e=t.index){return[{...t,index:e},{status:P.Ok,value:n}]}function D(t,n=[],e=t.index){return[{...t,index:e},{status:P.Fail,errors:n}]}function V(t,n=[],e=t.index){return[{...t,index:e},{status:P.Fatal,errors:n}]}function W(t,n,e=[],r=n.index){return[{...n,index:r},{status:t?P.Fatal:P.Fail,errors:e}]}function Z(t,n){return t(z(n))}function X(t){return t[1].status}function J(t){return t[1].status===P.Ok}function H(t){return J(t)?t[1].value:null}function K(t){return J(t)?null:R(t)}function Q(t,n){const[e,[r,s]]=d(t(z(n)));if(s.status===P.Ok)return s.value;throw new Error(R(e))}const Y=t=>n=>`expected ${t}; found ${w(n)}`,tt=Y("a one-character string"),nt=Y("a function"),et=Y("a generator function"),rt=Y("a string"),st=Y("an array"),ut=Y("a string or an array of characters"),ot=Y("a string or a regular expression"),it=Y("a number"),at=Y("a parser"),ct=(t,n=1,e=!1)=>r=>`expected ${e?v(n)+" ":""}argument to be ${t}; found ${w(r)}`,ft=(t=1,n=!1)=>ct("a parser",t,n),lt=(t=1,n=!1)=>ct("a string",t,n),dt=(t,n)=>e=>`expected ${n} argument to be ${t}; found ${w(e)}`,pt=t=>dt("a one-character string",t),ht=t=>dt("a function",t),yt=t=>dt("a number",t),xt=t=>dt("a parser",t),gt=t=>dt("a string",t);function bt(t,n,e){throw new Error(`[${t}]: ${e(n)}`)}function vt(t,n,e=tt){"string"==typeof n&&1===a(n)||bt(t,n,e)}function wt(t,n,e=nt){("function"!=typeof n||G.created(n))&&bt(t,n,e)}function mt(t,n,e=et){"[object GeneratorFunction]"!==Object.prototype.toString.call(n)&&bt(t,n,e)}function $t(t,n,e=rt){"string"!=typeof n&&bt(t,n,e)}function kt(t,n,e=st){Array.isArray(n)||bt(t,n,e)}function Bt(t,n,e=ut){Array.isArray(n)&&n.every(t=>"string"==typeof t&&1===a(t))||"string"==typeof n||bt(t,n,e)}function Ut(t,n,e=it){"number"!=typeof n&&bt(t,n,e)}function Et(t,n,e=at){"function"==typeof n&&G.created(n)||bt(t,n,e)}function Ot(t,n){for(const[e,r]of function*(t){const n=t[Symbol.iterator]();let e=n.next(),r=0;for(;!e.done;)yield[r++,e.value],e=n.next()}(n))Et(t,r,xt(h(e+1)))}const Lt="a Unicode alphanumeric character",Mt="any character",At=t=>"any of "+p(t.map(t=>`'${t}'`)),Tt=t=>`a string of ${t} characters`,Ft=t=>l(t),jt=t=>l(t),St="a digit",It="end of input",Nt="a hexadecimal digit",_t="a letter",Rt="a Unicode letter",Ct="a lowercase letter",Pt="a Unicode lowercase letter",zt="a newline",Gt="a Unicode newline",qt=t=>"none of "+p(t.map(t=>`'${t}'`)),Dt="an octal digit",Vt=(t,n)=>`a character between '${t}' and '${n}'`,Wt=t=>"a string matching "+t,Zt="a whitespace character",Xt="zero or more whitespace characters",Jt="one or more whitespace characters",Ht="zero or more Unicode whitespace characters",Kt="one or more Unicode whitespace characters",Qt="a Unicode whitespace character",Yt=t=>l(t),tn=t=>l(t),nn="an uppercase letter",en="a Unicode uppercase letter",rn={alpha:B("an alphanumeric character"),alphaU:B(Lt),any:B(Mt),anyOf:t=>B(At(t)),anyString:t=>B(Tt(t)),char:t=>B(Ft(t)),charI:t=>B(jt(t)),digit:B(St),eof:B(It),hex:B(Nt),letter:B(_t),letterU:B(Rt),lower:B(Ct),lowerU:B(Pt),newline:B(zt),newlineU:B(Gt),noneOf:t=>B(qt(t)),octal:B(Dt),range:(t,n)=>B(Vt(t,n)),regex:t=>B(Wt(t)),space:B(Zt),spaces:B(Xt),spaces1:B(Jt),spacesU:B(Ht),spaces1U:B(Kt),spaceU:B(Qt),string:t=>B(Yt(t)),stringI:t=>B(tn(t)),upper:B(nn),upperU:B(en)},{Ok:sn}=P,un=t=>G(n=>{const{index:e,view:r}=n;if(e>=r.byteLength)return D(n);const{width:s,next:u}=f(e,r);return t(u)?q(n,u,e+s):D(n)}),on=t=>G(n=>{vt("char",t);const[e,[r,s]]=d(un(n=>t===n)(n));return s.status===sn?e:D(r,rn.char(t))}),an=t=>G(n=>{vt("charI",t);const[e,[r,s]]=d(un(n=>t.toLowerCase()===n.toLowerCase())(n));return s.status===sn?e:D(r,rn.charI(t))}),cn=t=>G(n=>(wt("satisfy",t),un(t)(n))),fn=(t,n)=>G(e=>{wt("satisfyM",t,ht("1st")),$t("satisfyM",n,gt("2nd"));const[r,[s,u]]=d(un(t)(e));return u.status===sn?r:D(s,B(n))}),ln=(t,n)=>G(e=>{vt("range",t,pt("1st")),vt("range",n,pt("2nd"));const[r,[s,u]]=d(un(e=>e>=t&&e<=n)(e));return u.status===sn?r:D(s,rn.range(t,n))}),dn=G(t=>{const{index:n,view:e}=t;if(n>=e.byteLength)return D(t,rn.any);const{width:r,next:s}=f(n,e);return q(t,s,n+r)}),pn=G(t=>{const{index:n,view:e}=t;return n>=e.byteLength?q(t,null):D(t,rn.eof)}),hn=t=>G(n=>{Bt("anyOf",t);const{index:e,view:r}=n,{width:s,next:u}=f(e,r),o=[...t];return o.includes(u)?q(n,u,e+s):D(n,rn.anyOf(o))}),yn=t=>G(n=>{Bt("noneOf",t);const{index:e,view:r}=n,{width:s,next:u}=f(e,r),o=[...t];return o.includes(u)?D(n,rn.noneOf(o)):q(n,u,e+s)}),xn=G(t=>{const[n,[e,r]]=d(un(t=>t>="0"&&t<="9")(t));return r.status===sn?n:D(e,rn.digit)}),gn=G(t=>{const[n,[e,r]]=d(un(t=>t>="0"&&t<="9"||t>="a"&&t<="f"||t>="A"&&t<="F")(t));return r.status===sn?n:D(e,rn.hex)}),bn=G(t=>{const[n,[e,r]]=d(un(t=>t>="0"&&t<="7")(t));return r.status===sn?n:D(e,rn.octal)}),vn=G(t=>{const[n,[e,r]]=d(un(t=>t>="a"&&t<="z"||t>="A"&&t<="Z")(t));return r.status===sn?n:D(e,rn.letter)}),wn=G(t=>{const[n,[e,r]]=d(un(t=>t>="a"&&t<="z"||t>="A"&&t<="Z"||t>="0"&&t<="9")(t));return r.status===sn?n:D(e,rn.alpha)}),mn=G(t=>{const[n,[e,r]]=d(un(t=>t>="A"&&t<="Z")(t));return r.status===sn?n:D(e,rn.upper)}),$n=G(t=>{const[n,[e,r]]=d(un(t=>t>="a"&&t<="z")(t));return r.status===sn?n:D(e,rn.lower)}),kn=t=>G(n=>($t("failNormally",t),D(n,E(t)))),Bn=t=>G(n=>($t("failFatally",t),V(n,E(t)))),{Ok:Un}=P,En=/^\p{Alphabetic}/u,On=/^(?:\p{Alphabetic}|\p{N})/u,Ln=/^(?:\p{Uppercase}|\p{Lt})/u,Mn=/^\p{Lowercase}/u,An=/^(?:\r\n|[\r\n\t ])/,Tn=/^(?:\r\n|\p{White_Space})/u,Fn=/^[\r\n\t ]*/,jn=/^\p{White_Space}*/u,Sn=/^[\r\n\t ]+/,In=/^\p{White_Space}+/u,Nn=/^(?:\r\n|\r|\n)/,_n=/^(?:\r\n|[\r\n\u0085\u2028\u2029])/u,Rn=t=>G(n=>{const{index:e,view:r}=n,s=o(e,r.byteLength-e,r).match(t);return s?q(n,s[0],e+i(s[0]).byteLength):D(n)}),Cn=t=>G(n=>{!function(t,n,e=ot){"string"!=typeof n&&"[object RegExp]"!==Object.prototype.toString.call(n)&&bt(t,n,e)}("regex",t);let e="string"==typeof t?new RegExp(t):t;const{source:r,flags:s}=e;if("^"!==r[0]){e=new RegExp("^"+r,s)}const[u,[o,i]]=d(Rn(e)(n));return i.status===Un?u:D(o,rn.regex(e))}),Pn=G(t=>{const[n,[e,r]]=d(Rn(En)(t));return r.status===Un?n:D(e,rn.letterU)}),zn=G(t=>{const[n,[e,r]]=d(Rn(On)(t));return r.status===Un?n:D(e,rn.alphaU)}),Gn=G(t=>{const[n,[e,r]]=d(Rn(Ln)(t));return r.status===Un?n:D(e,rn.upperU)}),qn=G(t=>{const[n,[e,r]]=d(Rn(Mn)(t));return r.status===Un?n:D(e,rn.lowerU)}),Dn=G(t=>{const[n,[e,r]]=d(Rn(An)(t));return r.status===Un?n:D(e,rn.space)}),Vn=G(t=>{const[n,[e,r]]=d(Rn(Tn)(t));return r.status===Un?n:D(e,rn.spaceU)}),Wn=G(t=>{const[n,e]=Rn(Fn)(t);return q(n,null)}),Zn=G(t=>{const[n,e]=Rn(jn)(t);return q(n,null)}),Xn=G(t=>{const[n,e]=Rn(Sn)(t);return e.status===Un?q(n,null):D(n,rn.spaces1)}),Jn=G(t=>{const[n,e]=Rn(In)(t);return e.status===Un?q(n,null):D(n,rn.spaces1U)}),Hn=G(t=>{const[n,[e,r]]=d(Rn(Nn)(t));return r.status===Un?n:D(e,rn.newline)}),Kn=G(t=>{const[n,[e,r]]=d(Rn(_n)(t));return r.status===Un?n:D(e,rn.newlineU)}),{Ok:Qn}=P,Yn=(t,n)=>G(e=>{if(t<1)return q(e,"");const{index:r,view:s}=e;if(r>=s.byteLength)return D(e);const{width:i,next:f}=function(t,n,e){const r=n.byteLength;let s=0;for(const o of u(e)){const e=t+s;if(e>=r)break;s+=c(e,n)}return t+s>=r&&(s=r-t),{width:s,next:o(t,s,n)}}(r,s,t);return a(f)===t&&n(f)?q(e,f,r+i):D(e)}),te=t=>G(n=>{$t("string",t);const[e,[r,s]]=d(Yn(a(t),n=>t===n)(n));return s.status===Qn?e:D(r,rn.string(t))}),ne=t=>G(n=>{$t("stringI",t);const[e,[r,s]]=d(Yn(a(t),n=>t.toLowerCase()===n.toLowerCase())(n));return s.status===Qn?e:D(r,rn.stringI(t))}),ee=G(t=>{const{index:n,view:e}=t,r=e.byteLength-n;return q(t,o(n,r,e),n+r)}),re=t=>G(n=>{Ut("anyString",t);const[e,[r,s]]=d(Yn(t,()=>!0)(n));return s.status===Qn?e:D(r,rn.anyString(t))}),{Ok:se,Fail:ue,Fatal:oe}=P,ie=(...t)=>{const n=t,e="string"==typeof t[t.length-1]?n.pop():null;return G(t=>{const r=null!=e;n.forEach((t,n)=>Et("alt",t,ft(n+1,!0)));let s=r?B(e):[];for(const e of n){const[n,[u,o]]=d(e(t));if(o.status===se)return n;if(r||(s=A(s,o.errors)),o.status===oe)return V(u,s)}return D(t,s)})},ae=(t,n)=>G(e=>{const r=null!=n;Et("opt",t,ft(1,r)),r&&$t("opt",n,lt(2,!0));const[s,[u,o]]=d(t(e));if(o.status===se)return s;const i=r?B(n):o.errors;if(o.status===oe)return V(u,i);const a=q(u,null);return a[1].errors=i,a}),ce=(t,n,e)=>G(r=>{const s=null!=e;Et("def",t,ft(1,!0)),s&&$t("def",e,lt(3,!0));const[u,[o,i]]=d(t(r));return i.status===se?u:i.status===ue?q(o,n):V(o,s?B(e):i.errors)}),fe=(t,n)=>G(e=>{const r=null!=n;Et("peek",t,ft(1,r)),r&&$t("peek",n,lt(2,!0));const s=e.index,[u,o]=t(e);return o.status===se?q(u,o.value,s):o.status===ue?D(u,r?B(n):o.errors,s):D(u,r?M(n,u,o.errors):L(u,o.errors),s)}),le=(t,n)=>G(e=>{const r=null!=n;Et("empty",t,ft(1,r)),r&&$t("empty",n,lt(2,!0));const s=e.index,[u,o]=t(e);if(o.status===se&&u.index===s)return q(u,null);const i=r?B(n):o.errors;return o.status===oe?V(u,i):D(u,i)}),de=(t,n)=>G(e=>{const r=null!=n;Et("not",t,ft(1,r)),r&&$t("not",n,lt(2,!0));const s=e.index,u=r?B(n):void 0,[o,i]=t(e);return i.status===se?D(o,u,s):q(o,null,s)}),{Ok:pe,Fail:he,Fatal:ye}=P;function xe(t,n,e){return[{...t},{...n,errors:e}]}const ge=(t,n)=>G(e=>{Et("label",t,xt("1st")),$t("label",n,gt("2nd"));const[r,[s,u]]=d(t(e));return u.status===he?xe(s,u,B(n)):r}),be=t=>G(n=>{Et("attempt",t);const e=n.index,[r,[s,u]]=d(t(n));if(u.status===pe)return r;return D(s,e===s.index?u.errors:L(s,u.errors),e)}),ve=(t,n)=>G(e=>{Et("attemptM",t,xt("1st")),$t("attemptM",n,gt("2nd"));const[r,[s,u]]=d(t(e));if(u.status===pe)return r;if(u.status===he){if(1===u.errors.length&&u.errors[0].type===k.Nested){const{ctx:t,errors:e}=u.errors[0];return xe(s,u,M(n,t,e))}return xe(s,u,B(n))}return D(e,M(n,s,u.errors))}),we=(...t)=>G(n=>{Ot("sequenceB",t);const e=[],r=n.index;let s=n,u=[];for(const n of t){var o;const[t,[i,a]]=d(n(s));if(s=i,u=(null===(o=a.errors)||void 0===o?void 0:o.length)?A(u,a.errors):[],a.status===ye)return t;if(a.status===he){return D(s,r===s.index?u:L(s,u),r)}e.push(a.value)}return q(s,e)}),me=(t,n)=>G(e=>{Et("chainB",t,xt("1st")),wt("chainB",n,ht("2nd"));const r=e.index,[s,[u,o]]=d(t(e));if(o.status!==pe)return s;const i=n(o.value);Et("chainB",i,Y("the 2nd argument to return a parser"));const[a,[c,f]]=d(i(u));if(f.status===pe)return a;const l=A(o.errors,f.errors);if(f.status===ye)return V(c,l);return D(c,r===c.index?l:L(c,l),r)}),$e=(t,n)=>G(e=>{Et("applyB",t,xt("1st")),Et("applyB",n,xt("2nd"));const r=e.index,[s,[u,o]]=d(t(e));if(o.status!==pe)return s;const[i,a]=n(u),c=A(o.errors,a.errors);if(a.status===ye)return V(i,c);if(a.status===he){return D(i,r===i.index?c:L(i,c),r)}const f=a.value;return wt("applyB",f,Y("2nd argument to return a function")),q(i,f(o.value))}),ke=(t,n)=>G(e=>{Et("leftB",t,xt("1st")),Et("leftB",n,xt("2nd"));const r=e.index,[s,[u,o]]=d(t(e));if(o.status!==pe)return s;const[i,a]=n(u);if(a.status===pe)return q(i,o.value);const c=A(o.errors,a.errors);if(a.status===ye)return V(i,c);return D(i,r===i.index?c:L(i,c),r)}),Be=(t,n)=>G(e=>{Et("rightB",t,xt("1st")),Et("rightB",n,xt("2nd"));const r=e.index,[s,[u,o]]=d(t(e));if(o.status!==pe)return s;const[i,[a,c]]=d(n(u));if(c.status===pe)return i;const f=A(o.errors,c.errors);if(c.status===ye)return V(a,f);return D(a,r===a.index?f:L(a,f),r)}),Ue=(t,n)=>G(e=>{Et("andThenB",t,xt("1st")),Et("andThenB",n,xt("2nd"));const r=e.index,[s,[u,o]]=d(t(e));if(o.status!==pe)return s;const[i,a]=n(u);if(a.status===pe)return q(i,[o.value,a.value]);const c=A(o.errors,a.errors);if(a.status===ye)return V(i,c);return D(i,r===i.index?c:L(i,c),r)}),Ee=(t,n)=>G(e=>{Et("repeatB",t,xt("1st")),Ut("repeatB",n,yt("2nd"));const r=e.index,s=[];let o=e;for(const e of u(n)){const[n,[e,u]]=d(t(o));if(o=e,u.status===ye)return n;if(u.status===he){return D(o,r===o.index?u.errors:L(o,u.errors),r)}s.push(u.value)}return q(o,s)}),Oe=(t,n)=>G(e=>{Et("manyTillB",t,xt("1st")),Et("manyTillB",n,xt("2nd"));const r=e.index,s=[];let u=e;for(;;){const[e,[o,i]]=d(n(u));if(u=o,i.status===ye)return e;if(i.status===pe)break;const[a,[c,f]]=d(t(u));if(u=c,f.status===ye)return a;if(f.status===he){return D(c,r===c.index?A(f.errors,i.errors):L(c,A(f.errors,i.errors)),r)}s.push(f.value)}return q(u,s)}),Le=t=>G(n=>{mt("blockB",t);const e=t(),r=n.index;let s,u=[],o=n,i=0;for(;;){var a;const{value:t,done:n}=e.next(s);if(n)return q(o,t);Et("blockB",t,t=>`expected ${h(i+1)} yield to be to a parser; found ${w(t)}`);const[c,f]=t(o);if(o=c,u=(null===(a=f.errors)||void 0===a?void 0:a.length)?A(u,f.errors):[],f.status===ye)return V(o,u);if(f.status===he){return D(o,r===o.index?u:L(o,u),r)}s=f.value,i++}}),Me=(...t)=>{const n=t.slice(),e=n.pop();return G(t=>{Ot("pipeB",n),wt("pipeB",e,ht(h(n.length+1)));const r=t.index,s=[];let u=t,o=[];for(const t of n){var i;const[n,e]=t(u);if(u=n,o=(null===(i=e.errors)||void 0===i?void 0:i.length)?A(o,e.errors):[],e.status===ye)return V(u,o);if(e.status===he){return D(u,r===u.index?o:L(u,o),r)}s.push(e.value)}return q(u,e(...s))})},Ae=(t,n,e)=>G(r=>{var s;Et("betweenB",t,xt("1st")),Et("betweenB",n,xt("2nd")),Et("betweenB",e,xt("3rd"));const u=r.index,[o,[i,a]]=d(t(r));if(a.status!==pe)return o;const[c,f]=e(i);let l=(null===(s=f.errors)||void 0===s?void 0:s.length)?A(a.errors,f.errors):[];if(f.status===ye)return V(c,l);if(f.status===he){return D(c,u===c.index?l:L(c,l),u)}const[p,h]=n(c);if(h.status===ye)return V(p,A(l,h.errors));if(h.status===he){l=A(l,h.errors);return D(p,u===p.index?l:L(p,l),u)}return q(p,f.value)}),{Ok:Te}=P,Fe=t=>G(n=>{Et("join",t);const[e,[r,s]]=d(t(n));if(s.status!==Te)return e;const u=s.value;return kt("join",u,Y("argument to return an array")),q(r,u.join(""))}),je=t=>G(n=>{Et("compact",t);const[e,[r,s]]=d(t(n));if(s.status!==Te)return e;const u=s.value;return kt("compact",u,Y("argument to return an array")),q(r,u.filter(t=>null!=t))}),Se=(t,n)=>G(e=>{Et("value",t,xt("1st"));const[r,[s,u]]=d(t(e));return u.status===Te?q(s,n):r}),Ie=(t,n)=>G(e=>{Et("nth",t,xt("1st")),Ut("nth",n,yt("2nd"));const[r,[s,u]]=d(t(e));if(u.status!==Te)return r;const o=u.value;return kt("nth",o,Y("1st argument to return an array")),q(s,o[n])}),Ne=t=>G(n=>{Et("first",t);const[e,[r,s]]=d(t(n));if(s.status!==Te)return e;const u=s.value;return kt("first",u,Y("argument to return an array")),q(r,u[0])}),_e=t=>G(n=>{Et("second",t);const[e,[r,s]]=d(t(n));if(s.status!==Te)return e;const u=s.value;return kt("second",u,Y("argument to return an array")),q(r,u[1])}),Re=t=>G(n=>{Et("third",t);const[e,[r,s]]=d(t(n));if(s.status!==Te)return e;const u=s.value;return kt("third",u,Y("argument to return an array")),q(r,u[2])}),Ce=t=>G(n=>{Et("fourth",t);const[e,[r,s]]=d(t(n));if(s.status!==Te)return e;const u=s.value;return kt("fourth",u,Y("argument to return an array")),q(r,u[3])}),Pe=t=>G(n=>{Et("fifth",t);const[e,[r,s]]=d(t(n));if(s.status!==Te)return e;const u=s.value;return kt("fifth",u,Y("argument to return an array")),q(r,u[4])}),{Ok:ze,Fail:Ge,Fatal:qe}=P,De=t=>G(n=>q(n,t)),Ve=(t,n)=>G(e=>{Et("map",t,xt("1st")),wt("map",n,ht("2nd"));const[r,[s,u]]=d(t(e));return u.status===ze?q(s,n(u.value)):r}),We=(t,n)=>G(e=>{Et("apply",t,xt("1st")),Et("apply",n,xt("2nd"));const r=e.index,[s,[u,o]]=d(t(e));if(o.status!==ze)return s;const[i,a]=n(u);if(a.status!==ze)return W(i.index!==r,i,A(o.errors,a.errors));const c=a.value;return wt("apply",c,Y("2nd argument to return a function")),q(i,c(o.value))}),Ze=(t,n)=>G(e=>{Et("chain",t,xt("1st")),wt("chain",n,ht("2nd"));const r=e.index,[s,[u,o]]=d(t(e));if(o.status!==ze)return s;const i=n(o.value);Et("chain",i,Y("the 2nd argument to return a parser"));const[a,[c,f]]=d(i(u));return f.status===ze?a:W(c.index!==r,c,A(o.errors,f.errors))}),Xe=(t,n)=>G(e=>{Et("orElse",t,xt("1st")),Et("orElse",n,xt("2nd"));const[r,[s,u]]=d(t(e));if(u.status!==Ge)return r;const[o,[i,a]]=d(n(s));return a.status===ze?o:W(a.status===qe,i,A(u.errors,a.errors))}),Je=(t,n)=>G(e=>{Et("andThen",t,xt("1st")),Et("andThen",n,xt("2nd"));const r=e.index,[s,[u,o]]=d(t(e));if(o.status!==ze)return s;const[i,a]=n(u);return a.status===ze?q(i,[o.value,a.value]):W(i.index!==r,i,A(o.errors,a.errors))}),{Ok:He,Fail:Ke,Fatal:Qe}=P;function Ye(t){return`[${t}]: infinite loop detected; neither content nor separator parser consumed input`}const tr=(...t)=>{const n=t,e="string"==typeof t[t.length-1]?n.pop():null;return G(t=>{const r=null!=e;n.forEach((t,n)=>Et("seq",t,ft(n+1,!0)));const s=[],u=t.index;let o=r?B(e):[],i=t;for(const t of n){var a;const[n,e]=t(i);if(i=n,r||(o=(null===(a=e.errors)||void 0===a?void 0:a.length)?A(o,e.errors):[]),e.status!==He)return W(i.index!==u,i,o);s.push(e.value)}return q(i,s)})},nr=(t,n,e)=>G(r=>{const s=null!=e;Et("left",t,ft(1,!0)),Et("left",n,ft(2,!0)),s&&$t("left",e,lt(3,!0));const u=r.index,[o,i]=t(r);if(i.status!==P.Ok){const t=s?B(e):i.errors;return W(i.status===Qe,o,t)}const[a,c]=n(o),f=s?B(e):A(i.errors,c.errors);return c.status===He?q(a,i.value):W(a.index!==u,a,f)}),er=(t,n,e)=>G(r=>{const s=null!=e;Et("right",t,ft(1,!0)),Et("right",n,ft(2,!0)),s&&$t("right",e,lt(3,!0));const u=r.index,[o,i]=t(r);if(i.status!==P.Ok){const t=s?B(e):i.errors;return W(i.status===Qe,o,t)}const[a,[c,f]]=d(n(o)),l=s?B(e):A(i.errors,f.errors);return f.status===He?a:W(c.index!==u,c,l)}),rr=(t,n)=>G(e=>{const r=null!=n;mt("block",t,((t=1,n=!1)=>ct("a generator function",t,n))(1,r)),r&&$t("block",n,lt(2,!0));const s=t(),u=e.index;let o,i=r?B(n):[],a=e,c=0;for(;;){var f;const{value:t,done:n}=s.next(o);if(n)return q(a,t);Et("block",t,t=>`expected ${v(c+1)} yield to be to a parser; found ${w(t)}`);const[e,l]=t(a);if(a=e,r||(i=(null===(f=l.errors)||void 0===f?void 0:f.length)?A(i,l.errors):[]),l.status!==He)return W(a.index!==u,a,i);o=l.value,c++}}),sr=(t,n)=>G(e=>{const r=null!=n;Et("many",t,ft(1,r)),r&&$t("many",n,lt(2,!0));const s=[];let u=e;for(;;){const[e,o]=t(u);if(u=e,o.status===Qe)return V(e,r?B(n):o.errors);if(o.status===Ke)break;if(s.push(o.value),u.index>=u.view.byteLength)break}return q(u,s)}),ur=(t,n)=>G(e=>{const r=null!=n;Et("many1",t,ft(1,r)),r&&$t("many1",n,lt(2,!0));const[s,u]=t(e);if(u.status!==He)return W(u.status===Qe,s,r?B(n):u.errors);let o=s;const i=[u.value];for(;;){const[e,s]=t(o);if(o=e,s.status===Qe)return V(e,r?B(n):s.errors);if(s.status===Ke)break;if(i.push(s.value),o.index>=o.view.byteLength)break}return q(o,i)}),or=(t,n)=>G(e=>{const r=null!=n;Et("skip",t,ft(1,r)),r&&$t("skip",n,lt(2,!0));const[s,u]=t(e);return u.status===He?q(s,null):W(u.status===Qe,s,r?B(n):u.errors)}),ir=(t,n)=>G(e=>{const r=null!=n;Et("skipMany",t,ft(1,r)),r&&$t("skipMany",n,lt(2,!0));let s=e;for(;;){const[e,u]=t(s);if(s=e,u.status===Qe)return V(e,r?B(n):u.errors);if(u.status===Ke)break;if(s.index>=s.view.byteLength)break}return q(s,null)}),ar=(t,n)=>G(e=>{const r=null!=n;Et("skipMany1",t,ft(1,r)),r&&$t("skipMany1",n,lt(2,!0));const[s,u]=t(e);if(u.status!==He)return W(u.status===Qe,s,r?B(n):u.errors);let o=s;for(;;){const[e,s]=t(o);if(o=e,s.status===Qe)return V(e,r?B(n):s.errors);if(s.status===Ke)break;if(o.index>=o.view.byteLength)break}return q(o,null)}),cr=(t,n,e)=>G(r=>{const s=null!=e;Et("sepBy",t,ft(1,!0)),Et("sepBy",n,ft(2,!0)),s&&$t("sepBy",e,lt(3,!0));let u=r.index;const[o,i]=t(r);if(i.status===Qe)return V(o,s?B(e):i.errors);if(i.status===Ke)return q(o,[]);const a=[i.value];let c=o;for(;;){u=c.index;const[r,o]=n(c);if(c=r,o.status===Qe)return V(r,s?B(e):o.errors);if(o.status===Ke)break;const[i,f]=t(c);if(c=i,f.status===Qe)return V(i,s?B(e):f.errors);if(f.status===Ke)break;if(c.index===u)throw new TypeError(Ye("sepBy"));a.push(f.value)}return q(c,a,u)}),fr=(t,n,e)=>G(r=>{const s=null!=e;Et("sepBy1",t,ft(1,!0)),Et("sepBy1",n,ft(2,!0)),s&&$t("sepBy1",e,lt(3,!0));let u=r.index;const[o,i]=t(r);if(i.status!==He)return W(i.status===Qe,o,s?B(e):i.errors);const a=[i.value];let c=o;for(;;){u=c.index;const[r,o]=n(c);if(c=r,o.status===Qe)return V(r,s?B(e):o.errors);if(o.status===Ke)break;const[i,f]=t(c);if(c=i,f.status===Qe)return V(i,s?B(e):f.errors);if(f.status===Ke)break;if(c.index===u)throw new TypeError(Ye("sepBy1"));a.push(f.value)}return q(c,a,u)}),lr=(t,n,e)=>G(r=>{const s=null!=e;Et("sepEndBy",t,ft(1,!0)),Et("sepEndBy",n,ft(2,!0)),s&&$t("sepEndBy",e,lt(3,!0));let u=r.index;const[o,i]=t(r);if(i.status===Qe)return V(o,s?B(e):i.errors);if(i.status===Ke)return q(o,[]);const a=[i.value];let c=o;for(;;){u=c.index;const[r,o]=n(c);if(c=r,o.status===Qe)return V(r,s?B(e):o.errors);if(o.status===Ke)break;const[i,f]=t(c);if(c=i,f.status===Qe)return V(i,s?B(e):f.errors);if(f.status===Ke)break;if(c.index===u)throw new TypeError(Ye("sepEndBy"));a.push(f.value)}const[f,l]=n({...c,index:u});return l.status===Qe?V(f,s?B(e):l.errors):q(f,a)}),dr=(t,n,e)=>G(r=>{const s=null!=e;Et("sepEndBy1",t,ft(1,!0)),Et("sepEndBy1",n,ft(2,!0)),s&&$t("sepEndBy1",e,lt(3,!0));let u=r.index;const[o,i]=t(r);if(i.status!==He)return W(i.status===Qe,o,s?B(e):i.errors);const a=[i.value];let c=o;for(;;){u=c.index;const[r,o]=n(c);if(c=r,o.status===Qe)return V(r,s?B(e):o.errors);if(o.status===Ke)break;const[i,f]=t(c);if(c=i,f.status===Qe)return V(i,s?B(e):f.errors);if(f.status===Ke)break;if(c.index===u)throw new TypeError(Ye("sepEndBy1"));a.push(f.value)}const[f,l]=n({...c,index:u});return l.status===Qe?V(f,s?B(e):l.errors):q(f,a)}),pr=(t,n)=>G(e=>{Et("repeat",t,xt("1st")),Ut("repeat",n,yt("2nd"));const r=e.index,s=[];let o=e;for(const e of u(n)){const[n,e]=t(o);if(o=n,e.status!==He)return W(o.index!==r,o,e.errors);s.push(e.value)}return q(o,s)}),hr=(t,n,e)=>G(r=>{var s;Et("between",t,xt("1st")),Et("between",n,xt("2nd")),Et("between",e,xt("3rd"));const u=r.index,[o,[i,a]]=d(t(r));if(a.status!==He)return o;const[c,f]=e(i),l=(null===(s=f.errors)||void 0===s?void 0:s.length)?A(a.errors,f.errors):[];if(f.status!==He)return W(c.index!==u,c,l);const[p,h]=n(c);return h.status===He?q(p,f.value):W(p.index!==u,p,A(l,h.errors))}),yr=(t,n)=>G(e=>{Et("manyTill",t,xt("1st")),Et("manyTill",n,xt("2nd"));const r=e.index,s=[];let u=e;for(;;){const[e,[o,i]]=d(n(u));if(u=o,i.status===Qe)return e;if(i.status===He)break;const[a,[c,f]]=d(t(u));if(u=c,f.status===Qe)return a;if(f.status===Ke)return W(u.index!==r,u,A(f.errors,i.errors));s.push(f.value)}return q(u,s)}),xr=(...t)=>{const n=t.slice(),e=n.pop();return G(t=>{Ot("pipe",n),wt("pipe",e,ht(h(n.length+1)));const r=t.index,s=[];let u=t,o=[];for(const t of n){var i;const[n,e]=t(u);if(u=n,o=(null===(i=e.errors)||void 0===i?void 0:i.length)?A(o,e.errors):[],e.status!==He)return W(u.index!==r,u,o);s.push(e.value)}return q(u,e(...s))})};function gr(t){return n=>`expected ${t} op parser to return a function; found ${w(n)}`}const br=(t,n,e)=>G(r=>{Et("assocL",t,xt("1st")),Et("assocL",n,xt("2nd"));const[s,[o,i]]=d(t(r));if(i.status===Qe)return s;if(i.status===Ke)return q(o,e);const a=[i.value],c=[];let f=o,l=f.index,p=0;for(;;){const[e,[r,s]]=d(n(f));if(f=r,s.status===Qe)return e;if(s.status===Ke)break;const[u,[o,i]]=d(t(f));if(f=o,i.status===Qe)return u;if(i.status===Ke)break;wt("assocL",s.value,gr(h(p+1))),c.push(s.value),a.push(i.value),l=f.index,p++}let y=a[0];for(const t of u(c.length))y=c[t](y,a[t+1]);return q(f,y,l)}),vr=(t,n)=>G(e=>{Et("assoc1L",t,xt("1st")),Et("assoc1L",n,xt("2nd"));const[r,[s,o]]=d(t(e));if(o.status!==He)return r;const i=[o.value],a=[];let c=s,f=c.index,l=0;for(;;){const[e,[r,s]]=d(n(c));if(c=r,s.status===Qe)return e;if(s.status===Ke)break;const[u,[o,p]]=d(t(c));if(c=o,p.status===Qe)return u;if(p.status===Ke)break;wt("assoc1L",s.value,gr(h(l+1))),a.push(s.value),i.push(p.value),f=c.index,l++}let p=i[0];for(const t of u(a.length))p=a[t](p,i[t+1]);return q(c,p,f)}),wr=(t,n,e)=>G(r=>{Et("assocR",t,xt("1st")),Et("assocR",n,xt("2nd"));const[s,[o,i]]=d(t(r));if(i.status===Qe)return s;if(i.status===Ke)return q(o,e);const a=[i.value],c=[];let f=o,l=f.index,p=0;for(;;){const[e,[r,s]]=d(n(f));if(f=r,s.status===Qe)return e;if(s.status===Ke)break;const[u,[o,i]]=d(t(f));if(f=o,i.status===Qe)return u;if(i.status===Ke)break;wt("assocR",s.value,gr(h(p+1))),c.push(s.value),a.push(i.value),l=f.index,p++}let y=a[a.length-1];for(const t of u(c.length-1,-1))y=c[t](a[t],y);return q(f,y,l)}),mr=(t,n)=>G(e=>{Et("assoc1R",t,xt("1st")),Et("assoc1R",n,xt("2nd"));const[r,[s,o]]=d(t(e));if(o.status!==He)return r;const i=[o.value],a=[];let c=s,f=c.index,l=0;for(;;){const[e,[r,s]]=d(n(c));if(c=r,s.status===Qe)return e;if(s.status===Ke)break;const[u,[o,p]]=d(t(c));if(c=o,p.status===Qe)return u;if(p.status===Ke)break;wt("assoc1R",s.value,gr(h(l+1))),a.push(s.value),i.push(p.value),f=c.index,l++}let p=i[i.length-1];for(const t of u(a.length-1,-1))p=a[t](i[t],p);return q(c,p,f)})}])}));