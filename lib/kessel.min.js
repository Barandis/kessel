/*!
 * Copyright (c) 2020 Thomas Otterson
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy of
 * this software and associated documentation files (the "Software"), to deal in
 * the Software without restriction, including without limitation the rights to
 * use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of
 * the Software, and to permit persons to whom the Software is furnished to do so,
 * subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS
 * FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR
 * COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER
 * IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN
 * CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * 
 */
!function(t,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define([],n):"object"==typeof exports?exports.kessel=n():t.kessel=n()}(this,(function(){return function(t){var n={};function e(r){if(n[r])return n[r].exports;var u=n[r]={i:r,l:!1,exports:{}};return t[r].call(u.exports,u,u.exports,e),u.l=!0,u.exports}return e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:r})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,n){if(1&n&&(t=e(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(e.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var u in t)e.d(r,u,function(n){return t[n]}.bind(null,u));return r},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},e.p="",e(e.s=0)}([function(t,n,e){"use strict";e.r(n),e.d(n,"alpha",(function(){return on})),e.d(n,"any",(function(){return Xt})),e.d(n,"anyOf",(function(){return tn})),e.d(n,"char",(function(){return Zt})),e.d(n,"chari",(function(){return Jt})),e.d(n,"digit",(function(){return en})),e.d(n,"eof",(function(){return Yt})),e.d(n,"hex",(function(){return rn})),e.d(n,"letter",(function(){return sn})),e.d(n,"lower",(function(){return cn})),e.d(n,"noneOf",(function(){return nn})),e.d(n,"octal",(function(){return un})),e.d(n,"range",(function(){return Qt})),e.d(n,"satisfy",(function(){return Ht})),e.d(n,"satisfyL",(function(){return Kt})),e.d(n,"upper",(function(){return an})),e.d(n,"always",(function(){return fn})),e.d(n,"fail",(function(){return dn})),e.d(n,"failFatally",(function(){return ln})),e.d(n,"failUnexpected",(function(){return pn})),e.d(n,"alphaU",(function(){return An})),e.d(n,"letterU",(function(){return Sn})),e.d(n,"lowerU",(function(){return Fn})),e.d(n,"newline",(function(){return In})),e.d(n,"newlineU",(function(){return zn})),e.d(n,"regex",(function(){return On})),e.d(n,"space",(function(){return Tn})),e.d(n,"spaceU",(function(){return Mn})),e.d(n,"spaces",(function(){return Cn})),e.d(n,"spaces1",(function(){return _n})),e.d(n,"spaces1U",(function(){return Nn})),e.d(n,"spacesU",(function(){return Pn})),e.d(n,"upperU",(function(){return jn})),e.d(n,"all",(function(){return Gn})),e.d(n,"anyString",(function(){return Rn})),e.d(n,"string",(function(){return Vn})),e.d(n,"stringi",(function(){return Wn})),e.d(n,"attempt",(function(){return Yn})),e.d(n,"betweenB",(function(){return ce})),e.d(n,"blockB",(function(){return ie})),e.d(n,"bothB",(function(){return ue})),e.d(n,"chainB",(function(){return ne})),e.d(n,"choice",(function(){return Kn})),e.d(n,"countB",(function(){return se})),e.d(n,"def",(function(){return Xn})),e.d(n,"leftB",(function(){return ee})),e.d(n,"manyTillB",(function(){return oe})),e.d(n,"opt",(function(){return Qn})),e.d(n,"pipeB",(function(){return ae})),e.d(n,"rightB",(function(){return re})),e.d(n,"sequenceB",(function(){return te})),e.d(n,"between",(function(){return ve})),e.d(n,"both",(function(){return ge})),e.d(n,"chain",(function(){return de})),e.d(n,"fifth",(function(){return Ee})),e.d(n,"first",(function(){return ke})),e.d(n,"fourth",(function(){return Ue})),e.d(n,"join",(function(){return pe})),e.d(n,"left",(function(){return xe})),e.d(n,"map",(function(){return le})),e.d(n,"nth",(function(){return me})),e.d(n,"pipe",(function(){return we})),e.d(n,"right",(function(){return be})),e.d(n,"second",(function(){return $e})),e.d(n,"skip",(function(){return he})),e.d(n,"third",(function(){return Be})),e.d(n,"value",(function(){return ye})),e.d(n,"followedBy",(function(){return Ae})),e.d(n,"followedByL",(function(){return je})),e.d(n,"lookAhead",(function(){return Oe})),e.d(n,"notEmpty",(function(){return Se})),e.d(n,"notFollowedBy",(function(){return Fe})),e.d(n,"notFollowedByL",(function(){return Te})),e.d(n,"backLabel",(function(){return Ne})),e.d(n,"label",(function(){return _e})),e.d(n,"assocl",(function(){return nr})),e.d(n,"assocl1",(function(){return er})),e.d(n,"assocr",(function(){return rr})),e.d(n,"assocr1",(function(){return ur})),e.d(n,"block",(function(){return We})),e.d(n,"count",(function(){return Ye})),e.d(n,"many",(function(){return Ge})),e.d(n,"many1",(function(){return Re})),e.d(n,"manyTill",(function(){return tr})),e.d(n,"sepBy",(function(){return He})),e.d(n,"sepBy1",(function(){return Ke})),e.d(n,"sepEndBy",(function(){return Qe})),e.d(n,"sepEndBy1",(function(){return Xe})),e.d(n,"sequence",(function(){return Ve})),e.d(n,"skipMany",(function(){return Ze})),e.d(n,"skipMany1",(function(){return Je})),e.d(n,"Status",(function(){return C})),e.d(n,"error",(function(){return I})),e.d(n,"failure",(function(){return G})),e.d(n,"fatal",(function(){return z})),e.d(n,"makeParser",(function(){return _})),e.d(n,"maybeFatal",(function(){return D})),e.d(n,"ok",(function(){return N})),e.d(n,"parse",(function(){return q})),e.d(n,"run",(function(){return R})),e.d(n,"succeeded",(function(){return V})),e.d(n,"success",(function(){return W})),e.d(n,"ErrorType",(function(){return g})),e.d(n,"compound",(function(){return B})),e.d(n,"expected",(function(){return w})),e.d(n,"formatErrors",(function(){return T})),e.d(n,"generic",(function(){return m})),e.d(n,"getPosition",(function(){return M})),e.d(n,"merge",(function(){return U})),e.d(n,"nested",(function(){return $})),e.d(n,"other",(function(){return k})),e.d(n,"unexpected",(function(){return v}));const r=new TextEncoder,u=new TextDecoder;function*s(t,n,e,r){const u="number"==typeof n?t:0,s="number"==typeof n?n:t,o="number"==typeof e?0===e?1:Math.abs(e):1,i="number"==typeof e?!!r:"number"==typeof n?!!e:!!n,a=u<s;let c=u;for(;!(a?i?c>s:c>=s:i?c<s:c<=s);)yield c,c=a?c+o:c-o}function o(t,n,e){const r=Uint8Array.from({length:n},(n,r)=>e.getUint8(t+r));return u.decode(r)}function i(t){return new DataView(r.encode(t).buffer)}function a(t){return[...t].length}function c(t,n){const e=n.getUint8(t);return(128&e)>>7==0?1:(224&e)>>5==6?2:(240&e)>>4==14?3:(240&e)>>4==15?4:1}function f(t,n){const e=c(t,n);return{width:e,next:o(t,e,n)}}function d(t){return`'${t}'`}function l(t){return[t,t]}function p(t){switch(t.length){case 0:return"";case 1:return t[0];case 2:return t.join(" or ");default:{const n=t.slice(),e=n.pop();return`${n.join(", ")}, or ${e}`}}}function h(t){var n,e;const r=["th","st","nd","rd"],u=t%100;return t+(null!==(n=null!==(e=r[(u-20)%10])&&void 0!==e?e:r[u])&&void 0!==n?n:r[0])}function y(t){return void 0===t?"undefined":"function"==typeof t?_.created(t)?"parser":"function":"symbol"==typeof t?`Symbol(${t.description})`:JSON.stringify(t)}const x=/\t/gu,b=/(?:\p{Mn}|\p{Cf})/gu,g={Expected:Symbol("expected"),Unexpected:Symbol("unexpected"),Generic:Symbol("generic"),Nested:Symbol("nested"),Compound:Symbol("compound"),Other:Symbol("other")};function w(t){return[{type:g.Expected,label:t}]}function v(t){return[{type:g.Unexpected,label:t}]}function m(t){return[{type:g.Generic,label:t}]}function k(t){return[{type:g.Other,label:t}]}function $(t,n){return 1===n.length&&n[0].type===g.Nested?n:[{type:g.Nested,state:t,errors:n}]}function B(t,n,e){return 1===e.length&&e[0].type===g.Nested?[{type:g.Compound,state:e.state,errors:e.errors,label:t}]:[{type:g.Compound,state:n,errors:e,label:t}]}function U(t,n){return[...t,...n]}function E(t,n){const e=n.getUint8(t);if(10===e||11===e||12===e)return{newline:!0,skip:1};if(13===e){if(t<n.byteLength-1){const r=n.getUint8(t+1);if(13===e&&10===r)return{newline:!0,skip:2}}return{newline:!0,skip:1}}if(t<n.byteLength-1){const r=n.getUint8(t+1);if(194===e&&133===r)return{newline:!0,skip:2};if(t<n.byteLength-2){const u=n.getUint8(t+2);if(226===e&&128===r&&(168===u||169===u))return{newline:!0,skip:3}}}return{newline:!1,skip:c(t,n)}}function L(t,n){let e=0,r=1,u=0;for(;u<n.byteLength;){const{newline:s,skip:o}=E(u,n);if(s){if(u+o>t)return{start:e,end:u-1,lineno:r};r++,e=u+o}u+=o}return{start:e,end:n.byteLength-1,lineno:r}}function O(t,n,e){let r=0,u=e;for(;u<t&&u<n.byteLength;)u+=c(u,n),r++;return r}function S(t,n,e){const r=[];let u=x.exec(n);for(;null!==u;)r.push(u.index),u=x.exec(n);let s=0,o=0,i=n;for(const n of r){const r=n+s,u=e-r%e;r<t+o&&(o+=u-1),s+=u-1,i=i.substring(0,r)+" ".repeat(u)+i.substring(r+1)}return{line:i,colIndex:o+t}}function A(t,n){let e=t;const r=[];let u=b.exec(n);for(;null!==u;)r.push(u.index),u.index<e&&e--,u=b.exec(n);return{colno:e+1,length:a(n)-r.length}}function j(t,n,e,r){const u=" ".repeat(r);return t.map(t=>{const{index:s,view:o}=t.state;return(t.label?`\n${u}${t.label} could not be parsed because:\n\n`:`\n${u}The parser backtracked after:\n\n`)+F(t.errors,s,o,n,e,r+2)}).join("")}function F(t,n,e,r,u,s=0){const{start:i,end:a,lineno:c}=L(n,e),f=O(n,e,i),d=" ".repeat(s),l=o(i,a-i+1,e),{colIndex:h,line:y}=S(f,l,r),{colno:x,length:b}=A(h,y),w=`${d}Parse error at (line ${c}, column ${x}):`,v=function(t,n,e,r,u=0){const s=" ".repeat(u);if(e<=r&&n<=r)return`${s}${t}\n${s}${" ".repeat(e-1)}^`;if(e<=r-3)return`${s}${t.substring(0,r-3)}...\n${s}${" ".repeat(e-1)}^`;if(e>=n-r+3){const u=n-r+3,o=e-(n-r);return`${s}...${t.substring(u)}\n${s}${" ".repeat(o-1)}^`}const o=e-1-Math.ceil(r/2)+3,i=e-1+Math.floor(r/2)-3;return`${s}...${t.substring(o,i)}...\n${s}${" ".repeat(Math.ceil(r/2))}^`}(y,b,x,u,s),m=t.find(t=>t.type===g.Generic),k=t.find(t=>t.type===g.Unexpected),$=p(t.filter(t=>t.type===g.Expected).map(t=>t.label)),B=t.filter(t=>t.type===g.Nested),U=t.filter(t=>t.type===g.Compound),E=k?`${d}Unexpected ${k.label}\n`:"",F=$.length?`${d}Expected ${$}\n`:"",T=m?`${d}${m.label}\n`:"",M=j(B,r,u,s),C=j(U,r,u,s);return function(t,n){let e=t;for(;"\n"===e[e.length-1];)e=e.substring(0,e.length-1);return e+"\n".repeat(n)}(`${w}\n\n${v}\n${E}${F}${T}${0===t.length?d+"Unknown error(s)\n":""}${n>=e.byteLength?d+"Note: failure occurred at the end of input\n":""}${C}${M}`,2)}function T(t,n,e=8,r=72,u=F){const{index:s,view:o}=t;return u(n.errors,s,o,e,r)}function M(t,n=8){const{index:e,view:r}=t,{start:u,end:s,lineno:i}=L(e,r),a=O(e,r,u),c=o(u,s-u+1,r),{colIndex:f,line:d}=S(a,c,n),{colno:l,_:p}=A(f,d);return{line:i,column:l}}const C={Ok:Symbol("ok"),Error:Symbol("error"),Fatal:Symbol("fatal")};function P(t){const n="Parser input must be a string, a typed array, an array buffer, or a data view; parser input was "+typeof t;return{view:(t=>{if("string"==typeof t)return i(t);if((e=t)instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Uint16Array||e instanceof Uint32Array||e instanceof Int8Array||e instanceof Int16Array||e instanceof Int32Array||e instanceof Float32Array||e instanceof Float64Array)return new DataView(t.buffer);var e;if(t instanceof ArrayBuffer)return new DataView(t);if(t instanceof DataView)return t;throw new Error(n)})(t),index:0}}const _=function(t,n="created"){const e=new WeakSet;return Object.defineProperty((...n)=>{const r=t(...n);return e.add(r),r},n,{value:e.has.bind(e)})}(t=>t);function N(t,n=null,e=t.index){return[{...t,index:e},{status:C.Ok,value:n}]}function I(t,n=[],e=t.index){return[{...t,index:e},{status:C.Error,errors:n}]}function z(t,n=[],e=t.index){return[{...t,index:e},{status:C.Fatal,errors:n}]}function D(t,n,e=[],r=n.index){return[{...n,index:r},{status:t?C.Fatal:C.Error,errors:e}]}function q(t,n){return t(P(n))}function V(t){return t[1].status===C.Ok}function W(t){return V(t)?t[1].value:null}function G(t){return V(t)?null:T(...t)}function R(t,n){const[e,r]=t(P(n));if(r.status===C.Ok)return r.value;throw new Error(T(e,r))}const Z=t=>n=>`expected ${t}; found ${y(n)}`,J=Z("a one-character string"),H=Z("a function"),K=Z("a string"),Q=Z("an array"),X=Z("a string or an array of characters"),Y=Z("a string or a regular expression"),tt=Z("a number"),nt=Z("a parser"),et=(t,n)=>e=>`expected ${n} argument to be ${t}; found ${y(e)}`,rt=t=>et("a one-character string",t),ut=t=>et("a function",t),st=t=>et("a number",t),ot=t=>et("a parser",t),it=t=>et("a string",t);function at(t,n,e=J){if("string"!=typeof n||1!==a(n))throw new Error(`[${t}]: ${e(n)}`)}function ct(t,n,e=H){if("function"!=typeof n||_.created(n))throw new Error(`[${t}]: ${e(n)}`)}function ft(t,n,e=K){if("string"!=typeof n)throw new Error(`[${t}]: ${e(n)}`)}function dt(t,n,e=Q){if(!Array.isArray(n))throw new Error(`[${t}]: ${e(n)}`)}function lt(t,n,e=X){if(!(Array.isArray(n)&&n.every(t=>"string"==typeof t&&1===a(t))||"string"==typeof n))throw new Error(`[${t}]: ${e(n)}`)}function pt(t,n,e=tt){if("number"!=typeof n)throw new Error(`[${t}]: ${e(n)}`)}function ht(t,n,e=nt){if("function"!=typeof n||!_.created(n))throw new Error(`[${t}]: ${e(n)}`)}const yt="a Unicode alphanumeric character",xt="any character",bt=t=>"any of "+p(t.map(t=>`'${t}'`)),gt=t=>`a string of ${t} characters`,wt=t=>d(t),vt=t=>d(t),mt="a digit",kt="end of input",$t="a hexadecimal digit",Bt="a letter",Ut="a Unicode letter",Et="a lowercase letter",Lt="a Unicode lowercase letter",Ot="a newline",St="a Unicode newline",At=t=>"none of "+p(t.map(t=>`'${t}'`)),jt="an octal digit",Ft=(t,n)=>`a character between '${t}' and '${n}'`,Tt=t=>"a string matching "+t,Mt="a whitespace character",Ct="zero or more whitespace characters",Pt="one or more whitespace characters",_t="zero or more Unicode whitespace characters",Nt="one or more Unicode whitespace characters",It="a Unicode whitespace character",zt=t=>d(t),Dt=t=>d(t),qt="an uppercase letter",Vt="a Unicode uppercase letter",Wt={alpha:w("an alphanumeric character"),alphaU:w(yt),any:w(xt),anyOf:t=>w(bt(t)),anyString:t=>w(gt(t)),char:t=>w(wt(t)),chari:t=>w(vt(t)),digit:w(mt),eof:w(kt),hex:w($t),letter:w(Bt),letterU:w(Ut),lower:w(Et),lowerU:w(Lt),newline:w(Ot),newlineU:w(St),noneOf:t=>w(At(t)),octal:w(jt),range:(t,n)=>w(Ft(t,n)),regex:t=>w(Tt(t)),space:w(Mt),spaces:w(Ct),spaces1:w(Pt),spacesU:w(_t),spaces1U:w(Nt),spaceU:w(It),string:t=>w(zt(t)),stringi:t=>w(Dt(t)),upper:w(qt),upperU:w(Vt)},{Ok:Gt}=C,Rt=t=>_(n=>{const{index:e,view:r}=n;if(e>=r.byteLength)return I(n);const{width:u,next:s}=f(e,r);return t(s)?N(n,s,e+u):I(n)}),Zt=t=>_(n=>{at("char",t);const[e,[r,u]]=l(Rt(n=>t===n)(n));return u.status===Gt?e:I(r,Wt.char(t))}),Jt=t=>_(n=>{at("chari",t);const[e,[r,u]]=l(Rt(n=>t.toLowerCase()===n.toLowerCase())(n));return u.status===Gt?e:I(r,Wt.chari(t))}),Ht=t=>_(n=>(ct("satisfy",t),Rt(t)(n))),Kt=(t,n)=>_(e=>{ct("satisfyL",t,ut("1st")),ft("satisfyL",n,it("2nd"));const[r,[u,s]]=l(Rt(t)(e));return s.status===Gt?r:I(u,w(n))}),Qt=(t,n)=>_(e=>{at("range",t,rt("1st")),at("range",n,rt("2nd"));const[r,[u,s]]=l(Rt(e=>e>=t&&e<=n)(e));return s.status===Gt?r:I(u,Wt.range(t,n))}),Xt=_(t=>{const{index:n,view:e}=t;if(n>=e.byteLength)return I(t,Wt.any);const{width:r,next:u}=f(n,e);return N(t,u,n+r)}),Yt=_(t=>{const{index:n,view:e}=t;return n>=e.byteLength?N(t,null):I(t,Wt.eof)}),tn=t=>_(n=>{lt("anyOf",t);const{index:e,view:r}=n,{width:u,next:s}=f(e,r),o=[...t];return o.includes(s)?N(n,s,e+u):I(n,Wt.anyOf(o))}),nn=t=>_(n=>{lt("noneOf",t);const{index:e,view:r}=n,{width:u,next:s}=f(e,r),o=[...t];return o.includes(s)?I(n,Wt.noneOf(o)):N(n,s,e+u)}),en=_(t=>{const[n,[e,r]]=l(Rt(t=>t>="0"&&t<="9")(t));return r.status===Gt?n:I(e,Wt.digit)}),rn=_(t=>{const[n,[e,r]]=l(Rt(t=>t>="0"&&t<="9"||t>="a"&&t<="f"||t>="A"&&t<="F")(t));return r.status===Gt?n:I(e,Wt.hex)}),un=_(t=>{const[n,[e,r]]=l(Rt(t=>t>="0"&&t<="7")(t));return r.status===Gt?n:I(e,Wt.octal)}),sn=_(t=>{const[n,[e,r]]=l(Rt(t=>t>="a"&&t<="z"||t>="A"&&t<="Z")(t));return r.status===Gt?n:I(e,Wt.letter)}),on=_(t=>{const[n,[e,r]]=l(Rt(t=>t>="a"&&t<="z"||t>="A"&&t<="Z"||t>="0"&&t<="9")(t));return r.status===Gt?n:I(e,Wt.alpha)}),an=_(t=>{const[n,[e,r]]=l(Rt(t=>t>="A"&&t<="Z")(t));return r.status===Gt?n:I(e,Wt.upper)}),cn=_(t=>{const[n,[e,r]]=l(Rt(t=>t>="a"&&t<="z")(t));return r.status===Gt?n:I(e,Wt.lower)}),fn=t=>_(n=>N(n,t)),dn=t=>_(n=>(ft("fail",t),I(n,m(t)))),ln=t=>_(n=>(ft("failFatally",t),z(n,m(t)))),pn=t=>_(n=>(ft("failUnexpected",t),I(n,v(t)))),{Ok:hn}=C,yn=/^\p{Alphabetic}/u,xn=/^(?:\p{Alphabetic}|\p{N})/u,bn=/^(?:\p{Uppercase}|\p{Lt})/u,gn=/^\p{Lowercase}/u,wn=/^(?:\r\n|[\r\n\t ])/,vn=/^(?:\r\n|\p{White_Space})/u,mn=/^[\r\n\t ]*/,kn=/^\p{White_Space}*/u,$n=/^[\r\n\t ]+/,Bn=/^\p{White_Space}+/u,Un=/^(?:\r\n|\r|\n)/,En=/^(?:\r\n|[\r\n\u0085\u2028\u2029])/u,Ln=t=>_(n=>{const{index:e,view:r}=n,u=o(e,r.byteLength-e,r).match(t);return u?N(n,u[0],e+i(u[0]).byteLength):I(n)}),On=t=>_(n=>{(function(t,n,e=Y){const r=Object.prototype.toString.call(n);if("string"!=typeof n&&"[object RegExp]"!==r)throw new Error(`[${t}]: ${e(n)}`)})("regex",t);let e="string"==typeof t?new RegExp(t):t;const{source:r,flags:u}=e;if("^"!==r[0]){e=new RegExp("^"+r,u)}const[s,[o,i]]=l(Ln(e)(n));return i.status===hn?s:I(o,Wt.regex(e))}),Sn=_(t=>{const[n,[e,r]]=l(Ln(yn)(t));return r.status===hn?n:I(e,Wt.letterU)}),An=_(t=>{const[n,[e,r]]=l(Ln(xn)(t));return r.status===hn?n:I(e,Wt.alphaU)}),jn=_(t=>{const[n,[e,r]]=l(Ln(bn)(t));return r.status===hn?n:I(e,Wt.upperU)}),Fn=_(t=>{const[n,[e,r]]=l(Ln(gn)(t));return r.status===hn?n:I(e,Wt.lowerU)}),Tn=_(t=>{const[n,[e,r]]=l(Ln(wn)(t));return r.status===hn?n:I(e,Wt.space)}),Mn=_(t=>{const[n,[e,r]]=l(Ln(vn)(t));return r.status===hn?n:I(e,Wt.spaceU)}),Cn=_(t=>{const[n,e]=Ln(mn)(t);return N(n,null)}),Pn=_(t=>{const[n,e]=Ln(kn)(t);return N(n,null)}),_n=_(t=>{const[n,e]=Ln($n)(t);return e.status===hn?N(n,null):I(n,Wt.spaces1)}),Nn=_(t=>{const[n,e]=Ln(Bn)(t);return e.status===hn?N(n,null):I(n,Wt.spaces1U)}),In=_(t=>{const[n,[e,r]]=l(Ln(Un)(t));return r.status===hn?n:I(e,Wt.newline)}),zn=_(t=>{const[n,[e,r]]=l(Ln(En)(t));return r.status===hn?n:I(e,Wt.newlineU)}),{Ok:Dn}=C,qn=(t,n)=>_(e=>{if(t<1)return N(e,"");const{index:r,view:u}=e;if(r>=u.byteLength)return I(e);const{width:i,next:f}=function(t,n,e){const r=n.byteLength;let u=0;for(const o of s(e)){const e=t+u;if(e>=r)break;u+=c(e,n)}return t+u>=r&&(u=r-t),{width:u,next:o(t,u,n)}}(r,u,t);return a(f)===t&&n(f)?N(e,f,r+i):I(e)}),Vn=t=>_(n=>{ft("string",t);const[e,[r,u]]=l(qn(a(t),n=>t===n)(n));return u.status===Dn?e:I(r,Wt.string(t))}),Wn=t=>_(n=>{ft("stringi",t);const[e,[r,u]]=l(qn(a(t),n=>t.toLowerCase()===n.toLowerCase())(n));return u.status===Dn?e:I(r,Wt.stringi(t))}),Gn=_(t=>{const{index:n,view:e}=t,r=e.byteLength-n;return N(t,o(n,r,e),n+r)}),Rn=t=>_(n=>{pt("anyString",t);const[e,[r,u]]=l(qn(t,()=>!0)(n));return u.status===Dn?e:I(r,Wt.anyString(t))}),{Ok:Zn,Error:Jn,Fatal:Hn}=C,Kn=(...t)=>_(n=>{for(const[n,e]of t.entries())ht("choice",e,ot(h(n+1)));let e=[];for(const r of t){const[t,[u,s]]=l(r(n));if(s.status===Zn)return t;if(e=U(e,s.errors),s.status===Hn)return z(u,e)}return I(n,e)}),Qn=t=>_(n=>{ht("opt",t);const[e,[r,u]]=l(t(n));return u.status===Hn?e:N(r,null)}),Xn=(t,n)=>_(e=>{ht("def",t,ot("1st"));const[r,[u,s]]=l(t(e));return s.status!==Jn?r:N(u,n)}),Yn=t=>_(n=>{ht("attempt",t);const e=n.index,[r,[u,s]]=l(t(n));if(s.status!==Zn){return I(u,e===u.index?s.errors:$(u,s.errors),e)}return r}),te=(...t)=>_(n=>{for(const[n,e]of t.entries())ht("sequenceB",e,ot(h(n+1)));const e=[],r=n.index;let u=n;for(const n of t){const[t,[s,o]]=l(n(u));if(u=s,o.status===Hn)return t;if(o.status===Jn){return I(u,r===u.index?o.errors:$(u,o.errors),r)}null!==o.value&&e.push(o.value)}return N(u,e)}),ne=(t,n)=>_(e=>{ht("chainB",t,ot("1st")),ct("chainB",n,ut("2nd"));const r=e.index,[u,[s,o]]=l(t(e));if(o.status!==Zn)return u;const[i,[a,c]]=l(n(o.value)(s));if(c.status!==Jn)return i;return I(a,r===a.index?c.errors:$(a,c.errors),r)}),ee=(t,n)=>_(e=>{ht("leftB",t,ot("1st")),ht("leftB",n,ot("2nd"));const r=e.index,[u,[s,o]]=l(t(e));if(o.status!==Zn)return u;const[i,[a,c]]=l(n(s));if(c.status===Hn)return i;if(c.status===Zn)return N(a,o.value);return I(a,r===a.index?c.errors:$(a,c.errors),r)}),re=(t,n)=>_(e=>{ht("rightB",t,ot("1st")),ht("rightB",n,ot("2nd"));const r=e.index,[u,[s,o]]=l(t(e));if(o.status!==C.Ok)return u;const[i,[a,c]]=l(n(s));if(c.status!==Jn)return i;return I(a,r===a.index?c.errors:$(a,c.errors),r)}),ue=(t,n)=>_(e=>{ht("bothB",t,ot("1st")),ht("bothB",n,ot("2nd"));const r=e.index,[u,[s,o]]=l(t(e));if(o.status!==Zn)return u;const[i,[a,c]]=l(n(s));if(c.status===Hn)return i;if(c.status===Zn)return N(a,[o.value,c.value]);return I(a,r===a.index?c.errors:$(a,c.errors),r)}),se=(t,n)=>_(e=>{ht("countB",t,ot("1st")),pt("countB",n,st("2nd"));const r=e.index,u=[];let o=e;for(const e of s(n)){const[n,[e,s]]=l(t(o));if(o=e,s.status===Hn)return n;if(s.status===Jn){return I(o,r===o.index?s.errors:$(o,s.errors),r)}u.push(s.value)}return N(o,u)}),oe=(t,n)=>_(e=>{ht("manyTillB",t,ot("1st")),ht("manyTillB",n,ot("2nd"));const r=e.index,u=[];let s=e;for(;;){const[e,[o,i]]=l(n(s));if(s=o,i.status===Hn)return e;if(i.status===Zn)break;const[a,[c,f]]=l(t(s));if(s=c,f.status===Hn)return a;if(f.status===Jn){return I(c,r===c.index?U(f.errors,i.errors):$(c,U(f.errors,i.errors)),r)}u.push(f.value)}return N(s,u)}),ie=t=>_(n=>{const e=t(),r=n.index;let u,s=n,o=0;for(;;){const{value:t,done:n}=e.next(u);if(n)return N(s,t);ht("blockB",t,t=>`expected ${h(o+1)} yield to be to a parser; found ${y(t)}`);const[i,[a,c]]=l(t(s));if(s=a,c.status===Hn)return i;if(c.status===Jn)return I(a,c.errors,r);u=c.value,o++}}),ae=(...t)=>_(n=>{const e=t.pop();for(const[n,e]of t.entries())ht("pipeB",e,ot(h(n+1)));ct("pipeB",e,ut(h(t.length+1)));const r=n.index,u=[];let s=n;for(const n of t){const[t,[e,o]]=l(n(s));if(s=e,o.status===Hn)return t;if(o.status===Jn)return I(s,o.errors,r);u.push(o.value)}return N(s,e(...u))}),ce=(t,n,e)=>_(r=>{ht("betweenB",t,ot("1st")),ht("betweenB",n,ot("2nd")),ht("betweenB",e,ot("3rd"));const u=r.index,[s,[o,i]]=l(t(r));if(i.status!==Zn)return s;const[a,[c,f]]=l(e(o));if(f.status===Hn)return a;if(f.status===Jn)return I(c,f.errors,u);const[d,[p,h]]=l(n(c));return h.status===Hn?d:h.status===Jn?I(p,h.errors,u):N(p,f.value)}),{Ok:fe}=C,de=(t,n)=>_(e=>{ht("chain",t,ot("1st")),ct("chain",n,ut("2nd"));const r=e.index,[u,[s,o]]=l(t(e));if(o.status!==fe)return u;const i=n(o.value);ht("chain",i,Z("the 2nd argument to return a parser"));const[a,[c,f]]=l(i(s));return f.status===fe?a:D(c.index!==r,c,f.errors)}),le=(t,n)=>_(e=>{ht("map",t,ot("1st")),ct("map",n,ut("2nd"));const[r,[u,s]]=l(t(e));return s.status===fe?N(u,n(s.value)):r}),pe=t=>_(n=>{ht("join",t);const[e,[r,u]]=l(t(n));return u.status===fe?N(r,u.value.join("")):e}),he=t=>_(n=>{ht("skip",t);const[e,[r,u]]=l(t(n));return u.status===fe?N(r,null):e}),ye=(t,n)=>_(e=>{ht("value",t,ot("1st"));const[r,[u,s]]=l(t(e));return s.status===fe?N(u,n):r}),xe=(t,n)=>_(e=>{ht("left",t,ot("1st")),ht("left",n,ot("2nd"));const r=e.index,[u,[s,o]]=l(t(e));if(o.status!==fe)return u;const[i,a]=n(s);return a.status===fe?N(i,o.value):D(i.index!==r,i,a.errors)}),be=(t,n)=>_(e=>{ht("right",t,ot("1st")),ht("right",n,ot("2nd"));const r=e.index,[u,[s,o]]=l(t(e));if(o.status!==C.Ok)return u;const[i,[a,c]]=l(n(s));return c.status===fe?i:D(a.index!==r,a,c.errors)}),ge=(t,n)=>_(e=>{ht("both",t,ot("1st")),ht("both",n,ot("2nd"));const r=e.index,[u,[s,o]]=l(t(e));if(o.status!==fe)return u;const[i,a]=n(s);return a.status===fe?N(i,[o.value,a.value]):D(i.index!==r,i,a.errors)}),we=(...t)=>_(n=>{const e=t.pop();for(const[n,e]of t.entries())ht("pipe",e,ot(h(n+1)));ct("pipe",e,ut(h(t.length+1)));const r=n.index,u=[];let s=n;for(const n of t){const[t,e]=n(s);if(s=t,e.status!==fe)return D(s.index!==r,s,e.errors);u.push(e.value)}return N(s,e(...u))}),ve=(t,n,e)=>_(r=>{ht("between",t,ot("1st")),ht("between",n,ot("2nd")),ht("between",e,ot("3rd"));const u=r.index,[s,[o,i]]=l(t(r));if(i.status!==fe)return s;const[a,c]=e(o);if(c.status!==fe)return D(a.index!==u,a,c.errors);const[f,d]=n(a);return d.status===fe?N(f,c.value):D(f.index!==u,f,d.errors)}),me=(t,n)=>_(e=>{ht("nth",t,ot("1st")),pt("nth",n,st("2nd"));const[r,[u,s]]=l(t(e));if(s.status!==fe)return r;const o=s.value;return dt("nth",o,Z("1st argument to return an array")),N(u,o[n])}),ke=t=>_(n=>{ht("first",t);const[e,[r,u]]=l(t(n));if(u.status!==fe)return e;const s=u.value;return dt("first",s,Z("argument to return an array")),N(r,s[0])}),$e=t=>_(n=>{ht("second",t);const[e,[r,u]]=l(t(n));if(u.status!==fe)return e;const s=u.value;return dt("second",s,Z("argument to return an array")),N(r,s[1])}),Be=t=>_(n=>{ht("third",t);const[e,[r,u]]=l(t(n));if(u.status!==fe)return e;const s=u.value;return dt("third",s,Z("argument to return an array")),N(r,s[2])}),Ue=t=>_(n=>{ht("fourth",t);const[e,[r,u]]=l(t(n));if(u.status!==fe)return e;const s=u.value;return dt("fourth",s,Z("argument to return an array")),N(r,s[3])}),Ee=t=>_(n=>{ht("fifth",t);const[e,[r,u]]=l(t(n));if(u.status!==fe)return e;const s=u.value;return dt("fifth",s,Z("argument to return an array")),N(r,s[4])}),{Ok:Le}=C,Oe=t=>_(n=>{ht("lookAhead",t);const e=n.index,[r,u]=t(n);return u.status===Le?N(r,u.value,e):I(r,u.errors,e)}),Se=t=>_(n=>{ht("notEmpty",t);const e=n.index,[r,[u,s]]=l(t(n));return s.status!==Le||u.index!==e?r:I(u)}),Ae=t=>_(n=>{ht("followedBy",t);const e=n.index,[r,u]=t(n);return u.status===Le?N(r,null,e):I(r,void 0,e)}),je=(t,n)=>_(e=>{ht("followedByL",t,ot("1st")),ft("followedByL",n,it("2nd"));const r=e.index,[u,s]=t(e);return s.status===Le?N(u,null,r):I(u,w(n),r)}),Fe=t=>_(n=>{ht("notFollowedBy",t);const e=n.index,[r,u]=t(n);return u.status===Le?I(r,void 0,e):N(r,null,e)}),Te=(t,n)=>_(e=>{ht("notFollowedByL",t,ot("1st")),ft("notFollowedByL",n,it("2nd"));const r=e.index,[u,s]=t(e);return s.status===Le?I(u,w(n),r):N(u,null,r)}),{Ok:Me}=C,{Nested:Ce}=g;function Pe(t,n,e){return[{...t},{...n,errors:e}]}const _e=(t,n)=>_(e=>{ht("label",t,ot("1st")),ft("label",n,it("2nd"));const r=e.index,[u,[s,o]]=l(t(e));return r===s.index?Pe(s,o,w(n)):u}),Ne=(t,n)=>_(e=>{ht("backLabel",t,ot("1st")),ft("backLabel",n,it("2nd"));const r=e.index,[u,[s,o]]=l(t(e));if(o.status===Me)return r===s.index?Pe(s,o,w(n)):u;if(r===s.index){if(1===o.errors.length&&o.errors[0].type===Ce){const{state:t,errors:e}=o.errors[0];return Pe(s,o,B(n,t,e))}return Pe(s,o,w(n))}return z(e,B(n,s,o.errors))}),{Ok:Ie,Error:ze,Fatal:De}=C;function qe(t){return`[${t}]: infinite loop detected; neither content nor separator parser consumed input`}const Ve=(...t)=>_(n=>{for(const[n,e]of t.entries())ht("sequence",e,ot(h(n+1)));const e=[],r=n.index;let u=n;for(const n of t){const[t,s]=n(u);if(u=t,s.status!==Ie)return D(u.index!==r,u,s.errors);null!==s.value&&e.push(s.value)}return N(u,e)}),We=t=>_(n=>{const e=t(),r=n.index;let u,s=n,o=0;for(;;){const{value:t,done:n}=e.next(u);if(n)return N(s,t);ht("block",t,t=>`expected ${h(o+1)} yield to be to a parser; found ${y(t)}`);const[i,a]=t(s);if(s=i,a.status!==Ie)return D(s.index!==r,s,a.errors);u=a.value,o++}}),Ge=t=>_(n=>{ht("many",t);const e=[];let r=n;for(;;){const[n,[u,s]]=l(t(r));if(r=u,s.status===De)return n;if(s.status===ze)break;if(null!==s.value&&e.push(s.value),r.index>=r.view.byteLength)break}return N(r,e)}),Re=t=>_(n=>{ht("many1",t);const[e,[r,u]]=l(t(n));if(u.status!==Ie)return e;let s=r;const o=[u.value];for(;;){const[n,[e,r]]=l(t(s));if(s=e,r.status===De)return n;if(r.status===ze)break;if(null!==r.value&&o.push(r.value),s.index>=s.view.byteLength)break}return N(s,o)}),Ze=t=>_(n=>{ht("skipMany",t);let e=n;for(;;){const[n,[r,u]]=l(t(e));if(e=r,u.status===De)return n;if(u.status===ze)break;if(e.index>=e.view.byteLength)break}return N(e,null)}),Je=t=>_(n=>{ht("skipMany1",t);const[e,[r,u]]=l(t(n));if(u.status!==Ie)return e;let s=r;for(;;){const[n,[e,r]]=l(t(s));if(s=e,r.status===De)return n;if(r.status===ze)break;if(s.index>=s.view.byteLength)break}return N(s,null)}),He=(t,n)=>_(e=>{ht("sepBy",t,ot("1st")),ht("sepBy",n,ot("2nd"));let r=e.index;const[u,[s,o]]=l(t(e));if(o.status===De)return u;if(o.status===ze)return N(s,[]);const i=[o.value];let a=s;for(;;){r=a.index;const[e,[u,s]]=l(n(a));if(a=u,s.status===De)return e;if(s.status===ze)break;const[o,[c,f]]=l(t(a));if(a=c,f.status===De)return o;if(f.status===ze)break;if(a.index===r)throw new TypeError(qe("sepBy"));i.push(f.value)}return N(a,i,r)}),Ke=(t,n)=>_(e=>{ht("sepBy1",t,ot("1st")),ht("sepBy1",n,ot("2nd"));let r=e.index;const[u,[s,o]]=l(t(e));if(o.status!==Ie)return u;const i=[o.value];let a=s;for(;;){r=a.index;const[e,[u,s]]=l(n(a));if(a=u,s.status===De)return e;if(s.status===ze)break;const[o,[c,f]]=l(t(a));if(a=c,f.status===De)return o;if(f.status===ze)break;if(a.index===r)throw new TypeError(qe("sepBy1"));i.push(f.value)}return N(a,i,r)}),Qe=(t,n)=>_(e=>{ht("sepEndBy",t,ot("1st")),ht("sepEndBy",n,ot("2nd"));let r=e.index;const[u,[s,o]]=l(t(e));if(o.status===De)return u;if(o.status===ze)return N(s,[]);const i=[o.value];let a=s;for(;;){r=a.index;const[e,[u,s]]=l(n(a));if(a=u,s.status===De)return e;if(s.status===ze)break;const[o,[c,f]]=l(t(a));if(a=c,f.status===De)return o;if(f.status===ze)break;if(a.index===r)throw new TypeError(qe("sepEndBy"));i.push(f.value)}const[c,f]=n({...a,index:r});return N(c,i)}),Xe=(t,n)=>_(e=>{ht("sepEndBy1",t,ot("1st")),ht("sepEndBy1",n,ot("2nd"));let r=e.index;const[u,[s,o]]=l(t(e));if(o.status!==Ie)return u;const i=[o.value];let a=s;for(;;){r=a.index;const[e,[u,s]]=l(n(a));if(a=u,s.status===De)return e;if(s.status===ze)break;const[o,[c,f]]=l(t(a));if(a=c,f.status===De)return o;if(f.status===ze)break;if(a.index===r)throw new TypeError(qe("sepEndBy1"));i.push(f.value)}const[c,f]=n({...a,index:r});return N(c,i)}),Ye=(t,n)=>_(e=>{ht("count",t,ot("1st")),pt("count",n,st("2nd"));const r=e.index,u=[];let o=e;for(const e of s(n)){const[n,e]=t(o);if(o=n,e.status!==Ie)return D(o.index!==r,o,e.errors);u.push(e.value)}return N(o,u)}),tr=(t,n)=>_(e=>{ht("manyTill",t,ot("1st")),ht("manyTill",n,ot("2nd"));const r=e.index,u=[];let s=e;for(;;){const[e,[o,i]]=l(n(s));if(s=o,i.status===De)return e;if(i.status===Ie)break;const[a,[c,f]]=l(t(s));if(s=c,f.status===De)return a;if(f.status===ze)return D(s.index!==r,s,U(f.errors,i.errors));null!==f.value&&u.push(f.value)}return N(s,u)}),nr=(t,n,e)=>_(r=>{ht("assocl",t,ot("1st")),ht("assocl",n,ot("2nd"));const[u,[o,i]]=l(t(r));if(i.status===De)return u;if(i.status===ze)return N(o,e);const a=[i.value],c=[];let f=o,d=f.index;for(;;){const[e,[r,u]]=l(n(f));if(f=r,u.status===De)return e;if(u.status===ze)break;const[s,[o,i]]=l(t(f));if(f=o,i.status===De)return s;if(i.status===ze)break;c.push(u.value),a.push(i.value),d=f.index}let p=a[0];for(const t of s(c.length))p=c[t](p,a[t+1]);return N(f,p,d)}),er=(t,n)=>_(e=>{ht("assocl1",t,ot("1st")),ht("assocl1",n,ot("2nd"));const[r,[u,o]]=l(t(e));if(o.status!==Ie)return r;const i=[o.value],a=[];let c=u,f=c.index;for(;;){const[e,[r,u]]=l(n(c));if(c=r,u.status===De)return e;if(u.status===ze)break;const[s,[o,d]]=l(t(c));if(c=o,d.status===De)return s;if(d.status===ze)break;a.push(u.value),i.push(d.value),f=c.index}let d=i[0];for(const t of s(a.length))d=a[t](d,i[t+1]);return N(c,d,f)}),rr=(t,n,e)=>_(r=>{ht("assocr",t,ot("1st")),ht("assocr",n,ot("2nd"));const[u,[o,i]]=l(t(r));if(i.status===De)return u;if(i.status===ze)return N(o,e);const a=[i.value],c=[];let f=o,d=f.index;for(;;){const[e,[r,u]]=l(n(f));if(f=r,u.status===De)return e;if(u.status===ze)break;const[s,[o,i]]=l(t(f));if(f=o,i.status===De)return s;if(i.status===ze)break;c.push(u.value),a.push(i.value),d=f.index}let p=a[a.length-1];for(const t of s(c.length-1,-1))p=c[t](a[t],p);return N(f,p,d)}),ur=(t,n)=>_(e=>{ht("assocr1",t,ot("1st")),ht("assocr1",n,ot("2nd"));const[r,[u,o]]=l(t(e));if(o.status!==Ie)return r;const i=[o.value],a=[];let c=u,f=c.index;for(;;){const[e,[r,u]]=l(n(c));if(c=r,u.status===De)return e;if(u.status===ze)break;const[s,[o,d]]=l(t(c));if(c=o,d.status===De)return s;if(d.status===ze)break;a.push(u.value),i.push(d.value),f=c.index}let d=i[i.length-1];for(const t of s(a.length-1,-1))d=a[t](i[t],d);return N(c,d,f)})}])}));