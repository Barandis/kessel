/*!
 * Copyright (c) 2020 Thomas Otterson
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy of
 * this software and associated documentation files (the "Software"), to deal in
 * the Software without restriction, including without limitation the rights to
 * use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of
 * the Software, and to permit persons to whom the Software is furnished to do so,
 * subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS
 * FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR
 * COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER
 * IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN
 * CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * 
 */
!function(t,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define([],n):"object"==typeof exports?exports.kessel=n():t.kessel=n()}(this,(function(){return function(t){var n={};function e(r){if(n[r])return n[r].exports;var u=n[r]={i:r,l:!1,exports:{}};return t[r].call(u.exports,u,u.exports,e),u.l=!0,u.exports}return e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:r})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,n){if(1&n&&(t=e(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(e.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var u in t)e.d(r,u,function(n){return t[n]}.bind(null,u));return r},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},e.p="",e(e.s=0)}([function(t,n,e){"use strict";e.r(n),e.d(n,"alpha",(function(){return dn})),e.d(n,"any",(function(){return rn})),e.d(n,"anyOf",(function(){return sn})),e.d(n,"char",(function(){return Xt})),e.d(n,"charI",(function(){return Yt})),e.d(n,"digit",(function(){return an})),e.d(n,"eof",(function(){return un})),e.d(n,"hex",(function(){return cn})),e.d(n,"letter",(function(){return ln})),e.d(n,"lower",(function(){return yn})),e.d(n,"noneOf",(function(){return on})),e.d(n,"octal",(function(){return fn})),e.d(n,"range",(function(){return en})),e.d(n,"satisfy",(function(){return tn})),e.d(n,"satisfyM",(function(){return nn})),e.d(n,"upper",(function(){return pn})),e.d(n,"failNormally",(function(){return hn})),e.d(n,"failFatally",(function(){return xn})),e.d(n,"alphaU",(function(){return Tn})),e.d(n,"letterU",(function(){return jn})),e.d(n,"lowerU",(function(){return In})),e.d(n,"newline",(function(){return zn})),e.d(n,"newlineU",(function(){return Dn})),e.d(n,"regex",(function(){return An})),e.d(n,"space",(function(){return Nn})),e.d(n,"spaceU",(function(){return Rn})),e.d(n,"spaces",(function(){return Cn})),e.d(n,"spaces1",(function(){return Pn})),e.d(n,"spaces1U",(function(){return Vn})),e.d(n,"spacesU",(function(){return _n})),e.d(n,"upperU",(function(){return Sn})),e.d(n,"all",(function(){return Jn})),e.d(n,"anyString",(function(){return Hn})),e.d(n,"string",(function(){return Wn})),e.d(n,"stringI",(function(){return Zn})),e.d(n,"choice",(function(){return Yn})),e.d(n,"followedBy",(function(){return se})),e.d(n,"followedByM",(function(){return oe})),e.d(n,"lookAhead",(function(){return ee})),e.d(n,"notEmpty",(function(){return re})),e.d(n,"notEmptyM",(function(){return ue})),e.d(n,"notFollowedBy",(function(){return ae})),e.d(n,"notFollowedByM",(function(){return ie})),e.d(n,"optional",(function(){return te})),e.d(n,"orValue",(function(){return ne})),e.d(n,"andThenB",(function(){return me})),e.d(n,"applyB",(function(){return be})),e.d(n,"attempt",(function(){return ye})),e.d(n,"attemptM",(function(){return he})),e.d(n,"betweenB",(function(){return Oe})),e.d(n,"blockB",(function(){return $e})),e.d(n,"chainB",(function(){return ge})),e.d(n,"label",(function(){return pe})),e.d(n,"leftB",(function(){return ve})),e.d(n,"manyTillB",(function(){return Be})),e.d(n,"pipeB",(function(){return Ue})),e.d(n,"repeatB",(function(){return ke})),e.d(n,"rightB",(function(){return we})),e.d(n,"sequenceB",(function(){return xe})),e.d(n,"fifth",(function(){return Ie})),e.d(n,"first",(function(){return Ae})),e.d(n,"fourth",(function(){return Se})),e.d(n,"join",(function(){return Le})),e.d(n,"nth",(function(){return Fe})),e.d(n,"second",(function(){return je})),e.d(n,"third",(function(){return Te})),e.d(n,"value",(function(){return Me})),e.d(n,"always",(function(){return _e})),e.d(n,"andThen",(function(){return Ge})),e.d(n,"apply",(function(){return Ve})),e.d(n,"chain",(function(){return ze})),e.d(n,"empty",(function(){return De})),e.d(n,"map",(function(){return Pe})),e.d(n,"orElse",(function(){return qe})),e.d(n,"assoc1L",(function(){return hr})),e.d(n,"assoc1R",(function(){return gr})),e.d(n,"assocL",(function(){return yr})),e.d(n,"assocR",(function(){return xr})),e.d(n,"between",(function(){return fr})),e.d(n,"block",(function(){return Ye})),e.d(n,"left",(function(){return Qe})),e.d(n,"many",(function(){return tr})),e.d(n,"many1",(function(){return nr})),e.d(n,"manyTill",(function(){return lr})),e.d(n,"pipe",(function(){return dr})),e.d(n,"repeat",(function(){return cr})),e.d(n,"right",(function(){return Xe})),e.d(n,"sepBy",(function(){return sr})),e.d(n,"sepBy1",(function(){return or})),e.d(n,"sepEndBy",(function(){return ar})),e.d(n,"sepEndBy1",(function(){return ir})),e.d(n,"sequence",(function(){return Ke})),e.d(n,"skip",(function(){return er})),e.d(n,"skipMany",(function(){return rr})),e.d(n,"skipMany1",(function(){return ur})),e.d(n,"Status",(function(){return I})),e.d(n,"fail",(function(){return _})),e.d(n,"failure",(function(){return W})),e.d(n,"fatal",(function(){return P})),e.d(n,"maybeFatal",(function(){return V})),e.d(n,"ok",(function(){return C})),e.d(n,"parse",(function(){return z})),e.d(n,"parser",(function(){return R})),e.d(n,"run",(function(){return Z})),e.d(n,"status",(function(){return D})),e.d(n,"succeeded",(function(){return q})),e.d(n,"success",(function(){return G})),e.d(n,"ErrorType",(function(){return b})),e.d(n,"compound",(function(){return $})),e.d(n,"expected",(function(){return v})),e.d(n,"formatErrors",(function(){return T})),e.d(n,"generic",(function(){return m})),e.d(n,"getPosition",(function(){return S})),e.d(n,"merge",(function(){return U})),e.d(n,"nested",(function(){return B})),e.d(n,"other",(function(){return k})),e.d(n,"unexpected",(function(){return w}));const r=new TextEncoder,u=new TextDecoder;function*s(t,n,e,r){const u="number"==typeof n?t:0,s="number"==typeof n?n:t,o="number"==typeof e?0===e?1:Math.abs(e):1,a="number"==typeof e?!!r:"number"==typeof n?!!e:!!n,i=u<s;let c=u;for(;!(i?a?c>s:c>=s:a?c<s:c<=s);)yield c,c=i?c+o:c-o}function o(t,n,e){const r=Uint8Array.from({length:n},(n,r)=>e.getUint8(t+r));return u.decode(r)}function a(t){return new DataView(r.encode(t).buffer)}function i(t){return[...t].length}function c(t,n){const e=n.getUint8(t);return(128&e)>>7==0?1:(224&e)>>5==6?2:(240&e)>>4==14?3:(240&e)>>4==15?4:1}function f(t,n){const e=c(t,n);return{width:e,next:o(t,e,n)}}function l(t){return`'${t}'`}function d(t){return[t,t]}function p(t){switch(t.length){case 0:return"";case 1:return t[0];case 2:return t.join(" or ");default:{const n=t.slice(),e=n.pop();return`${n.join(", ")}, or ${e}`}}}function y(t){var n,e;const r=["th","st","nd","rd"],u=t%100;return t+(null!==(n=null!==(e=r[(u-20)%10])&&void 0!==e?e:r[u])&&void 0!==n?n:r[0])}function h(t){return void 0===t?"undefined":"function"==typeof t?R.created(t)?"parser":"function":"symbol"==typeof t?`Symbol(${t.description})`:JSON.stringify(t)}const x=/\t/gu,g=/(?:\p{Mn}|\p{Cf})/gu,b={Expected:"expected",Unexpected:"unexpected",Generic:"generic",Nested:"nested",Compound:"compound",Other:"other"};function v(t){return[{type:b.Expected,label:t}]}function w(t){return[{type:b.Unexpected,label:t}]}function m(t){return[{type:b.Generic,label:t}]}function k(t){return[{type:b.Other,label:t}]}function B(t,n){return 1===n.length&&n[0].type===b.Nested?n:[{type:b.Nested,ctx:t,errors:n}]}function $(t,n,e){return 1===e.length&&e[0].type===b.Nested?[{type:b.Compound,ctx:e.ctx,errors:e.errors,label:t}]:[{type:b.Compound,ctx:n,errors:e,label:t}]}function U(t,n){return[...t,...n]}function O(t,n){const e=n.getUint8(t);if(10===e||11===e||12===e)return{newline:!0,skip:1};if(13===e){if(t<n.byteLength-1){const r=n.getUint8(t+1);if(13===e&&10===r)return{newline:!0,skip:2}}return{newline:!0,skip:1}}if(t<n.byteLength-1){const r=n.getUint8(t+1);if(194===e&&133===r)return{newline:!0,skip:2};if(t<n.byteLength-2){const u=n.getUint8(t+2);if(226===e&&128===r&&(168===u||169===u))return{newline:!0,skip:3}}}return{newline:!1,skip:c(t,n)}}function E(t,n){let e=0,r=1,u=0;for(;u<n.byteLength;){const{newline:s,skip:o}=O(u,n);if(s){if(u+o>t)return{start:e,end:u-1,lineno:r};r++,e=u+o}u+=o}return{start:e,end:n.byteLength-1,lineno:r}}function L(t,n,e){let r=0,u=e;for(;u<t&&u<n.byteLength;)u+=c(u,n),r++;return r}function M(t,n,e){const r=[];let u=x.exec(n);for(;null!==u;)r.push(u.index),u=x.exec(n);let s=0,o=0,a=n;for(const n of r){const r=n+s,u=e-r%e;r<t+o&&(o+=u-1),s+=u-1,a=a.substring(0,r)+" ".repeat(u)+a.substring(r+1)}return{line:a,colIndex:o+t}}function F(t,n){let e=t;const r=[];let u=g.exec(n);for(;null!==u;)r.push(u.index),u.index<e&&e--,u=g.exec(n);return{colno:e+1,length:i(n)-r.length}}function A(t,n,e,r){const u=" ".repeat(r);return t.map(t=>{const{index:s,view:o}=t.ctx;return(t.label?`\n${u}${t.label} could not be parsed because:\n\n`:`\n${u}The parser backtracked after:\n\n`)+j(t.errors,s,o,n,e,r+2)}).join("")}function j(t,n,e,r=8,u=72,s=0){const{start:a,end:i,lineno:c}=E(n,e),f=L(n,e,a),l=" ".repeat(s),d=o(a,i-a+1,e),{colIndex:y,line:h}=M(f,d,r),{colno:x,length:g}=F(y,h),v=`${l}Parse error at (line ${c}, column ${x}):`,w=function(t,n,e,r,u=0){const s=" ".repeat(u);if(e<=r&&n<=r)return`${s}${t}\n${s}${" ".repeat(e-1)}^`;if(e<=r-3)return`${s}${t.substring(0,r-3)}...\n${s}${" ".repeat(e-1)}^`;if(e>=n-r+3){const u=n-r+3,o=e-(n-r);return`${s}...${t.substring(u)}\n${s}${" ".repeat(o-1)}^`}const o=e-1-Math.ceil(r/2)+3,a=e-1+Math.floor(r/2)-3;return`${s}...${t.substring(o,a)}...\n${s}${" ".repeat(Math.ceil(r/2))}^`}(h,g,x,u,s),m=t.find(t=>t.type===b.Generic),k=t.find(t=>t.type===b.Unexpected),B=p(t.filter(t=>t.type===b.Expected).map(t=>t.label)),$=t.filter(t=>t.type===b.Nested),U=t.filter(t=>t.type===b.Compound),O=k?`${l}Unexpected ${k.label}\n`:"",j=B.length?`${l}Expected ${B}\n`:"",T=m?`${l}${m.label}\n`:"",S=A($,r,u,s),I=A(U,r,u,s);return function(t,n){let e=t;for(;"\n"===e[e.length-1];)e=e.substring(0,e.length-1);return e+"\n".repeat(n)}(`${v}\n\n${w}\n${O}${j}${T}${0===t.length?l+"Unknown error(s)\n":""}${n>=e.byteLength?l+"Note: failure occurred at the end of input\n":""}${I}${S}`,2)}function T(t,n,e,r=j){const[u,s]=t,{index:o,view:a}=u;return r(s.errors,o,a,n,e)}function S(t,n=8){const{index:e,view:r}=t,{start:u,end:s,lineno:a}=E(e,r),i=L(e,r,u),c=o(u,s-u+1,r),{colIndex:f,line:l}=M(i,c,n),{colno:d,_:p}=F(f,l);return{line:a,column:d}}const I={Ok:"ok",Fail:"fail",Fatal:"fatal"};function N(t){const n="Parser input must be a string, a typed array, an array buffer, or a data view; parser input was "+typeof t;return{view:(t=>{if("string"==typeof t)return a(t);if((e=t)instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Uint16Array||e instanceof Uint32Array||e instanceof Int8Array||e instanceof Int16Array||e instanceof Int32Array||e instanceof Float32Array||e instanceof Float64Array)return new DataView(t.buffer);var e;if(t instanceof ArrayBuffer)return new DataView(t);if(t instanceof DataView)return t;throw new Error(n)})(t),index:0}}const R=function(t,n="created"){const e=new WeakSet;return Object.defineProperty((...n)=>{const r=t(...n);return e.add(r),r},n,{value:e.has.bind(e)})}(t=>t);function C(t,n=null,e=t.index){return[{...t,index:e},{status:I.Ok,value:n}]}function _(t,n=[],e=t.index){return[{...t,index:e},{status:I.Fail,errors:n}]}function P(t,n=[],e=t.index){return[{...t,index:e},{status:I.Fatal,errors:n}]}function V(t,n,e=[],r=n.index){return[{...n,index:r},{status:t?I.Fatal:I.Fail,errors:e}]}function z(t,n){return t(N(n))}function D(t){return t[1].status}function q(t){return t[1].status===I.Ok}function G(t){return q(t)?t[1].value:null}function W(t){return q(t)?null:T(t)}function Z(t,n){const[e,[r,u]]=d(t(N(n)));if(u.status===I.Ok)return u.value;throw new Error(T(e))}const J=t=>n=>`expected ${t}; found ${h(n)}`,H=J("a one-character string"),K=J("a function"),Q=J("a generator function"),X=J("a string"),Y=J("an array"),tt=J("a string or an array of characters"),nt=J("a string or a regular expression"),et=J("a number"),rt=J("a parser"),ut=(t,n)=>e=>`expected ${n} argument to be ${t}; found ${h(e)}`,st=t=>ut("a one-character string",t),ot=t=>ut("a function",t),at=t=>ut("a number",t),it=t=>ut("a parser",t),ct=t=>ut("a string",t);function ft(t,n,e){throw new Error(`[${t}]: ${e(n)}`)}function lt(t,n,e=H){"string"==typeof n&&1===i(n)||ft(t,n,e)}function dt(t,n,e=K){("function"!=typeof n||R.created(n))&&ft(t,n,e)}function pt(t,n,e=Q){"[object GeneratorFunction]"!==Object.prototype.toString.call(n)&&ft(t,n,e)}function yt(t,n,e=X){"string"!=typeof n&&ft(t,n,e)}function ht(t,n,e=Y){Array.isArray(n)||ft(t,n,e)}function xt(t,n,e=tt){Array.isArray(n)&&n.every(t=>"string"==typeof t&&1===i(t))||"string"==typeof n||ft(t,n,e)}function gt(t,n,e=et){"number"!=typeof n&&ft(t,n,e)}function bt(t,n,e=rt){"function"==typeof n&&R.created(n)||ft(t,n,e)}function vt(t,n){for(const[e,r]of function*(t){const n=t[Symbol.iterator]();let e=n.next(),r=0;for(;!e.done;)yield[r++,e.value],e=n.next()}(n))bt(t,r,it(y(e+1)))}const wt="a Unicode alphanumeric character",mt="any character",kt=t=>"any of "+p(t.map(t=>`'${t}'`)),Bt=t=>`a string of ${t} characters`,$t=t=>l(t),Ut=t=>l(t),Ot="a digit",Et="end of input",Lt="a hexadecimal digit",Mt="a letter",Ft="a Unicode letter",At="a lowercase letter",jt="a Unicode lowercase letter",Tt="a newline",St="a Unicode newline",It=t=>"none of "+p(t.map(t=>`'${t}'`)),Nt="an octal digit",Rt=(t,n)=>`a character between '${t}' and '${n}'`,Ct=t=>"a string matching "+t,_t="a whitespace character",Pt="zero or more whitespace characters",Vt="one or more whitespace characters",zt="zero or more Unicode whitespace characters",Dt="one or more Unicode whitespace characters",qt="a Unicode whitespace character",Gt=t=>l(t),Wt=t=>l(t),Zt="an uppercase letter",Jt="a Unicode uppercase letter",Ht={alpha:v("an alphanumeric character"),alphaU:v(wt),any:v(mt),anyOf:t=>v(kt(t)),anyString:t=>v(Bt(t)),char:t=>v($t(t)),charI:t=>v(Ut(t)),digit:v(Ot),eof:v(Et),hex:v(Lt),letter:v(Mt),letterU:v(Ft),lower:v(At),lowerU:v(jt),newline:v(Tt),newlineU:v(St),noneOf:t=>v(It(t)),octal:v(Nt),range:(t,n)=>v(Rt(t,n)),regex:t=>v(Ct(t)),space:v(_t),spaces:v(Pt),spaces1:v(Vt),spacesU:v(zt),spaces1U:v(Dt),spaceU:v(qt),string:t=>v(Gt(t)),stringI:t=>v(Wt(t)),upper:v(Zt),upperU:v(Jt)},{Ok:Kt}=I,Qt=t=>R(n=>{const{index:e,view:r}=n;if(e>=r.byteLength)return _(n);const{width:u,next:s}=f(e,r);return t(s)?C(n,s,e+u):_(n)}),Xt=t=>R(n=>{lt("char",t);const[e,[r,u]]=d(Qt(n=>t===n)(n));return u.status===Kt?e:_(r,Ht.char(t))}),Yt=t=>R(n=>{lt("charI",t);const[e,[r,u]]=d(Qt(n=>t.toLowerCase()===n.toLowerCase())(n));return u.status===Kt?e:_(r,Ht.charI(t))}),tn=t=>R(n=>(dt("satisfy",t),Qt(t)(n))),nn=(t,n)=>R(e=>{dt("satisfyM",t,ot("1st")),yt("satisfyM",n,ct("2nd"));const[r,[u,s]]=d(Qt(t)(e));return s.status===Kt?r:_(u,v(n))}),en=(t,n)=>R(e=>{lt("range",t,st("1st")),lt("range",n,st("2nd"));const[r,[u,s]]=d(Qt(e=>e>=t&&e<=n)(e));return s.status===Kt?r:_(u,Ht.range(t,n))}),rn=R(t=>{const{index:n,view:e}=t;if(n>=e.byteLength)return _(t,Ht.any);const{width:r,next:u}=f(n,e);return C(t,u,n+r)}),un=R(t=>{const{index:n,view:e}=t;return n>=e.byteLength?C(t,null):_(t,Ht.eof)}),sn=t=>R(n=>{xt("anyOf",t);const{index:e,view:r}=n,{width:u,next:s}=f(e,r),o=[...t];return o.includes(s)?C(n,s,e+u):_(n,Ht.anyOf(o))}),on=t=>R(n=>{xt("noneOf",t);const{index:e,view:r}=n,{width:u,next:s}=f(e,r),o=[...t];return o.includes(s)?_(n,Ht.noneOf(o)):C(n,s,e+u)}),an=R(t=>{const[n,[e,r]]=d(Qt(t=>t>="0"&&t<="9")(t));return r.status===Kt?n:_(e,Ht.digit)}),cn=R(t=>{const[n,[e,r]]=d(Qt(t=>t>="0"&&t<="9"||t>="a"&&t<="f"||t>="A"&&t<="F")(t));return r.status===Kt?n:_(e,Ht.hex)}),fn=R(t=>{const[n,[e,r]]=d(Qt(t=>t>="0"&&t<="7")(t));return r.status===Kt?n:_(e,Ht.octal)}),ln=R(t=>{const[n,[e,r]]=d(Qt(t=>t>="a"&&t<="z"||t>="A"&&t<="Z")(t));return r.status===Kt?n:_(e,Ht.letter)}),dn=R(t=>{const[n,[e,r]]=d(Qt(t=>t>="a"&&t<="z"||t>="A"&&t<="Z"||t>="0"&&t<="9")(t));return r.status===Kt?n:_(e,Ht.alpha)}),pn=R(t=>{const[n,[e,r]]=d(Qt(t=>t>="A"&&t<="Z")(t));return r.status===Kt?n:_(e,Ht.upper)}),yn=R(t=>{const[n,[e,r]]=d(Qt(t=>t>="a"&&t<="z")(t));return r.status===Kt?n:_(e,Ht.lower)}),hn=t=>R(n=>(yt("failNormally",t),_(n,m(t)))),xn=t=>R(n=>(yt("failFatally",t),P(n,m(t)))),{Ok:gn}=I,bn=/^\p{Alphabetic}/u,vn=/^(?:\p{Alphabetic}|\p{N})/u,wn=/^(?:\p{Uppercase}|\p{Lt})/u,mn=/^\p{Lowercase}/u,kn=/^(?:\r\n|[\r\n\t ])/,Bn=/^(?:\r\n|\p{White_Space})/u,$n=/^[\r\n\t ]*/,Un=/^\p{White_Space}*/u,On=/^[\r\n\t ]+/,En=/^\p{White_Space}+/u,Ln=/^(?:\r\n|\r|\n)/,Mn=/^(?:\r\n|[\r\n\u0085\u2028\u2029])/u,Fn=t=>R(n=>{const{index:e,view:r}=n,u=o(e,r.byteLength-e,r).match(t);return u?C(n,u[0],e+a(u[0]).byteLength):_(n)}),An=t=>R(n=>{!function(t,n,e=nt){"string"!=typeof n&&"[object RegExp]"!==Object.prototype.toString.call(n)&&ft(t,n,e)}("regex",t);let e="string"==typeof t?new RegExp(t):t;const{source:r,flags:u}=e;if("^"!==r[0]){e=new RegExp("^"+r,u)}const[s,[o,a]]=d(Fn(e)(n));return a.status===gn?s:_(o,Ht.regex(e))}),jn=R(t=>{const[n,[e,r]]=d(Fn(bn)(t));return r.status===gn?n:_(e,Ht.letterU)}),Tn=R(t=>{const[n,[e,r]]=d(Fn(vn)(t));return r.status===gn?n:_(e,Ht.alphaU)}),Sn=R(t=>{const[n,[e,r]]=d(Fn(wn)(t));return r.status===gn?n:_(e,Ht.upperU)}),In=R(t=>{const[n,[e,r]]=d(Fn(mn)(t));return r.status===gn?n:_(e,Ht.lowerU)}),Nn=R(t=>{const[n,[e,r]]=d(Fn(kn)(t));return r.status===gn?n:_(e,Ht.space)}),Rn=R(t=>{const[n,[e,r]]=d(Fn(Bn)(t));return r.status===gn?n:_(e,Ht.spaceU)}),Cn=R(t=>{const[n,e]=Fn($n)(t);return C(n,null)}),_n=R(t=>{const[n,e]=Fn(Un)(t);return C(n,null)}),Pn=R(t=>{const[n,e]=Fn(On)(t);return e.status===gn?C(n,null):_(n,Ht.spaces1)}),Vn=R(t=>{const[n,e]=Fn(En)(t);return e.status===gn?C(n,null):_(n,Ht.spaces1U)}),zn=R(t=>{const[n,[e,r]]=d(Fn(Ln)(t));return r.status===gn?n:_(e,Ht.newline)}),Dn=R(t=>{const[n,[e,r]]=d(Fn(Mn)(t));return r.status===gn?n:_(e,Ht.newlineU)}),{Ok:qn}=I,Gn=(t,n)=>R(e=>{if(t<1)return C(e,"");const{index:r,view:u}=e;if(r>=u.byteLength)return _(e);const{width:a,next:f}=function(t,n,e){const r=n.byteLength;let u=0;for(const o of s(e)){const e=t+u;if(e>=r)break;u+=c(e,n)}return t+u>=r&&(u=r-t),{width:u,next:o(t,u,n)}}(r,u,t);return i(f)===t&&n(f)?C(e,f,r+a):_(e)}),Wn=t=>R(n=>{yt("string",t);const[e,[r,u]]=d(Gn(i(t),n=>t===n)(n));return u.status===qn?e:_(r,Ht.string(t))}),Zn=t=>R(n=>{yt("stringI",t);const[e,[r,u]]=d(Gn(i(t),n=>t.toLowerCase()===n.toLowerCase())(n));return u.status===qn?e:_(r,Ht.stringI(t))}),Jn=R(t=>{const{index:n,view:e}=t,r=e.byteLength-n;return C(t,o(n,r,e),n+r)}),Hn=t=>R(n=>{gt("anyString",t);const[e,[r,u]]=d(Gn(t,()=>!0)(n));return u.status===qn?e:_(r,Ht.anyString(t))}),{Ok:Kn,Fail:Qn,Fatal:Xn}=I,Yn=(...t)=>R(n=>{vt("choice",t);let e=[];for(const r of t){const[t,[u,s]]=d(r(n));if(s.status===Kn)return t;if(e=U(e,s.errors),s.status===Xn)return P(u,e)}return _(n,e)}),te=t=>R(n=>{bt("optional",t);const[e,[r,u]]=d(t(n));return u.status!==Qn?e:C(r,null)}),ne=(t,n)=>R(e=>{bt("orValue",t,it("1st"));const[r,[u,s]]=d(t(e));return s.status!==Qn?r:C(u,n)}),ee=t=>R(n=>{bt("lookAhead",t);const e=n.index,[r,u]=t(n);return u.status===Kn?C(r,u.value,e):_(r,u.errors,e)}),re=t=>R(n=>{bt("notEmpty",t);const e=n.index,[r,[u,s]]=d(t(n));return s.status!==Kn||u.index!==e?r:_(u)}),ue=(t,n)=>R(e=>{bt("notEmptyM",t,it("1st")),yt("notEmptyM",n,ct("2nd"));const r=e.index,[u,[s,o]]=d(t(e));return o.status!==Kn||s.index!==r?u:_(s,v(n))}),se=t=>R(n=>{bt("followedBy",t);const e=n.index,[r,u]=t(n);return u.status===Kn?C(r,null,e):_(r,void 0,e)}),oe=(t,n)=>R(e=>{bt("followedByM",t,it("1st")),yt("followedByM",n,ct("2nd"));const r=e.index,[u,s]=t(e);return s.status===Kn?C(u,null,r):_(u,v(n),r)}),ae=t=>R(n=>{bt("notFollowedBy",t);const e=n.index,[r,u]=t(n);return u.status===Kn?_(r,void 0,e):C(r,null,e)}),ie=(t,n)=>R(e=>{bt("notFollowedByM",t,it("1st")),yt("notFollowedByM",n,ct("2nd"));const r=e.index,[u,s]=t(e);return s.status===Kn?_(u,v(n),r):C(u,null,r)}),{Ok:ce,Fail:fe,Fatal:le}=I;function de(t,n,e){return[{...t},{...n,errors:e}]}const pe=(t,n)=>R(e=>{bt("label",t,it("1st")),yt("label",n,ct("2nd"));const[r,[u,s]]=d(t(e));return s.status===fe?de(u,s,v(n)):r}),ye=t=>R(n=>{bt("attempt",t);const e=n.index,[r,[u,s]]=d(t(n));if(s.status===ce)return r;return _(u,e===u.index?s.errors:B(u,s.errors),e)}),he=(t,n)=>R(e=>{bt("attemptM",t,it("1st")),yt("attemptM",n,ct("2nd"));const[r,[u,s]]=d(t(e));if(s.status===ce)return r;if(s.status===fe){if(1===s.errors.length&&s.errors[0].type===b.Nested){const{ctx:t,errors:e}=s.errors[0];return de(u,s,$(n,t,e))}return de(u,s,v(n))}return _(e,$(n,u,s.errors))}),xe=(...t)=>R(n=>{vt("sequenceB",t);const e=[],r=n.index;let u=n;for(const n of t){const[t,[s,o]]=d(n(u));if(u=s,o.status===le)return t;if(o.status===fe){return _(u,r===u.index?o.errors:B(u,o.errors),r)}null!==o.value&&e.push(o.value)}return C(u,e)}),ge=(t,n)=>R(e=>{bt("chainB",t,it("1st")),dt("chainB",n,ot("2nd"));const r=e.index,[u,[s,o]]=d(t(e));if(o.status!==ce)return u;const a=n(o.value);bt("chainB",a,J("the 2nd argument to return a parser"));const[i,[c,f]]=d(a(s));if(f.status!==fe)return i;return _(c,r===c.index?f.errors:B(c,f.errors),r)}),be=(t,n)=>R(e=>{bt("applyB",t,it("1st")),bt("applyB",n,it("2nd"));const r=e.index,[u,[s,o]]=d(t(e));if(o.status!==ce)return u;const[a,[i,c]]=d(n(s));if(c.status===le)return a;if(c.status===fe)return _(i,c.errors,r);const f=c.value;return dt("applyB",f,J("2nd argument to return a function")),C(i,f(o.value))}),ve=(t,n)=>R(e=>{bt("leftB",t,it("1st")),bt("leftB",n,it("2nd"));const r=e.index,[u,[s,o]]=d(t(e));if(o.status!==ce)return u;const[a,[i,c]]=d(n(s));if(c.status===le)return a;if(c.status===ce)return C(i,o.value);return _(i,r===i.index?c.errors:B(i,c.errors),r)}),we=(t,n)=>R(e=>{bt("rightB",t,it("1st")),bt("rightB",n,it("2nd"));const r=e.index,[u,[s,o]]=d(t(e));if(o.status!==I.Ok)return u;const[a,[i,c]]=d(n(s));if(c.status!==fe)return a;return _(i,r===i.index?c.errors:B(i,c.errors),r)}),me=(t,n)=>R(e=>{bt("andThenB",t,it("1st")),bt("andThenB",n,it("2nd"));const r=e.index,[u,[s,o]]=d(t(e));if(o.status!==ce)return u;const[a,[i,c]]=d(n(s));if(c.status===le)return a;if(c.status===ce)return C(i,[o.value,c.value]);return _(i,r===i.index?c.errors:B(i,c.errors),r)}),ke=(t,n)=>R(e=>{bt("repeatB",t,it("1st")),gt("repeatB",n,at("2nd"));const r=e.index,u=[];let o=e;for(const e of s(n)){const[n,[e,s]]=d(t(o));if(o=e,s.status===le)return n;if(s.status===fe){return _(o,r===o.index?s.errors:B(o,s.errors),r)}u.push(s.value)}return C(o,u)}),Be=(t,n)=>R(e=>{bt("manyTillB",t,it("1st")),bt("manyTillB",n,it("2nd"));const r=e.index,u=[];let s=e;for(;;){const[e,[o,a]]=d(n(s));if(s=o,a.status===le)return e;if(a.status===ce)break;const[i,[c,f]]=d(t(s));if(s=c,f.status===le)return i;if(f.status===fe){return _(c,r===c.index?U(f.errors,a.errors):B(c,U(f.errors,a.errors)),r)}u.push(f.value)}return C(s,u)}),$e=t=>R(n=>{pt("blockB",t);const e=t(),r=n.index;let u,s=n,o=0;for(;;){const{value:t,done:n}=e.next(u);if(n)return C(s,t);bt("blockB",t,t=>`expected ${y(o+1)} yield to be to a parser; found ${h(t)}`);const[a,[i,c]]=d(t(s));if(s=i,c.status===le)return a;if(c.status===fe)return _(i,c.errors,r);u=c.value,o++}}),Ue=(...t)=>R(n=>{const e=t.pop();vt("pipeB",t),dt("pipeB",e,ot(y(t.length+1)));const r=n.index,u=[];let s=n;for(const n of t){const[t,[e,o]]=d(n(s));if(s=e,o.status===le)return t;if(o.status===fe)return _(s,o.errors,r);u.push(o.value)}return C(s,e(...u))}),Oe=(t,n,e)=>R(r=>{bt("betweenB",t,it("1st")),bt("betweenB",n,it("2nd")),bt("betweenB",e,it("3rd"));const u=r.index,[s,[o,a]]=d(t(r));if(a.status!==ce)return s;const[i,[c,f]]=d(e(o));if(f.status===le)return i;if(f.status===fe)return _(c,f.errors,u);const[l,[p,y]]=d(n(c));return y.status===le?l:y.status===fe?_(p,y.errors,u):C(p,f.value)}),{Ok:Ee}=I,Le=t=>R(n=>{bt("join",t);const[e,[r,u]]=d(t(n));if(u.status!==Ee)return e;const s=u.value;return ht("join",s,J("argument to return an array")),C(r,s.join(""))}),Me=(t,n)=>R(e=>{bt("value",t,it("1st"));const[r,[u,s]]=d(t(e));return s.status===Ee?C(u,n):r}),Fe=(t,n)=>R(e=>{bt("nth",t,it("1st")),gt("nth",n,at("2nd"));const[r,[u,s]]=d(t(e));if(s.status!==Ee)return r;const o=s.value;return ht("nth",o,J("1st argument to return an array")),C(u,o[n])}),Ae=t=>R(n=>{bt("first",t);const[e,[r,u]]=d(t(n));if(u.status!==Ee)return e;const s=u.value;return ht("first",s,J("argument to return an array")),C(r,s[0])}),je=t=>R(n=>{bt("second",t);const[e,[r,u]]=d(t(n));if(u.status!==Ee)return e;const s=u.value;return ht("second",s,J("argument to return an array")),C(r,s[1])}),Te=t=>R(n=>{bt("third",t);const[e,[r,u]]=d(t(n));if(u.status!==Ee)return e;const s=u.value;return ht("third",s,J("argument to return an array")),C(r,s[2])}),Se=t=>R(n=>{bt("fourth",t);const[e,[r,u]]=d(t(n));if(u.status!==Ee)return e;const s=u.value;return ht("fourth",s,J("argument to return an array")),C(r,s[3])}),Ie=t=>R(n=>{bt("fifth",t);const[e,[r,u]]=d(t(n));if(u.status!==Ee)return e;const s=u.value;return ht("fifth",s,J("argument to return an array")),C(r,s[4])}),{Ok:Ne,Fail:Re,Fatal:Ce}=I,_e=t=>R(n=>C(n,t)),Pe=(t,n)=>R(e=>{bt("map",t,it("1st")),dt("map",n,ot("2nd"));const[r,[u,s]]=d(t(e));return s.status===Ne?C(u,n(s.value)):r}),Ve=(t,n)=>R(e=>{bt("apply",t,it("1st")),bt("apply",n,it("2nd"));const r=e.index,[u,[s,o]]=d(t(e));if(o.status!==Ne)return u;const[a,i]=n(s);if(i.status!==Ne)return V(a.index!==r,a,i.errors);const c=i.value;return dt("apply",c,J("2nd argument to return a function")),C(a,c(o.value))}),ze=(t,n)=>R(e=>{bt("chain",t,it("1st")),dt("chain",n,ot("2nd"));const r=e.index,[u,[s,o]]=d(t(e));if(o.status!==Ne)return u;const a=n(o.value);bt("chain",a,J("the 2nd argument to return a parser"));const[i,[c,f]]=d(a(s));return f.status===Ne?i:V(c.index!==r,c,f.errors)}),De=R(t=>C(t)),qe=(t,n)=>R(e=>{bt("orElse",t,it("1st")),bt("orElse",n,it("2nd"));const[r,[u,s]]=d(t(e));if(s.status!==Re)return r;const[o,[a,i]]=d(n(u));return i.status===Ne?o:V(i.status===Ce,a,U(s.errors,i.errors))}),Ge=(t,n)=>R(e=>{bt("andThen",t,it("1st")),bt("andThen",n,it("2nd"));const r=e.index,[u,[s,o]]=d(t(e));if(o.status!==Ne)return u;const[a,i]=n(s);return i.status===Ne?C(a,[o.value,i.value]):V(a.index!==r,a,i.errors)}),{Ok:We,Fail:Ze,Fatal:Je}=I;function He(t){return`[${t}]: infinite loop detected; neither content nor separator parser consumed input`}const Ke=(...t)=>R(n=>{vt("sequence",t);const e=[],r=n.index;let u=n;for(const n of t){const[t,s]=n(u);if(u=t,s.status!==We)return V(u.index!==r,u,s.errors);null!==s.value&&e.push(s.value)}return C(u,e)}),Qe=(t,n)=>R(e=>{bt("left",t,it("1st")),bt("left",n,it("2nd"));const r=e.index,[u,[s,o]]=d(t(e));if(o.status!==We)return u;const[a,i]=n(s);return i.status===We?C(a,o.value):V(a.index!==r,a,i.errors)}),Xe=(t,n)=>R(e=>{bt("right",t,it("1st")),bt("right",n,it("2nd"));const r=e.index,[u,[s,o]]=d(t(e));if(o.status!==I.Ok)return u;const[a,[i,c]]=d(n(s));return c.status===We?a:V(i.index!==r,i,c.errors)}),Ye=t=>R(n=>{pt("block",t);const e=t(),r=n.index;let u,s=n,o=0;for(;;){const{value:t,done:n}=e.next(u);if(n)return C(s,t);bt("block",t,t=>`expected ${y(o+1)} yield to be to a parser; found ${h(t)}`);const[a,i]=t(s);if(s=a,i.status!==We)return V(s.index!==r,s,i.errors);u=i.value,o++}}),tr=t=>R(n=>{bt("many",t);const e=[];let r=n;for(;;){const[n,[u,s]]=d(t(r));if(r=u,s.status===Je)return n;if(s.status===Ze)break;if(null!==s.value&&e.push(s.value),r.index>=r.view.byteLength)break}return C(r,e)}),nr=t=>R(n=>{bt("many1",t);const[e,[r,u]]=d(t(n));if(u.status!==We)return e;let s=r;const o=null!==u.value?[u.value]:[];for(;;){const[n,[e,r]]=d(t(s));if(s=e,r.status===Je)return n;if(r.status===Ze)break;if(null!==r.value&&o.push(r.value),s.index>=s.view.byteLength)break}return C(s,o)}),er=t=>R(n=>{bt("skip",t);const[e,[r,u]]=d(t(n));return u.status===We?C(r,null):e}),rr=t=>R(n=>{bt("skipMany",t);let e=n;for(;;){const[n,[r,u]]=d(t(e));if(e=r,u.status===Je)return n;if(u.status===Ze)break;if(e.index>=e.view.byteLength)break}return C(e,null)}),ur=t=>R(n=>{bt("skipMany1",t);const[e,[r,u]]=d(t(n));if(u.status!==We)return e;let s=r;for(;;){const[n,[e,r]]=d(t(s));if(s=e,r.status===Je)return n;if(r.status===Ze)break;if(s.index>=s.view.byteLength)break}return C(s,null)}),sr=(t,n)=>R(e=>{bt("sepBy",t,it("1st")),bt("sepBy",n,it("2nd"));let r=e.index;const[u,[s,o]]=d(t(e));if(o.status===Je)return u;if(o.status===Ze)return C(s,[]);const a=[o.value];let i=s;for(;;){r=i.index;const[e,[u,s]]=d(n(i));if(i=u,s.status===Je)return e;if(s.status===Ze)break;const[o,[c,f]]=d(t(i));if(i=c,f.status===Je)return o;if(f.status===Ze)break;if(i.index===r)throw new TypeError(He("sepBy"));a.push(f.value)}return C(i,a,r)}),or=(t,n)=>R(e=>{bt("sepBy1",t,it("1st")),bt("sepBy1",n,it("2nd"));let r=e.index;const[u,[s,o]]=d(t(e));if(o.status!==We)return u;const a=[o.value];let i=s;for(;;){r=i.index;const[e,[u,s]]=d(n(i));if(i=u,s.status===Je)return e;if(s.status===Ze)break;const[o,[c,f]]=d(t(i));if(i=c,f.status===Je)return o;if(f.status===Ze)break;if(i.index===r)throw new TypeError(He("sepBy1"));a.push(f.value)}return C(i,a,r)}),ar=(t,n)=>R(e=>{bt("sepEndBy",t,it("1st")),bt("sepEndBy",n,it("2nd"));let r=e.index;const[u,[s,o]]=d(t(e));if(o.status===Je)return u;if(o.status===Ze)return C(s,[]);const a=[o.value];let i=s;for(;;){r=i.index;const[e,[u,s]]=d(n(i));if(i=u,s.status===Je)return e;if(s.status===Ze)break;const[o,[c,f]]=d(t(i));if(i=c,f.status===Je)return o;if(f.status===Ze)break;if(i.index===r)throw new TypeError(He("sepEndBy"));a.push(f.value)}const[c,[f,l]]=d(n({...i,index:r}));return l.status===Je?c:C(f,a)}),ir=(t,n)=>R(e=>{bt("sepEndBy1",t,it("1st")),bt("sepEndBy1",n,it("2nd"));let r=e.index;const[u,[s,o]]=d(t(e));if(o.status!==We)return u;const a=[o.value];let i=s;for(;;){r=i.index;const[e,[u,s]]=d(n(i));if(i=u,s.status===Je)return e;if(s.status===Ze)break;const[o,[c,f]]=d(t(i));if(i=c,f.status===Je)return o;if(f.status===Ze)break;if(i.index===r)throw new TypeError(He("sepEndBy1"));a.push(f.value)}const[c,[f,l]]=d(n({...i,index:r}));return l.status===Je?c:C(f,a)}),cr=(t,n)=>R(e=>{bt("repeat",t,it("1st")),gt("repeat",n,at("2nd"));const r=e.index,u=[];let o=e;for(const e of s(n)){const[n,e]=t(o);if(o=n,e.status!==We)return V(o.index!==r,o,e.errors);u.push(e.value)}return C(o,u)}),fr=(t,n,e)=>R(r=>{bt("between",t,it("1st")),bt("between",n,it("2nd")),bt("between",e,it("3rd"));const u=r.index,[s,[o,a]]=d(t(r));if(a.status!==We)return s;const[i,c]=e(o);if(c.status!==We)return V(i.index!==u,i,c.errors);const[f,l]=n(i);return l.status===We?C(f,c.value):V(f.index!==u,f,l.errors)}),lr=(t,n)=>R(e=>{bt("manyTill",t,it("1st")),bt("manyTill",n,it("2nd"));const r=e.index,u=[];let s=e;for(;;){const[e,[o,a]]=d(n(s));if(s=o,a.status===Je)return e;if(a.status===We)break;const[i,[c,f]]=d(t(s));if(s=c,f.status===Je)return i;if(f.status===Ze)return V(s.index!==r,s,U(f.errors,a.errors));null!==f.value&&u.push(f.value)}return C(s,u)}),dr=(...t)=>R(n=>{const e=t.pop();vt("pipe",t),dt("pipe",e,ot(y(t.length+1)));const r=n.index,u=[];let s=n;for(const n of t){const[t,e]=n(s);if(s=t,e.status!==We)return V(s.index!==r,s,e.errors);u.push(e.value)}return C(s,e(...u))});function pr(t){return n=>`expected ${t} op parser to return a function; found ${h(n)}`}const yr=(t,n,e)=>R(r=>{bt("assocL",t,it("1st")),bt("assocL",n,it("2nd"));const[u,[o,a]]=d(t(r));if(a.status===Je)return u;if(a.status===Ze)return C(o,e);const i=[a.value],c=[];let f=o,l=f.index,p=0;for(;;){const[e,[r,u]]=d(n(f));if(f=r,u.status===Je)return e;if(u.status===Ze)break;const[s,[o,a]]=d(t(f));if(f=o,a.status===Je)return s;if(a.status===Ze)break;dt("assocL",u.value,pr(y(p+1))),c.push(u.value),i.push(a.value),l=f.index,p++}let h=i[0];for(const t of s(c.length))h=c[t](h,i[t+1]);return C(f,h,l)}),hr=(t,n)=>R(e=>{bt("assoc1L",t,it("1st")),bt("assoc1L",n,it("2nd"));const[r,[u,o]]=d(t(e));if(o.status!==We)return r;const a=[o.value],i=[];let c=u,f=c.index,l=0;for(;;){const[e,[r,u]]=d(n(c));if(c=r,u.status===Je)return e;if(u.status===Ze)break;const[s,[o,p]]=d(t(c));if(c=o,p.status===Je)return s;if(p.status===Ze)break;dt("assoc1L",u.value,pr(y(l+1))),i.push(u.value),a.push(p.value),f=c.index,l++}let p=a[0];for(const t of s(i.length))p=i[t](p,a[t+1]);return C(c,p,f)}),xr=(t,n,e)=>R(r=>{bt("assocR",t,it("1st")),bt("assocR",n,it("2nd"));const[u,[o,a]]=d(t(r));if(a.status===Je)return u;if(a.status===Ze)return C(o,e);const i=[a.value],c=[];let f=o,l=f.index,p=0;for(;;){const[e,[r,u]]=d(n(f));if(f=r,u.status===Je)return e;if(u.status===Ze)break;const[s,[o,a]]=d(t(f));if(f=o,a.status===Je)return s;if(a.status===Ze)break;dt("assocR",u.value,pr(y(p+1))),c.push(u.value),i.push(a.value),l=f.index,p++}let h=i[i.length-1];for(const t of s(c.length-1,-1))h=c[t](i[t],h);return C(f,h,l)}),gr=(t,n)=>R(e=>{bt("assoc1R",t,it("1st")),bt("assoc1R",n,it("2nd"));const[r,[u,o]]=d(t(e));if(o.status!==We)return r;const a=[o.value],i=[];let c=u,f=c.index,l=0;for(;;){const[e,[r,u]]=d(n(c));if(c=r,u.status===Je)return e;if(u.status===Ze)break;const[s,[o,p]]=d(t(c));if(c=o,p.status===Je)return s;if(p.status===Ze)break;dt("assoc1R",u.value,pr(y(l+1))),i.push(u.value),a.push(p.value),f=c.index,l++}let p=a[a.length-1];for(const t of s(i.length-1,-1))p=i[t](a[t],p);return C(c,p,f)})}])}));