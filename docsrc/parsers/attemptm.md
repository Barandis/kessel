<!--
 Copyright (c) 2020 Thomas J. Otterson
 
 This software is released under the MIT License.
 https://opensource.org/licenses/MIT
-->

> `attemptM(p: Parser<T>, msg: string): Parser<T>`

Applies a parser, backtracks if necessary, and overwrites its error message on failure.

If `p` succeeds, then `attemptM` does nothing other than return that parser's result. If `p` fails, what happens depends on whether input was consumed.

If no input was consumed, `attemptM` acts like [`label`](label.md) and simply replaces the error message with `msg`. If some input *was* consumed, then `attemptM` backtracks to the location where `p` was originally applied and adds a more detailed backtracking message using `msg` as a header.

Note that this is slightly different than other `xxxM` parsers because `msg` doesn't completely replace the error message. In this case it just provides a header for the backtracking portion of the message.

#### Example

```javascript
const parser = attemptM(left(letter, digit), 'a letter and then a digit')

const s = parse(parser, 'a1')
console.log(status(s))  // "ok"
console.log(success(s)) // "a"

const f = parse(parser, '1a')
console.log(status(f))  // "fail"
console.log(failure(f)) // Parse error at (line 1, column 1):
                        //
                        // 1a
                        // ^
                        // Expected a letter and then a digit

const t = parse(parser, 'ab')
console.log(status(t))  // "fail"
console.log(failure(t)) // Parse error at (line 1, column 1):
                        //
                        // ab
                        // ^
                        // a letter and then a digit could not be parsed because:
                        //
                        //   Parse error at (line 1, column 2):
                        //
                        //   ab
                        //    ^
                        //   Expected a digit
```

#### Parameters

* `p`: The parser to apply. If it fails, its error message will be changed.
* `msg`: The error message for when `p` does not consume input or as a header for backtracking information if `p` does consume input.

#### Success

* Succeeds if `p` succeeds. Returns the result of `p`.

#### Failure

* Fails if `p` fails. In this case, the error message generated by `p` will be replaced with `msg`.
* Fails if `p` fails fatally. In this case, a new error message is generated, and that generated by `p` is used as a backtracking message using `msg` as the header.

#### Throws

* Throws an error if `p` is not a parser.
* Throws an error if `msg` is not a string.

#### See Also

* [`CompoundError`](../types/compounderror.md)
* [`Parser`](../types/parser.md)
* [`attempt`](attempt.md)
* [`label`](label.md)